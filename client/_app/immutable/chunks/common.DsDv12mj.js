class n{constructor(a,e,t){this.note=e,this.actor=a,e.published?this.published=String(e.published):e.ephemeralTimestamp?this.published=e.ephemeralTimestamp:this.published=new Date().toISOString(),e.ephemeralTimestamp?this.created_at=e.ephemeralTimestamp:this.created_at=new Date().toISOString(),this.replies=t||new Map}}function c(r){return new Promise(a=>setTimeout(a,r))}function o(r){const a=/^https:\/\/([a-zA-Z0-9\-.]+?)\/[A-Za-z0-9/\-._]+$/;if(r.id){const e=r.id.match(a);if(e)return`@${r.preferredUsername}@${e[1]}`}return String(r.url)}function l(r,a,e){return r&&e.tag&&e.tag.forEach(t=>{t.type==="Emoji"&&t.icon&&a&&(a=a.replaceAll(t.name,`<img class="emoji" src="${s(r,window.Buffer,t.icon.url)}"/>`))}),a}function u(r){const a=Date.now(),e=Math.floor((a-r)/1e3);let t=e/31536e3;return t>1?Math.floor(t)+"yr":(t=e/2592e3,t>1?Math.floor(t)+"mo":(t=e/86400,t>1?Math.floor(t)+"d":(t=e/3600,t>1?Math.floor(t)+"h":(t=e/60,t>1?Math.floor(t)+"m":Math.floor(e)+"s"))))}function h(r,a){return Date.parse(r.created_at)<Date.parse(a.created_at)?-1:Date.parse(r.created_at)>Date.parse(a.created_at)?1:0}function f(r){const a=/https:\/\/(?:[a-zA-Z0-9.-]+)(?:\.[a-zA-Z0-9.-]+)+\/(?:notes|conversation)\/([a-zA-Z0-9-]+)/,e=r.match(a);return e&&e[1]?e[1]:null}function m(r,a){const e=/(https:\/\/(?:[a-zA-Z0-9.-]+)(?:\.[a-zA-Z0-9.-]+)+)\/.*/,t=r.match(e),i=a.match(e);return t!==null&&i!==null&&t[1]==i[1]}function s(r,a,e){return r?"/api/cache?url="+r.get_url_safe_base64(e):e}export{n as D,s as a,h as c,m as d,f as e,o as g,l as i,c as s,u as t};
