class a{constructor(s,e,t){this.note=e,this.actor=s,e.published?this.published=String(e.published):e.ephemeralTimestamp?this.published=e.ephemeralTimestamp:this.published=new Date().toISOString(),this.replies=t||new Map}}function o(r){return new Promise(s=>setTimeout(s,r))}function u(r){const s=/^https:\/\/([a-zA-Z0-9\-.]+?)\/[A-Za-z0-9/\-._]+$/;if(r.id){const e=r.id.match(s);if(e)return`@${r.preferredUsername}@${e[1]}`}return String(r.url)}function c(r,s,e){return r&&e.tag&&e.tag.forEach(t=>{t.type==="Emoji"&&t.icon&&s&&(s=s.replaceAll(t.name,`<img class="emoji" src="${n(r,window.Buffer,t.icon.url)}"/>`))}),s}function l(r){const s=Date.now(),e=Math.floor((s-r)/1e3);let t=e/31536e3;return t>1?Math.floor(t)+"yr":(t=e/2592e3,t>1?Math.floor(t)+"mo":(t=e/86400,t>1?Math.floor(t)+"d":(t=e/3600,t>1?Math.floor(t)+"h":(t=e/60,t>1?Math.floor(t)+"m":Math.floor(e)+"s"))))}function h(r,s){return Date.parse(r.published)<Date.parse(s.published)?-1:Date.parse(r.published)>Date.parse(s.published)?1:0}function f(r){const s=/https:\/\/(?:[a-zA-Z0-9.-]+)(?:\.[a-zA-Z0-9.-]+)+\/(?:notes|conversation)\/([a-zA-Z0-9-]+)/,e=r.match(s);return e&&e[1]?e[1]:null}function p(r,s){const e=/(https:\/\/(?:[a-zA-Z0-9.-]+)(?:\.[a-zA-Z0-9.-]+)+)\/.*/,t=r.match(e),i=s.match(e);return t!==null&&i!==null&&t[1]==i[1]}function n(r,s,e){return r?"/api/cache?url="+r.get_url_safe_base64(e):e}export{a as D,n as a,h as c,p as d,f as e,u as g,c as i,o as s,l as t};
