class a{constructor(n,e,t){this.note=e,this.actor=n,e.ephemeralTimestamp?this.published=e.ephemeralTimestamp:this.published=String(e.published),this.replies=t||new Map}}function o(r){return new Promise(n=>setTimeout(n,r))}function c(r){const n=/^https:\/\/([a-zA-Z0-9\-.]+?)\/[A-Za-z0-9/\-._]+$/;if(r.id){const e=r.id.match(n);if(e)return`@${r.preferredUsername}@${e[1]}`}return String(r.url)}function u(r,n,e){return r&&e.tag&&e.tag.forEach(t=>{t.type==="Emoji"&&t.icon&&(n=n.replaceAll(t.name,`<img class="emoji" src="${i(r,window.Buffer,t.icon.url)}"/>`))}),n}function l(r){const n=new Date().getTime(),e=Math.floor((n-r)/1e3);let t=e/31536e3;return t>1?Math.floor(t)+"yr":(t=e/2592e3,t>1?Math.floor(t)+"mo":(t=e/86400,t>1?Math.floor(t)+"d":(t=e/3600,t>1?Math.floor(t)+"h":(t=e/60,t>1?Math.floor(t)+"m":Math.floor(e)+"s"))))}function h(r,n){return Date.parse(r.published)<Date.parse(n.published)?-1:Date.parse(r.published)>Date.parse(n.published)?1:0}function f(r){const n=/https:\/\/(?:[a-zA-Z0-9.-]+)(?:\.[a-zA-Z0-9.-]+)+\/(?:notes|conversation)\/([a-zA-Z0-9-]+)/,e=r.match(n);return e&&e[1]?e[1]:null}function m(r,n){const e=/(https:\/\/(?:[a-zA-Z0-9.-]+)(?:\.[a-zA-Z0-9.-]+)+)\/.*/,t=r.match(e),s=n.match(e);return t!==null&&s!==null&&t[1]==s[1]}function i(r,n,e){return r?"/api/cache?url="+r.get_url_safe_base64(e):e}export{a as D,i as a,h as c,m as d,f as e,c as g,u as i,o as s,l as t};
