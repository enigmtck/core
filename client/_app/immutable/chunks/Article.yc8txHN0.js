import{P as ht,Q as mt,R as Te,H as pt,s as pe,f as p,g as v,h as k,d as _,j as o,i as S,G,w as ue,o as Ne,e as te,I as ut,a as R,c as B,F as ae,v as m,K as de,l as Z,L as _e,m as $,n as le,S as dt,D as x,E as ee,u as Ae,p as vt,T as bt}from"./scheduler.tnyNm5U0.js";import{g as oe,t as F,c as ce,a as M,S as ve,i as be,b as ge,d as ke,m as Ee,e as we}from"./index.R_ElRwcJ.js";import{e as Se}from"./each.-oqiv04n.js";import"./paths.QxYarMjf.js";import{a as ne,i as se,t as De,g as fe,c as Pe,d as gt}from"./common.zKe3wBQm.js";import{e as Ie}from"./stores.bABpd-zC.js";import{_ as Le}from"./preload-helper.0HuHagjb.js";import{p as kt}from"./stores.OapmKNu7.js";function He(r,e){const a=e.token={};function t(l,n,i,s){if(e.token!==a)return;e.resolved=s;let c=e.ctx;i!==void 0&&(c=c.slice(),c[i]=s);const f=l&&(e.current=l)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((d,g)=>{g!==n&&d&&(oe(),F(d,1,1,()=>{e.blocks[g]===d&&(e.blocks[g]=null)}),ce())}):e.block.d(1),f.c(),M(f,1),f.m(e.mount(),e.anchor),u=!0),e.block=f,e.blocks&&(e.blocks[n]=f),u&&pt()}if(ht(r)){const l=mt();if(r.then(n=>{Te(l),t(e.then,1,e.value,n),Te(null)},n=>{if(Te(l),t(e.catch,2,e.error,n),Te(null),!e.hasCatch)throw n}),e.current!==e.pending)return t(e.pending,0),!0}else{if(e.current!==e.then)return t(e.then,1,e.value,r),!0;e.resolved=r}}function Et(r,e,a){const t=e.slice(),{resolved:l}=r;r.current===r.then&&(t[r.value]=l),r.current===r.catch&&(t[r.error]=l),r.block.p(t,a)}function me(r){let e=r.replies.size;return r.replies.size>0&&r.replies.forEach(a=>{e+=me(a)}),e}function Me(r,e,a){const t=r.slice();return t[6]=e[a],t}function ze(r){let e,a=Se(r[0].attachment),t=[];for(let l=0;l<a.length;l+=1)t[l]=Ge(Me(r,a,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=te()},l(l){for(let n=0;n<t.length;n+=1)t[n].l(l);e=te()},m(l,n){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(l,n);S(l,e,n)},p(l,n){if(n&7){a=Se(l[0].attachment);let i;for(i=0;i<a.length;i+=1){const s=Me(l,a,i);t[i]?t[i].p(s,n):(t[i]=Ge(s),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=a.length}},d(l){l&&_(e),ut(t,l)}}}function wt(r){let e,a,t,l,n,i,s,c;return{c(){e=p("div"),a=p("video"),t=p("source"),c=R(),this.h()},l(f){e=v(f,"DIV",{class:!0,tabindex:!0});var u=k(e);a=v(u,"VIDEO",{width:!0,height:!0});var d=k(a);t=v(d,"SOURCE",{src:!0,type:!0}),d.forEach(_),c=B(u),u.forEach(_),this.h()},h(){ae(t.src,l=ne(r[1],window.Buffer,String(r[6].url)))||o(t,"src",l),o(t,"type",n=r[6].mediaType),o(a,"width",i=r[6].width),o(a,"height",s=r[6].height),a.controls=!0,o(e,"class",r[2]()),o(e,"tabindex","0")},m(f,u){S(f,e,u),m(e,a),m(a,t),m(e,c)},p(f,u){u&3&&!ae(t.src,l=ne(f[1],window.Buffer,String(f[6].url)))&&o(t,"src",l),u&1&&n!==(n=f[6].mediaType)&&o(t,"type",n),u&1&&i!==(i=f[6].width)&&o(a,"width",i),u&1&&s!==(s=f[6].height)&&o(a,"height",s)},d(f){f&&_(e)}}}function It(r){let e,a,t,l,n,i,s;return{c(){e=p("div"),a=p("img"),s=R(),this.h()},l(c){e=v(c,"DIV",{class:!0,tabindex:!0});var f=k(e);a=v(f,"IMG",{src:!0,width:!0,height:!0,alt:!0}),s=B(f),f.forEach(_),this.h()},h(){ae(a.src,t=ne(r[1],window.Buffer,String(r[6].url)))||o(a,"src",t),o(a,"width",l=r[6].width),o(a,"height",n=r[6].height),o(a,"alt",i=r[6].name),o(e,"class",r[2]()),o(e,"tabindex","0")},m(c,f){S(c,e,f),m(e,a),m(e,s)},p(c,f){f&3&&!ae(a.src,t=ne(c[1],window.Buffer,String(c[6].url)))&&o(a,"src",t),f&1&&l!==(l=c[6].width)&&o(a,"width",l),f&1&&n!==(n=c[6].height)&&o(a,"height",n),f&1&&i!==(i=c[6].name)&&o(a,"alt",i)},d(c){c&&_(e)}}}function Ge(r){let e,a,t;function l(s,c){if(c&1&&(e=null),c&1&&(a=null),e==null&&(e=!!(s[6].type=="Document"&&/^(?:image)\/.+$/.test(String(s[6].mediaType)))),e)return It;if(a==null&&(a=!!(s[6].type=="Document"&&/^(?:video)\/.+$/.test(String(s[6].mediaType)))),a)return wt}let n=l(r,-1),i=n&&n(r);return{c(){i&&i.c(),t=te()},l(s){i&&i.l(s),t=te()},m(s,c){i&&i.m(s,c),S(s,t,c)},p(s,c){n===(n=l(s,c))&&i?i.p(s,c):(i&&i.d(1),i=n&&n(s),i&&(i.c(),i.m(t.parentNode,t)))},d(s){s&&_(t),i&&i.d(s)}}}function jt(r){let e,a=r[0].attachment&&ze(r);return{c(){e=p("section"),a&&a.c(),this.h()},l(t){e=v(t,"SECTION",{class:!0});var l=k(e);a&&a.l(l),l.forEach(_),this.h()},h(){o(e,"class","svelte-1edm0ny")},m(t,l){S(t,e,l),a&&a.m(e,null)},p(t,[l]){t[0].attachment?a?a.p(t,l):(a=ze(t),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:G,o:G,d(t){t&&_(e),a&&a.d()}}}function Tt(r,e,a){let t,l;ue(r,Ie,c=>a(3,l=c));let{note:n}=e;Ne(async()=>{const{Buffer:c}=await Le(()=>import("./index.aMiLl7Je.js").then(f=>f.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=c});function i(){return s>1?"half":"full"}let s=n.attachment?.length||0;return n.attachment?.length,r.$$set=c=>{"note"in c&&a(0,n=c.note)},r.$$.update=()=>{r.$$.dirty&8&&a(1,t=l)},[n,t,i,l]}class _t extends ve{constructor(e){super(),be(this,e,Tt,jt,pe,{note:0})}}function We(r,e,a){const t=r.slice();return t[12]=e[a],t}function Je(r){let e,a;return{c(){e=p("img"),this.h()},l(t){e=v(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ae(e.src,a=r[0].actor.icon.url)||o(e,"src",a),o(e,"alt","Sender"),o(e,"class","svelte-iote2n")},m(t,l){S(t,e,l)},p(t,l){l&1&&!ae(e.src,a=t[0].actor.icon.url)&&o(e,"src",a)},d(t){t&&_(e)}}}function Ke(r){let e,a,t=se(r[2],r[0].actor.name||r[0].actor.preferredUsername,r[0].actor)+"",l,n,i=fe(r[0].actor)+"",s,c;return{c(){e=p("a"),a=new de(!1),l=Z(` •
				`),n=p("span"),s=Z(i),this.h()},l(f){e=v(f,"A",{href:!0,class:!0});var u=k(e);a=_e(u,!1),l=$(u,` •
				`),n=v(u,"SPAN",{class:!0});var d=k(n);s=$(d,i),d.forEach(_),u.forEach(_),this.h()},h(){a.a=l,o(n,"class","url svelte-iote2n"),o(e,"href",c="/search?actor="+r[0].actor.id),o(e,"class","svelte-iote2n")},m(f,u){S(f,e,u),a.m(t,e),m(e,l),m(e,n),m(n,s)},p(f,u){u&5&&t!==(t=se(f[2],f[0].actor.name||f[0].actor.preferredUsername,f[0].actor)+"")&&a.p(t),u&1&&i!==(i=fe(f[0].actor)+"")&&le(s,i),u&1&&c!==(c="/search?actor="+f[0].actor.id)&&o(e,"href",c)},d(f){f&&_(e)}}}function qe(r){let e,a;return e=new _t({props:{note:r[0].note}}),{c(){ge(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,l){Ee(e,t,l),a=!0},p(t,l){const n={};l&1&&(n.note=t[0].note),e.$set(n)},i(t){a||(M(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){we(e,t)}}}function Fe(r){let e,a,t,l=me(r[0])+"",n,i,s;return{c(){e=p("span"),a=p("i"),t=R(),n=Z(l),this.h()},l(c){e=v(c,"SPAN",{class:!0,"data-conversation":!0,"data-note":!0});var f=k(e);a=v(f,"I",{class:!0}),k(a).forEach(_),t=B(f),n=$(f,l),f.forEach(_),this.h()},h(){o(a,"class","fa-solid fa-comments svelte-iote2n"),o(e,"class","comments svelte-iote2n"),o(e,"data-conversation",i=r[0].note.conversation),o(e,"data-note",s=r[0].note.id)},m(c,f){S(c,e,f),m(e,a),m(e,t),m(e,n)},p(c,f){f&1&&l!==(l=me(c[0])+"")&&le(n,l),f&1&&i!==(i=c[0].note.conversation)&&o(e,"data-conversation",i),f&1&&s!==(s=c[0].note.id)&&o(e,"data-note",s)},d(c){c&&_(e)}}}function Qe(r){let e,a,t;function l(d,g){return d[0].note.ephemeralAnnounced?St:At}let n=l(r),i=n(r);function s(d,g){return d[0].note.ephemeralLiked?Nt:Dt}let c=s(r),f=c(r),u=r[0].actor&&Xe(r);return{c(){e=p("nav"),i.c(),a=R(),f.c(),t=R(),u&&u.c(),this.h()},l(d){e=v(d,"NAV",{class:!0});var g=k(e);i.l(g),a=B(g),f.l(g),t=B(g),u&&u.l(g),g.forEach(_),this.h()},h(){o(e,"class","svelte-iote2n")},m(d,g){S(d,e,g),i.m(e,null),m(e,a),f.m(e,null),m(e,t),u&&u.m(e,null)},p(d,g){n===(n=l(d))&&i?i.p(d,g):(i.d(1),i=n(d),i&&(i.c(),i.m(e,a))),c===(c=s(d))&&f?f.p(d,g):(f.d(1),f=c(d),f&&(f.c(),f.m(e,t))),d[0].actor?u?u.p(d,g):(u=Xe(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(d){d&&_(e),i.d(),f.d(),u&&u.d()}}}function At(r){let e,a,t,l,n;return{c(){e=p("i"),this.h()},l(i){e=v(i,"I",{class:!0,"data-object":!0,"data-actor":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-repeat svelte-iote2n"),o(e,"data-object",a=r[0].note.id),o(e,"data-actor",t=r[0].note.attributedTo)},m(i,s){S(i,e,s),l||(n=x(e,"click",ee(r[3])),l=!0)},p(i,s){s&1&&a!==(a=i[0].note.id)&&o(e,"data-object",a),s&1&&t!==(t=i[0].note.attributedTo)&&o(e,"data-actor",t)},d(i){i&&_(e),l=!1,n()}}}function St(r){let e,a,t,l,n;return{c(){e=p("i"),this.h()},l(i){e=v(i,"I",{class:!0,"data-object":!0,"data-actor":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-repeat selected svelte-iote2n"),o(e,"data-object",a=r[0].note.id),o(e,"data-actor",t=r[0].note.attributedTo)},m(i,s){S(i,e,s),l||(n=x(e,"click",ee(r[3])),l=!0)},p(i,s){s&1&&a!==(a=i[0].note.id)&&o(e,"data-object",a),s&1&&t!==(t=i[0].note.attributedTo)&&o(e,"data-actor",t)},d(i){i&&_(e),l=!1,n()}}}function Dt(r){let e,a,t,l,n;return{c(){e=p("i"),this.h()},l(i){e=v(i,"I",{class:!0,"data-actor":!0,"data-object":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-star svelte-iote2n"),o(e,"data-actor",a=r[0].note.attributedTo),o(e,"data-object",t=r[0].note.id)},m(i,s){S(i,e,s),l||(n=x(e,"click",ee(r[4])),l=!0)},p(i,s){s&1&&a!==(a=i[0].note.attributedTo)&&o(e,"data-actor",a),s&1&&t!==(t=i[0].note.id)&&o(e,"data-object",t)},d(i){i&&_(e),l=!1,n()}}}function Nt(r){let e,a,t,l,n;return{c(){e=p("i"),this.h()},l(i){e=v(i,"I",{class:!0,"data-actor":!0,"data-object":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-star selected svelte-iote2n"),o(e,"data-actor",a=r[0].note.attributedTo),o(e,"data-object",t=r[0].note.id)},m(i,s){S(i,e,s),l||(n=x(e,"click",ee(yt)),l=!0)},p(i,s){s&1&&a!==(a=i[0].note.attributedTo)&&o(e,"data-actor",a),s&1&&t!==(t=i[0].note.id)&&o(e,"data-object",t)},d(i){i&&_(e),l=!1,n()}}}function Xe(r){let e,a,t,l,n,i,s,c,f;return{c(){e=p("i"),this.h()},l(u){e=v(u,"I",{class:!0,"data-reply":!0,"data-display":!0,"data-url":!0,"data-username":!0,"data-recipient":!0,"data-conversation":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-reply svelte-iote2n"),o(e,"data-reply",a=r[0].note.id),o(e,"data-display",t=r[0].actor.name||r[0].actor.preferredUsername),o(e,"data-url",l=r[0].actor.url),o(e,"data-username",n=r[0].actor.preferredUsername),o(e,"data-recipient",i=r[0].actor.id),o(e,"data-conversation",s=r[0].note.conversation)},m(u,d){S(u,e,d),c||(f=x(e,"click",r[7]),c=!0)},p(u,d){d&1&&a!==(a=u[0].note.id)&&o(e,"data-reply",a),d&1&&t!==(t=u[0].actor.name||u[0].actor.preferredUsername)&&o(e,"data-display",t),d&1&&l!==(l=u[0].actor.url)&&o(e,"data-url",l),d&1&&n!==(n=u[0].actor.preferredUsername)&&o(e,"data-username",n),d&1&&i!==(i=u[0].actor.id)&&o(e,"data-recipient",i),d&1&&s!==(s=u[0].note.conversation)&&o(e,"data-conversation",s)},d(u){u&&_(e),c=!1,f()}}}function Ye(r){let e,a,t=Se(Array.from(r[0].replies.values()).sort(Pe)),l=[];for(let i=0;i<t.length;i+=1)l[i]=Ze(We(r,t,i));const n=i=>F(l[i],1,1,()=>{l[i]=null});return{c(){e=p("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=v(i,"DIV",{class:!0});var s=k(e);for(let c=0;c<l.length;c+=1)l[c].l(s);s.forEach(_),this.h()},h(){o(e,"class","replies svelte-iote2n")},m(i,s){S(i,e,s);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);a=!0},p(i,s){if(s&99){t=Se(Array.from(i[0].replies.values()).sort(Pe));let c;for(c=0;c<t.length;c+=1){const f=We(i,t,c);l[c]?(l[c].p(f,s),M(l[c],1)):(l[c]=Ze(f),l[c].c(),M(l[c],1),l[c].m(e,null))}for(oe(),c=t.length;c<l.length;c+=1)n(c);ce()}},i(i){if(!a){for(let s=0;s<t.length;s+=1)M(l[s]);a=!0}},o(i){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)F(l[s]);a=!1},d(i){i&&_(e),ut(l,i)}}}function Ze(r){let e,a;return e=new Ut({props:{note:r[12],username:r[1]}}),e.$on("reply_to",r[6]),e.$on("note_select",r[5]),{c(){ge(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,l){Ee(e,t,l),a=!0},p(t,l){const n={};l&1&&(n.note=t[12]),l&2&&(n.username=t[1]),e.$set(n)},i(t){a||(M(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){we(e,t)}}}function Lt(r){let e,a,t,l,n,i,s,c,f=se(r[2],r[0].note.content||"",r[0].note)+"",u,d,g,h,E=De(new Date(String(r[0].published)).getTime())+"",O,D,N,L,A,I,j=r[0].actor&&r[0].actor.icon&&Je(r),b=r[0].actor&&Ke(r),y=r[0].note.attachment&&r[0].note.attachment.length>0&&qe(r),V=r[0].replies?.size&&Fe(r),P=r[1]&&Qe(r),H=r[0].replies?.size&&Ye(r);return{c(){e=p("article"),a=p("div"),t=p("div"),j&&j.c(),l=R(),n=p("address"),b&&b.c(),i=R(),s=p("section"),c=new de(!1),u=R(),y&&y.c(),d=R(),V&&V.c(),g=R(),h=p("time"),O=Z(E),N=R(),P&&P.c(),L=R(),H&&H.c(),A=te(),this.h()},l(w){e=v(w,"ARTICLE",{class:!0});var U=k(e);a=v(U,"DIV",{class:!0});var he=k(a);t=v(he,"DIV",{});var W=k(t);j&&j.l(W),W.forEach(_),he.forEach(_),l=B(U),n=v(U,"ADDRESS",{class:!0});var J=k(n);b&&b.l(J),J.forEach(_),i=B(U),s=v(U,"SECTION",{class:!0});var K=k(s);c=_e(K,!1),K.forEach(_),u=B(U),y&&y.l(U),d=B(U),V&&V.l(U),g=B(U),h=v(U,"TIME",{datetime:!0,class:!0});var q=k(h);O=$(q,E),q.forEach(_),N=B(U),P&&P.l(U),U.forEach(_),L=B(w),H&&H.l(w),A=te(),this.h()},h(){o(a,"class","avatar svelte-iote2n"),o(n,"class","svelte-iote2n"),c.a=null,o(s,"class","svelte-iote2n"),o(h,"datetime",D=r[0].published),o(h,"class","svelte-iote2n"),o(e,"class","svelte-iote2n")},m(w,U){S(w,e,U),m(e,a),m(a,t),j&&j.m(t,null),m(e,l),m(e,n),b&&b.m(n,null),m(e,i),m(e,s),c.m(f,s),m(e,u),y&&y.m(e,null),m(e,d),V&&V.m(e,null),m(e,g),m(e,h),m(h,O),m(e,N),P&&P.m(e,null),S(w,L,U),H&&H.m(w,U),S(w,A,U),I=!0},p(w,[U]){w[0].actor&&w[0].actor.icon?j?j.p(w,U):(j=Je(w),j.c(),j.m(t,null)):j&&(j.d(1),j=null),w[0].actor?b?b.p(w,U):(b=Ke(w),b.c(),b.m(n,null)):b&&(b.d(1),b=null),(!I||U&5)&&f!==(f=se(w[2],w[0].note.content||"",w[0].note)+"")&&c.p(f),w[0].note.attachment&&w[0].note.attachment.length>0?y?(y.p(w,U),U&1&&M(y,1)):(y=qe(w),y.c(),M(y,1),y.m(e,d)):y&&(oe(),F(y,1,1,()=>{y=null}),ce()),w[0].replies?.size?V?V.p(w,U):(V=Fe(w),V.c(),V.m(e,g)):V&&(V.d(1),V=null),(!I||U&1)&&E!==(E=De(new Date(String(w[0].published)).getTime())+"")&&le(O,E),(!I||U&1&&D!==(D=w[0].published))&&o(h,"datetime",D),w[1]?P?P.p(w,U):(P=Qe(w),P.c(),P.m(e,null)):P&&(P.d(1),P=null),w[0].replies?.size?H?(H.p(w,U),U&1&&M(H,1)):(H=Ye(w),H.c(),M(H,1),H.m(A.parentNode,A)):H&&(oe(),F(H,1,1,()=>{H=null}),ce())},i(w){I||(M(y),M(H),I=!0)},o(w){F(y),F(H),I=!1},d(w){w&&(_(e),_(L),_(A)),j&&j.d(),b&&b.d(),y&&y.d(),V&&V.d(),P&&P.d(),H&&H.d(w)}}}function yt(r){String(r.target.dataset.object),String(r.target.dataset.actor)}function Ct(r,e,a){let t,l;ue(r,Ie,h=>a(8,l=h));const n=dt();let{note:i}=e,{username:s}=e;function c(h){console.debug("HANDLING DISPATCHED ANNOUNCE");const E=String(h.target.dataset.object),O=String(h.target.dataset.actor);t&&E&&O?h.target.classList.add("selected"):(console.error("OBJECT OR ACTOR INVALID"),console.debug(`OBJECT: ${E}, ACTOR: ${O}`))}function f(h){console.debug("HANDLING DISPATCHED LIKE");const E=String(h.target.dataset.object),O=String(h.target.dataset.actor);t&&t.send_like(O,E).then(()=>{})}function u(h){n("note_select",h.detail)}function d(h){n("reply_to",h.detail)}function g(h){n("reply_to",{reply_to_recipient:h.target.dataset.recipient,reply_to_note:h.target.dataset.reply,reply_to_display:h.target.dataset.display,reply_to_conversation:h.target.dataset.conversation,reply_to_url:h.target.dataset.url,reply_to_username:h.target.dataset.username})}return r.$$set=h=>{"note"in h&&a(0,i=h.note),"username"in h&&a(1,s=h.username)},r.$$.update=()=>{r.$$.dirty&256&&a(2,t=l)},[i,s,t,c,f,u,d,g,l]}class Ut extends ve{constructor(e){super(),be(this,e,Ct,Lt,pe,{note:0,username:1})}}function $e(r){let e,a,t,l,n,i=r[0][Y].ogTitle+"",s,c,f,u=r[0][Y].ogImage?.length&&xe(r),d=r[0][Y].ogDescription&&et(r);return{c(){e=p("a"),a=p("div"),u&&u.c(),t=R(),l=p("div"),n=p("span"),s=Z(i),c=R(),d&&d.c(),this.h()},l(g){e=v(g,"A",{href:!0,target:!0,rel:!0,class:!0});var h=k(e);a=v(h,"DIV",{class:!0});var E=k(a);u&&u.l(E),t=B(E),l=v(E,"DIV",{class:!0});var O=k(l);n=v(O,"SPAN",{class:!0});var D=k(n);s=$(D,i),D.forEach(_),c=B(O),d&&d.l(O),O.forEach(_),E.forEach(_),h.forEach(_),this.h()},h(){o(n,"class","svelte-1h7x9j4"),o(l,"class","svelte-1h7x9j4"),o(a,"class","svelte-1h7x9j4"),o(e,"href",f=r[0][Y].ogUrl),o(e,"target","_blank"),o(e,"rel","noreferrer"),o(e,"class","svelte-1h7x9j4")},m(g,h){S(g,e,h),m(e,a),u&&u.m(a,null),m(a,t),m(a,l),m(l,n),m(n,s),m(l,c),d&&d.m(l,null)},p(g,h){g[0][Y].ogImage?.length?u?u.p(g,h):(u=xe(g),u.c(),u.m(a,t)):u&&(u.d(1),u=null),h&1&&i!==(i=g[0][Y].ogTitle+"")&&le(s,i),g[0][Y].ogDescription?d?d.p(g,h):(d=et(g),d.c(),d.m(l,null)):d&&(d.d(1),d=null),h&1&&f!==(f=g[0][Y].ogUrl)&&o(e,"href",f)},d(g){g&&_(e),u&&u.d(),d&&d.d()}}}function xe(r){let e,a,t,l,n;return{c(){e=p("div"),a=p("img"),this.h()},l(i){e=v(i,"DIV",{class:!0});var s=k(e);a=v(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(_),this.h()},h(){ae(a.src,t=ne(r[1],window.Buffer,String(r[0][Y].ogImage)))||o(a,"src",t),o(a,"alt","Link Preview"),o(a,"class","svelte-1h7x9j4"),o(e,"class","image svelte-1h7x9j4")},m(i,s){S(i,e,s),m(e,a),l||(n=x(a,"error",r[2]),l=!0)},p(i,s){s&3&&!ae(a.src,t=ne(i[1],window.Buffer,String(i[0][Y].ogImage)))&&o(a,"src",t)},d(i){i&&_(e),l=!1,n()}}}function et(r){let e,a=r[0][Y].ogDescription+"",t;return{c(){e=p("span"),t=Z(a),this.h()},l(l){e=v(l,"SPAN",{class:!0});var n=k(e);t=$(n,a),n.forEach(_),this.h()},h(){o(e,"class","svelte-1h7x9j4")},m(l,n){S(l,e,n),m(e,t)},p(l,n){n&1&&a!==(a=l[0][Y].ogDescription+"")&&le(t,a)},d(l){l&&_(e)}}}function Rt(r){let e,a=r[0][Y].ogUrl&&r[0][Y].ogTitle&&$e(r);return{c(){a&&a.c(),e=te()},l(t){a&&a.l(t),e=te()},m(t,l){a&&a.m(t,l),S(t,e,l)},p(t,[l]){t[0][Y].ogUrl&&t[0][Y].ogTitle?a?a.p(t,l):(a=$e(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},i:G,o:G,d(t){t&&_(e),a&&a.d(t)}}}let Y=0;function Bt(r,e,a){let t,l;ue(r,Ie,s=>a(3,l=s));let{links:n}=e;Ne(async()=>{const{Buffer:s}=await Le(()=>import("./index.aMiLl7Je.js").then(c=>c.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=s});const i=s=>{console.log(s.target);let c=s.target;c&&(c.style.display="none")};return r.$$set=s=>{"links"in s&&a(0,n=s.links)},r.$$.update=()=>{r.$$.dirty&8&&a(1,t=l)},[n,t,i,l]}class Vt extends ve{constructor(e){super(),be(this,e,Bt,Rt,pe,{links:0})}}function tt(r){let e,a,t,l,n="Edit",i,s;return{c(){e=p("li"),a=Z("Delete"),t=R(),l=p("li"),l.textContent=n,this.h()},l(c){e=v(c,"LI",{"data-object":!0,class:!0});var f=k(e);a=$(f,"Delete"),f.forEach(_),t=B(c),l=v(c,"LI",{class:!0,"data-svelte-h":!0}),Ae(l)!=="svelte-nqb85c"&&(l.textContent=n),this.h()},h(){o(e,"data-object",r[0]),o(e,"class","svelte-1v3blo6"),o(l,"class","svelte-1v3blo6")},m(c,f){S(c,e,f),m(e,a),S(c,t,f),S(c,l,f),i||(s=x(e,"click",ee(r[4])),i=!0)},p(c,f){f&1&&o(e,"data-object",c[0])},d(c){c&&(_(e),_(t),_(l)),i=!1,s()}}}function Ot(r){let e,a,t,l,n,i,s="Mute Author",c,f,u="Block Author",d,g,h="Block Instance",E,O,D=r[1]&&tt(r);return{c(){e=p("i"),a=R(),t=p("dialog"),l=p("ul"),D&&D.c(),n=R(),i=p("li"),i.textContent=s,c=R(),f=p("li"),f.textContent=u,d=R(),g=p("li"),g.textContent=h,this.h()},l(N){e=v(N,"I",{class:!0,"data-object":!0}),k(e).forEach(_),a=B(N),t=v(N,"DIALOG",{class:!0});var L=k(t);l=v(L,"UL",{class:!0});var A=k(l);D&&D.l(A),n=B(A),i=v(A,"LI",{class:!0,"data-svelte-h":!0}),Ae(i)!=="svelte-cedbu2"&&(i.textContent=s),c=B(A),f=v(A,"LI",{class:!0,"data-svelte-h":!0}),Ae(f)!=="svelte-1gvp02o"&&(f.textContent=u),d=B(A),g=v(A,"LI",{class:!0,"data-svelte-h":!0}),Ae(g)!=="svelte-5kz5l4"&&(g.textContent=h),A.forEach(_),L.forEach(_),this.h()},h(){o(e,"class","fa-solid fa-ellipsis svelte-1v3blo6"),o(e,"data-object",r[0]),o(i,"class","svelte-1v3blo6"),o(f,"class","svelte-1v3blo6"),o(g,"class","svelte-1v3blo6"),o(l,"class","svelte-1v3blo6"),o(t,"class","svelte-1v3blo6")},m(N,L){S(N,e,L),S(N,a,L),S(N,t,L),m(t,l),D&&D.m(l,null),m(l,n),m(l,i),m(l,c),m(l,f),m(l,d),m(l,g),r[8](t),E||(O=x(e,"click",r[3]),E=!0)},p(N,[L]){L&1&&o(e,"data-object",N[0]),N[1]?D?D.p(N,L):(D=tt(N),D.c(),D.m(l,n)):D&&(D.d(1),D=null)},i:G,o:G,d(N){N&&(_(e),_(a),_(t)),D&&D.d(),r[8](null),E=!1,O()}}}function Pt(r,e,a){let t,l;ue(r,Ie,h=>a(7,l=h));let{object:n}=e,{owner:i}=e,{refresh:s}=e,{remove:c}=e;Ne(async()=>{});function f(h){console.log("HANDLE MENU ACTIVATED"),d.open?d.close():d.show()}function u(h){console.log("HANDLE DELETE ACTIVATED");const E=h.target.dataset.object;t?.send_delete(E).then(O=>{O&&(console.info("DELETE SENT"),c(E))})}let d;function g(h){vt[h?"unshift":"push"](()=>{d=h,a(2,d)})}return r.$$set=h=>{"object"in h&&a(0,n=h.object),"owner"in h&&a(1,i=h.owner),"refresh"in h&&a(5,s=h.refresh),"remove"in h&&a(6,c=h.remove)},r.$$.update=()=>{r.$$.dirty&128&&(t=l)},[n,i,d,f,u,s,c,l,g]}class Ht extends ve{constructor(e){super(),be(this,e,Pt,Ot,pe,{object:0,owner:1,refresh:5,remove:6})}}function at(r){let e,a,t,l,n,i,s,c;return{c(){e=p("span"),a=p("i"),t=Z(` In
			`),l=p("a"),n=Z("reply"),s=Z(`
			to `),c=new de(!1),this.h()},l(f){e=v(f,"SPAN",{class:!0});var u=k(e);a=v(u,"I",{class:!0}),k(a).forEach(_),t=$(u,` In
			`),l=v(u,"A",{href:!0,target:!0,rel:!0,class:!0});var d=k(l);n=$(d,"reply"),d.forEach(_),s=$(u,`
			to `),c=_e(u,!1),u.forEach(_),this.h()},h(){o(a,"class","fa-solid fa-reply svelte-8a7ih0"),o(l,"href",i=r[0].note.inReplyTo),o(l,"target","_blank"),o(l,"rel","noreferrer"),o(l,"class","svelte-8a7ih0"),c.a=null,o(e,"class","reply svelte-8a7ih0")},m(f,u){S(f,e,u),m(e,a),m(e,t),m(e,l),m(l,n),m(e,s),c.m(r[2],e)},p(f,u){u&1&&i!==(i=f[0].note.inReplyTo)&&o(l,"href",i),u&4&&c.p(f[2])},d(f){f&&_(e)}}}function lt(r){let e,a,t,l,n,i=r[3].name+"",s,c=r[3].others+"",f;return{c(){e=p("span"),a=p("i"),t=Z(` Reposted by
			`),l=p("a"),n=new de(!1),f=Z(c),this.h()},l(u){e=v(u,"SPAN",{class:!0});var d=k(e);a=v(d,"I",{class:!0}),k(a).forEach(_),t=$(d,` Reposted by
			`),l=v(d,"A",{href:!0,class:!0});var g=k(l);n=_e(g,!1),g.forEach(_),f=$(d,c),d.forEach(_),this.h()},h(){o(a,"class","fa-solid fa-retweet svelte-8a7ih0"),n.a=null,o(l,"href",s=r[3].url),o(l,"class","svelte-8a7ih0"),o(e,"class","repost svelte-8a7ih0")},m(u,d){S(u,e,d),m(e,a),m(e,t),m(e,l),n.m(i,l),m(e,f)},p(u,d){d&8&&i!==(i=u[3].name+"")&&n.p(i),d&8&&s!==(s=u[3].url)&&o(l,"href",s),d&8&&c!==(c=u[3].others+"")&&le(f,c)},d(u){u&&_(e)}}}function rt(r){let e,a;return{c(){e=p("img"),this.h()},l(t){e=v(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ae(e.src,a=ne(r[9],window.Buffer,r[0].actor.icon.url))||o(e,"src",a),o(e,"alt","Sender"),o(e,"class","svelte-8a7ih0")},m(t,l){S(t,e,l)},p(t,l){l&513&&!ae(e.src,a=ne(t[9],window.Buffer,t[0].actor.icon.url))&&o(e,"src",a)},d(t){t&&_(e)}}}function it(r){let e,a,t=se(r[9],r[0].actor.name||r[0].actor.preferredUsername,r[0].actor)+"",l,n,i=fe(r[0].actor)+"",s,c;return{c(){e=p("span"),a=new de(!1),l=R(),n=p("a"),s=Z(i),this.h()},l(f){e=v(f,"SPAN",{class:!0});var u=k(e);a=_e(u,!1),u.forEach(_),l=B(f),n=v(f,"A",{href:!0,class:!0});var d=k(n);s=$(d,i),d.forEach(_),this.h()},h(){a.a=null,o(e,"class","svelte-8a7ih0"),o(n,"href",c="/"+fe(r[0].actor)),o(n,"class","svelte-8a7ih0")},m(f,u){S(f,e,u),a.m(t,e),S(f,l,u),S(f,n,u),m(n,s)},p(f,u){u&513&&t!==(t=se(f[9],f[0].actor.name||f[0].actor.preferredUsername,f[0].actor)+"")&&a.p(t),u&1&&i!==(i=fe(f[0].actor)+"")&&le(s,i),u&1&&c!==(c="/"+fe(f[0].actor))&&o(n,"href",c)},d(f){f&&(_(e),_(l),_(n))}}}function Mt(r){let e,a;return e=new _t({props:{note:r[0].note}}),{c(){ge(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,l){Ee(e,t,l),a=!0},p(t,l){const n={};l&1&&(n.note=t[0].note),e.$set(n)},i(t){a||(M(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){we(e,t)}}}function zt(r){let e,a;return e=new Vt({props:{links:r[0].note.ephemeralMetadata}}),{c(){ge(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,l){Ee(e,t,l),a=!0},p(t,l){const n={};l&1&&(n.links=t[0].note.ephemeralMetadata),e.$set(n)},i(t){a||(M(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){we(e,t)}}}function nt(r){let e,a,t,l=r[0].note.ephemeralLikes.length+"",n;return{c(){e=p("span"),a=p("i"),t=R(),n=Z(l),this.h()},l(i){e=v(i,"SPAN",{class:!0});var s=k(e);a=v(s,"I",{class:!0}),k(a).forEach(_),t=B(s),n=$(s,l),s.forEach(_),this.h()},h(){o(a,"class","fa-solid fa-star svelte-8a7ih0"),o(e,"class","likes svelte-8a7ih0")},m(i,s){S(i,e,s),m(e,a),m(e,t),m(e,n)},p(i,s){s&1&&l!==(l=i[0].note.ephemeralLikes.length+"")&&le(n,l)},d(i){i&&_(e)}}}function st(r){let e,a,t,l=me(r[0])+"",n,i,s,c,f;return{c(){e=p("span"),a=p("i"),t=R(),n=Z(l),this.h()},l(u){e=v(u,"SPAN",{class:!0,"data-conversation":!0,"data-note":!0});var d=k(e);a=v(d,"I",{class:!0}),k(a).forEach(_),t=B(d),n=$(d,l),d.forEach(_),this.h()},h(){o(a,"class","fa-solid fa-comments svelte-8a7ih0"),o(e,"class","comments svelte-8a7ih0"),o(e,"data-conversation",i=r[0].note.conversation),o(e,"data-note",s=r[0].note.id)},m(u,d){S(u,e,d),m(e,a),m(e,t),m(e,n),c||(f=x(e,"click",ee(r[14])),c=!0)},p(u,d){d&1&&l!==(l=me(u[0])+"")&&le(n,l),d&1&&i!==(i=u[0].note.conversation)&&o(e,"data-conversation",i),d&1&&s!==(s=u[0].note.id)&&o(e,"data-note",s)},d(u){u&&_(e),c=!1,f()}}}function ot(r){let e,a,t,l,n,i,s,c,f,u,d;function g(I,j){return I[0].note.ephemeralAnnounced?Wt:Gt}let h=g(r),E=h(r);function O(I,j){return I[0].note.ephemeralLiked?Kt:Jt}let D=O(r),N=D(r),L=r[0].actor&&ct(r),A=r[0].note.id&&ft(r);return{c(){e=p("nav"),a=p("i"),n=R(),E.c(),i=R(),N.c(),s=R(),L&&L.c(),c=R(),A&&A.c(),this.h()},l(I){e=v(I,"NAV",{class:!0});var j=k(e);a=v(j,"I",{class:!0,"data-conversation":!0,"data-note":!0}),k(a).forEach(_),n=B(j),E.l(j),i=B(j),N.l(j),s=B(j),L&&L.l(j),c=B(j),A&&A.l(j),j.forEach(_),this.h()},h(){o(a,"class","fa-solid fa-expand svelte-8a7ih0"),o(a,"data-conversation",t=r[0].note.conversation),o(a,"data-note",l=r[0].note.id),o(e,"class","svelte-8a7ih0")},m(I,j){S(I,e,j),m(e,a),m(e,n),E.m(e,null),m(e,i),N.m(e,null),m(e,s),L&&L.m(e,null),m(e,c),A&&A.m(e,null),f=!0,u||(d=x(a,"click",ee(r[14])),u=!0)},p(I,j){(!f||j&1&&t!==(t=I[0].note.conversation))&&o(a,"data-conversation",t),(!f||j&1&&l!==(l=I[0].note.id))&&o(a,"data-note",l),h===(h=g(I))&&E?E.p(I,j):(E.d(1),E=h(I),E&&(E.c(),E.m(e,i))),D===(D=O(I))&&N?N.p(I,j):(N.d(1),N=D(I),N&&(N.c(),N.m(e,s))),I[0].actor?L?L.p(I,j):(L=ct(I),L.c(),L.m(e,c)):L&&(L.d(1),L=null),I[0].note.id?A?(A.p(I,j),j&1&&M(A,1)):(A=ft(I),A.c(),M(A,1),A.m(e,null)):A&&(oe(),F(A,1,1,()=>{A=null}),ce())},i(I){f||(M(A),f=!0)},o(I){F(A),f=!1},d(I){I&&_(e),E.d(),N.d(),L&&L.d(),A&&A.d(),u=!1,d()}}}function Gt(r){let e,a,t,l;return{c(){e=p("i"),this.h()},l(n){e=v(n,"I",{class:!0,"data-object":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-repeat svelte-8a7ih0"),o(e,"data-object",a=r[0].note.id)},m(n,i){S(n,e,i),t||(l=x(e,"click",ee(r[13])),t=!0)},p(n,i){i&1&&a!==(a=n[0].note.id)&&o(e,"data-object",a)},d(n){n&&_(e),t=!1,l()}}}function Wt(r){let e,a,t,l,n;return{c(){e=p("i"),this.h()},l(i){e=v(i,"I",{class:!0,"data-object":!0,"data-activity":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-repeat selected svelte-8a7ih0"),o(e,"data-object",a=r[0].note.id),o(e,"data-activity",t=r[0].note.ephemeralAnnounced)},m(i,s){S(i,e,s),l||(n=x(e,"click",ee(r[12])),l=!0)},p(i,s){s&1&&a!==(a=i[0].note.id)&&o(e,"data-object",a),s&1&&t!==(t=i[0].note.ephemeralAnnounced)&&o(e,"data-activity",t)},d(i){i&&_(e),l=!1,n()}}}function Jt(r){let e,a,t,l,n;return{c(){e=p("i"),this.h()},l(i){e=v(i,"I",{class:!0,"data-actor":!0,"data-object":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-star svelte-8a7ih0"),o(e,"data-actor",a=r[0].note.attributedTo),o(e,"data-object",t=r[0].note.id)},m(i,s){S(i,e,s),l||(n=x(e,"click",ee(r[11])),l=!0)},p(i,s){s&1&&a!==(a=i[0].note.attributedTo)&&o(e,"data-actor",a),s&1&&t!==(t=i[0].note.id)&&o(e,"data-object",t)},d(i){i&&_(e),l=!1,n()}}}function Kt(r){let e,a,t,l,n,i;return{c(){e=p("i"),this.h()},l(s){e=v(s,"I",{class:!0,"data-actor":!0,"data-object":!0,"data-activity":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-star selected svelte-8a7ih0"),o(e,"data-actor",a=r[0].note.attributedTo),o(e,"data-object",t=r[0].note.id),o(e,"data-activity",l=r[0].note.ephemeralLiked)},m(s,c){S(s,e,c),n||(i=x(e,"click",ee(r[10])),n=!0)},p(s,c){c&1&&a!==(a=s[0].note.attributedTo)&&o(e,"data-actor",a),c&1&&t!==(t=s[0].note.id)&&o(e,"data-object",t),c&1&&l!==(l=s[0].note.ephemeralLiked)&&o(e,"data-activity",l)},d(s){s&&_(e),n=!1,i()}}}function ct(r){let e,a,t,l,n,i,s,c,f;return{c(){e=p("i"),this.h()},l(u){e=v(u,"I",{class:!0,"data-reply":!0,"data-display":!0,"data-url":!0,"data-username":!0,"data-recipient":!0,"data-conversation":!0}),k(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-reply svelte-8a7ih0"),o(e,"data-reply",a=r[0].note.id),o(e,"data-display",t=r[0].actor.name||r[0].actor.preferredUsername),o(e,"data-url",l=r[0].actor.url),o(e,"data-username",n=r[0].actor.preferredUsername),o(e,"data-recipient",i=r[0].actor.id),o(e,"data-conversation",s=r[0].note.conversation)},m(u,d){S(u,e,d),c||(f=x(e,"click",r[15]),c=!0)},p(u,d){d&1&&a!==(a=u[0].note.id)&&o(e,"data-reply",a),d&1&&t!==(t=u[0].actor.name||u[0].actor.preferredUsername)&&o(e,"data-display",t),d&1&&l!==(l=u[0].actor.url)&&o(e,"data-url",l),d&1&&n!==(n=u[0].actor.preferredUsername)&&o(e,"data-username",n),d&1&&i!==(i=u[0].actor.id)&&o(e,"data-recipient",i),d&1&&s!==(s=u[0].note.conversation)&&o(e,"data-conversation",s)},d(u){u&&_(e),c=!1,f()}}}function ft(r){let e,a,t,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Qt,then:Ft,catch:qt,value:19,blocks:[,,,]};return He(a=r[9]?.get_ap_id(),l),{c(){e=te(),l.block.c()},l(n){e=te(),l.block.l(n)},m(n,i){S(n,e,i),l.block.m(n,l.anchor=i),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(n,i){r=n,l.ctx=r,i&512&&a!==(a=r[9]?.get_ap_id())&&He(a,l)||Et(l,r,i)},i(n){t||(M(l.block),t=!0)},o(n){for(let i=0;i<3;i+=1){const s=l.blocks[i];F(s)}t=!1},d(n){n&&_(e),l.block.d(n),l.token=null,l=null}}}function qt(r){return{c:G,l:G,m:G,p:G,i:G,o:G,d:G}}function Ft(r){let e,a;return e=new Ht({props:{remove:r[6],refresh:r[5],object:r[0].note.id,owner:r[19]==r[0].note.attributedTo}}),{c(){ge(e.$$.fragment)},l(t){ke(e.$$.fragment,t)},m(t,l){Ee(e,t,l),a=!0},p(t,l){const n={};l&64&&(n.remove=t[6]),l&32&&(n.refresh=t[5]),l&1&&(n.object=t[0].note.id),l&513&&(n.owner=t[19]==t[0].note.attributedTo),e.$set(n)},i(t){a||(M(e.$$.fragment,t),a=!0)},o(t){F(e.$$.fragment,t),a=!1},d(t){we(e,t)}}}function Qt(r){return{c:G,l:G,m:G,p:G,i:G,o:G,d:G}}function Xt(r){let e,a,t,l,n,i,s,c,f,u,d=se(r[9],r[0].note.content||"",r[0].note)+"",g,h,E,O,D,N,L,A,I,j=De(new Date(String(r[0].published)).getTime())+"",b,y,V,P,H,w,U,he,W=r[2]&&at(r),J=r[3]&&lt(r),K=r[0].actor&&r[0].actor.icon&&rt(r),q=r[0].actor&&it(r);const ye=[zt,Mt],re=[];function Ce(T,C){return T[0].note.ephemeralMetadata&&T[0].note.ephemeralMetadata.length?0:T[0].note.attachment&&T[0].note.attachment.length>0?1:-1}~(h=Ce(r))&&(E=re[h]=ye[h](r));let Q=r[0].note.ephemeralLikes?.length&&nt(r),X=r[0].replies?.size&&st(r),z=r[1]&&ot(r);return{c(){e=p("article"),W&&W.c(),a=R(),J&&J.c(),t=R(),l=p("header"),n=p("div"),K&&K.c(),i=R(),s=p("address"),q&&q.c(),c=R(),f=p("section"),u=new de(!1),g=R(),E&&E.c(),O=R(),D=p("div"),Q&&Q.c(),N=R(),X&&X.c(),L=R(),A=p("time"),I=p("a"),b=Z(j),P=R(),z&&z.c(),this.h()},l(T){e=v(T,"ARTICLE",{"data-conversation":!0,class:!0});var C=k(e);W&&W.l(C),a=B(C),J&&J.l(C),t=B(C),l=v(C,"HEADER",{class:!0});var ie=k(l);n=v(ie,"DIV",{class:!0});var Ue=k(n);K&&K.l(Ue),Ue.forEach(_),i=B(ie),s=v(ie,"ADDRESS",{class:!0});var Re=k(s);q&&q.l(Re),Re.forEach(_),ie.forEach(_),c=B(C),f=v(C,"SECTION",{class:!0});var Be=k(f);u=_e(Be,!1),Be.forEach(_),g=B(C),E&&E.l(C),O=B(C),D=v(C,"DIV",{class:!0});var je=k(D);Q&&Q.l(je),N=B(je),X&&X.l(je),je.forEach(_),L=B(C),A=v(C,"TIME",{datetime:!0,class:!0});var Ve=k(A);I=v(Ve,"A",{href:!0,target:!0,rel:!0,class:!0});var Oe=k(I);b=$(Oe,j),Oe.forEach(_),Ve.forEach(_),P=B(C),z&&z.l(C),C.forEach(_),this.h()},h(){o(n,"class","svelte-8a7ih0"),o(s,"class","svelte-8a7ih0"),o(l,"class","svelte-8a7ih0"),u.a=null,o(f,"class","svelte-8a7ih0"),o(D,"class","activity svelte-8a7ih0"),o(I,"href",y=r[0].note.url),o(I,"target",r[7]),o(I,"rel",r[8]),o(I,"class","svelte-8a7ih0"),o(A,"datetime",V=r[0].published),o(A,"class","svelte-8a7ih0"),o(e,"data-conversation",H=r[0].note.conversation),o(e,"class","svelte-8a7ih0")},m(T,C){S(T,e,C),W&&W.m(e,null),m(e,a),J&&J.m(e,null),m(e,t),m(e,l),m(l,n),K&&K.m(n,null),m(l,i),m(l,s),q&&q.m(s,null),m(e,c),m(e,f),u.m(d,f),m(e,g),~h&&re[h].m(e,null),m(e,O),m(e,D),Q&&Q.m(D,null),m(D,N),X&&X.m(D,null),m(e,L),m(e,A),m(A,I),m(I,b),m(e,P),z&&z.m(e,null),w=!0,U||(he=bt(r[4].call(null,e)),U=!0)},p(T,[C]){T[2]?W?W.p(T,C):(W=at(T),W.c(),W.m(e,a)):W&&(W.d(1),W=null),T[3]?J?J.p(T,C):(J=lt(T),J.c(),J.m(e,t)):J&&(J.d(1),J=null),T[0].actor&&T[0].actor.icon?K?K.p(T,C):(K=rt(T),K.c(),K.m(n,null)):K&&(K.d(1),K=null),T[0].actor?q?q.p(T,C):(q=it(T),q.c(),q.m(s,null)):q&&(q.d(1),q=null),(!w||C&513)&&d!==(d=se(T[9],T[0].note.content||"",T[0].note)+"")&&u.p(d);let ie=h;h=Ce(T),h===ie?~h&&re[h].p(T,C):(E&&(oe(),F(re[ie],1,1,()=>{re[ie]=null}),ce()),~h?(E=re[h],E?E.p(T,C):(E=re[h]=ye[h](T),E.c()),M(E,1),E.m(e,O)):E=null),T[0].note.ephemeralLikes?.length?Q?Q.p(T,C):(Q=nt(T),Q.c(),Q.m(D,N)):Q&&(Q.d(1),Q=null),T[0].replies?.size?X?X.p(T,C):(X=st(T),X.c(),X.m(D,null)):X&&(X.d(1),X=null),(!w||C&1)&&j!==(j=De(new Date(String(T[0].published)).getTime())+"")&&le(b,j),(!w||C&1&&y!==(y=T[0].note.url))&&o(I,"href",y),(!w||C&128)&&o(I,"target",T[7]),(!w||C&256)&&o(I,"rel",T[8]),(!w||C&1&&V!==(V=T[0].published))&&o(A,"datetime",V),T[1]?z?(z.p(T,C),C&2&&M(z,1)):(z=ot(T),z.c(),M(z,1),z.m(e,null)):z&&(oe(),F(z,1,1,()=>{z=null}),ce()),(!w||C&1&&H!==(H=T[0].note.conversation))&&o(e,"data-conversation",H)},i(T){w||(M(E),M(z),w=!0)},o(T){F(E),F(z),w=!1},d(T){T&&_(e),W&&W.d(),J&&J.d(),K&&K.d(),q&&q.d(),~h&&re[h].d(),Q&&Q.d(),X&&X.d(),z&&z.d(),U=!1,he()}}}function Yt(r,e,a){let t,l,n;ue(r,kt,b=>a(17,l=b)),ue(r,Ie,b=>a(16,n=b));const i=dt();Ne(async()=>{const{Buffer:b}=await Le(()=>import("./index.aMiLl7Je.js").then(y=>y.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=b});let{note:s}=e,{username:c}=e,{replyToHeader:f}=e,{announceHeader:u}=e,{renderAction:d}=e,{refresh:g}=e,{remove:h}=e;function E(b){const y=String(b.target.dataset.object),V=String(b.target.dataset.actor),P=String(b.target.dataset.activity);console.debug(`UNDOING ${P}`),t&&t.send_unlike(V,y,P).then(H=>{console.debug("UNLIKE SENT"),a(0,s.note.ephemeralLiked=null,s),a(0,s)})}function O(b){const y=String(b.target.dataset.object),V=String(b.target.dataset.actor);t&&t.send_like(V,y).then(P=>{console.debug(`LIKE SENT ${P}`),a(0,s.note.ephemeralLiked=P,s),a(0,s)})}function D(b){const y=String(b.target.dataset.object),V=String(b.target.dataset.activity);t&&y?t.send_unannounce(y,V).then(P=>{console.debug("UNANNOUNCE SENT"),a(0,s.note.ephemeralAnnounced=null,s),a(0,s)}):console.error("OBJECT INVALID")}function N(b){const y=String(b.target.dataset.object);t&&y?t.send_announce(y).then(V=>{console.debug(`ANNOUNCE SENT ${V}`),a(0,s.note.ephemeralAnnounced=V,s),a(0,s)}):console.error("OBJECT INVALID")}function L(b){i("note_select",{note:b.target.dataset.note,conversation:b.target.dataset.conversation})}function A(b){i("reply_to",{reply_to_recipient:b.target.dataset.recipient,reply_to_note:b.target.dataset.reply,reply_to_display:b.target.dataset.display,reply_to_conversation:b.target.dataset.conversation,reply_to_url:b.target.dataset.url,reply_to_username:b.target.dataset.username})}let I=null,j=null;return s&&s.note&&s.note.url&&!gt(l.url.toString(),s.note.url)&&(I="_blank",j="noreferrer"),r.$$set=b=>{"note"in b&&a(0,s=b.note),"username"in b&&a(1,c=b.username),"replyToHeader"in b&&a(2,f=b.replyToHeader),"announceHeader"in b&&a(3,u=b.announceHeader),"renderAction"in b&&a(4,d=b.renderAction),"refresh"in b&&a(5,g=b.refresh),"remove"in b&&a(6,h=b.remove)},r.$$.update=()=>{r.$$.dirty&65536&&a(9,t=n)},[s,c,f,u,d,g,h,I,j,t,E,O,D,N,L,A,n]}class ia extends ve{constructor(e){super(),be(this,e,Yt,Xt,pe,{note:0,username:1,replyToHeader:2,announceHeader:3,renderAction:4,refresh:5,remove:6})}}export{ia as A,Ut as R,He as h,Et as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index.aMiLl7Je.js","./_commonjsHelpers.5-cIlDoe.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}