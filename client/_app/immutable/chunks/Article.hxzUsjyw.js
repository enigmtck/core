import{P as mt,Q as pt,R as Se,H as vt,s as pe,f as g,g as k,h as T,d as _,j as s,i as N,G as W,w as ue,o as De,e as ae,I as _t,a as C,c as R,F as le,v,K as de,l as X,L as _e,m as Y,n as ee,S as ye,D as x,E as te,u as Ae,p as bt,T as gt}from"./scheduler.tnyNm5U0.js";import{g as oe,t as Q,c as ce,a as M,S as ve,i as be,b as ge,d as ke,m as Ee,e as we}from"./index.R_ElRwcJ.js";import{e as je}from"./each.-oqiv04n.js";import"./paths.4Fk-lbdf.js";import{a as se,i as re,t as Ne,g as fe,c as Pe,d as kt}from"./common.wRqRBlgV.js";import{e as Te}from"./stores.bABpd-zC.js";import{_ as Le}from"./preload-helper.0HuHagjb.js";import{p as Et}from"./stores.pW2nSyfW.js";function Me(r,e){const t=e.token={};function a(l,n,i,o){if(e.token!==t)return;e.resolved=o;let c=e.ctx;i!==void 0&&(c=c.slice(),c[i]=o);const f=l&&(e.current=l)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((d,b)=>{b!==n&&d&&(oe(),Q(d,1,1,()=>{e.blocks[b]===d&&(e.blocks[b]=null)}),ce())}):e.block.d(1),f.c(),M(f,1),f.m(e.mount(),e.anchor),u=!0),e.block=f,e.blocks&&(e.blocks[n]=f),u&&vt()}if(mt(r)){const l=pt();if(r.then(n=>{Se(l),a(e.then,1,e.value,n),Se(null)},n=>{if(Se(l),a(e.catch,2,e.error,n),Se(null),!e.hasCatch)throw n}),e.current!==e.pending)return a(e.pending,0),!0}else{if(e.current!==e.then)return a(e.then,1,e.value,r),!0;e.resolved=r}}function wt(r,e,t){const a=e.slice(),{resolved:l}=r;r.current===r.then&&(a[r.value]=l),r.current===r.catch&&(a[r.error]=l),r.block.p(a,t)}function me(r){let e=r.replies.size;return r.replies.size>0&&r.replies.forEach(t=>{e+=me(t)}),e}function ze(r,e,t){const a=r.slice();return a[6]=e[t],a}function Ge(r){let e,t=je(r[0].attachment),a=[];for(let l=0;l<t.length;l+=1)a[l]=We(ze(r,t,l));return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=ae()},l(l){for(let n=0;n<a.length;n+=1)a[n].l(l);e=ae()},m(l,n){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(l,n);N(l,e,n)},p(l,n){if(n&7){t=je(l[0].attachment);let i;for(i=0;i<t.length;i+=1){const o=ze(l,t,i);a[i]?a[i].p(o,n):(a[i]=We(o),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=t.length}},d(l){l&&_(e),_t(a,l)}}}function Tt(r){let e,t,a,l,n,i,o,c;return{c(){e=g("div"),t=g("video"),a=g("source"),c=C(),this.h()},l(f){e=k(f,"DIV",{class:!0,tabindex:!0});var u=T(e);t=k(u,"VIDEO",{width:!0,height:!0});var d=T(t);a=k(d,"SOURCE",{src:!0,type:!0}),d.forEach(_),c=R(u),u.forEach(_),this.h()},h(){le(a.src,l=se(r[1],window.Buffer,String(r[6].url)))||s(a,"src",l),s(a,"type",n=r[6].mediaType),s(t,"width",i=r[6].width),s(t,"height",o=r[6].height),t.controls=!0,s(e,"class",r[2].getPlacement()),s(e,"tabindex","0")},m(f,u){N(f,e,u),v(e,t),v(t,a),v(e,c)},p(f,u){u&3&&!le(a.src,l=se(f[1],window.Buffer,String(f[6].url)))&&s(a,"src",l),u&1&&n!==(n=f[6].mediaType)&&s(a,"type",n),u&1&&i!==(i=f[6].width)&&s(t,"width",i),u&1&&o!==(o=f[6].height)&&s(t,"height",o)},d(f){f&&_(e)}}}function It(r){let e,t,a,l,n,i,o;return{c(){e=g("div"),t=g("img"),o=C(),this.h()},l(c){e=k(c,"DIV",{class:!0,tabindex:!0});var f=T(e);t=k(f,"IMG",{src:!0,width:!0,height:!0,alt:!0}),o=R(f),f.forEach(_),this.h()},h(){le(t.src,a=se(r[1],window.Buffer,String(r[6].url)))||s(t,"src",a),s(t,"width",l=r[6].width),s(t,"height",n=r[6].height),s(t,"alt",i=r[6].name),s(e,"class",r[2].getPlacement()),s(e,"tabindex","0")},m(c,f){N(c,e,f),v(e,t),v(e,o)},p(c,f){f&3&&!le(t.src,a=se(c[1],window.Buffer,String(c[6].url)))&&s(t,"src",a),f&1&&l!==(l=c[6].width)&&s(t,"width",l),f&1&&n!==(n=c[6].height)&&s(t,"height",n),f&1&&i!==(i=c[6].name)&&s(t,"alt",i)},d(c){c&&_(e)}}}function We(r){let e,t,a;function l(o,c){if(c&1&&(e=null),c&1&&(t=null),e==null&&(e=!!(o[6].type=="Document"&&/^(?:image)\/.+$/.test(String(o[6].mediaType)))),e)return It;if(t==null&&(t=!!(o[6].type=="Document"&&/^(?:video)\/.+$/.test(String(o[6].mediaType)))),t)return Tt}let n=l(r,-1),i=n&&n(r);return{c(){i&&i.c(),a=ae()},l(o){i&&i.l(o),a=ae()},m(o,c){i&&i.m(o,c),N(o,a,c)},p(o,c){n===(n=l(o,c))&&i?i.p(o,c):(i&&i.d(1),i=n&&n(o),i&&(i.c(),i.m(a.parentNode,a)))},d(o){o&&_(a),i&&i.d(o)}}}function St(r){let e,t=r[0].attachment&&Ge(r);return{c(){e=g("section"),t&&t.c(),this.h()},l(a){e=k(a,"SECTION",{class:!0});var l=T(e);t&&t.l(l),l.forEach(_),this.h()},h(){s(e,"class","svelte-11mzage")},m(a,l){N(a,e,l),t&&t.m(e,null)},p(a,[l]){a[0].attachment?t?t.p(a,l):(t=Ge(a),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:W,o:W,d(a){a&&_(e),t&&t.d()}}}function At(r,e,t){let a,l;ue(r,Te,c=>t(3,l=c));let{note:n}=e;De(async()=>{const{Buffer:c}=await Le(()=>import("./index.aMiLl7Je.js").then(f=>f.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=c});class i{constructor(f){i.total=f}static{this.total=0}static{this.iteration=0}getPlacement(){return i.iteration++,i.total%2===0||i.total>=3&&i.iteration!==1?"half":"full"}}let o=new i(n.attachment?.length||0);return n.attachment?.length,r.$$set=c=>{"note"in c&&t(0,n=c.note)},r.$$.update=()=>{r.$$.dirty&8&&t(1,a=l)},[n,a,o,l]}class ht extends ve{constructor(e){super(),be(this,e,At,St,pe,{note:0})}}function Je(r,e,t){const a=r.slice();return a[12]=e[t],a}function Ke(r){let e,t;return{c(){e=g("img"),this.h()},l(a){e=k(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){le(e.src,t=r[0].actor.icon.url)||s(e,"src",t),s(e,"alt","Sender"),s(e,"class","svelte-iote2n")},m(a,l){N(a,e,l)},p(a,l){l&1&&!le(e.src,t=a[0].actor.icon.url)&&s(e,"src",t)},d(a){a&&_(e)}}}function qe(r){let e,t,a=re(r[2],r[0].actor.name||r[0].actor.preferredUsername,r[0].actor)+"",l,n,i=fe(r[0].actor)+"",o,c;return{c(){e=g("a"),t=new de(!1),l=X(` •
				`),n=g("span"),o=X(i),this.h()},l(f){e=k(f,"A",{href:!0,class:!0});var u=T(e);t=_e(u,!1),l=Y(u,` •
				`),n=k(u,"SPAN",{class:!0});var d=T(n);o=Y(d,i),d.forEach(_),u.forEach(_),this.h()},h(){t.a=l,s(n,"class","url svelte-iote2n"),s(e,"href",c="/search?actor="+r[0].actor.id),s(e,"class","svelte-iote2n")},m(f,u){N(f,e,u),t.m(a,e),v(e,l),v(e,n),v(n,o)},p(f,u){u&5&&a!==(a=re(f[2],f[0].actor.name||f[0].actor.preferredUsername,f[0].actor)+"")&&t.p(a),u&1&&i!==(i=fe(f[0].actor)+"")&&ee(o,i),u&1&&c!==(c="/search?actor="+f[0].actor.id)&&s(e,"href",c)},d(f){f&&_(e)}}}function Fe(r){let e,t;return e=new ht({props:{note:r[0].note}}),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&1&&(n.note=a[0].note),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){Q(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function Qe(r){let e,t,a,l=me(r[0])+"",n,i,o;return{c(){e=g("span"),t=g("i"),a=C(),n=X(l),this.h()},l(c){e=k(c,"SPAN",{class:!0,"data-conversation":!0,"data-note":!0});var f=T(e);t=k(f,"I",{class:!0}),T(t).forEach(_),a=R(f),n=Y(f,l),f.forEach(_),this.h()},h(){s(t,"class","fa-solid fa-comments svelte-iote2n"),s(e,"class","comments svelte-iote2n"),s(e,"data-conversation",i=r[0].note.conversation),s(e,"data-note",o=r[0].note.id)},m(c,f){N(c,e,f),v(e,t),v(e,a),v(e,n)},p(c,f){f&1&&l!==(l=me(c[0])+"")&&ee(n,l),f&1&&i!==(i=c[0].note.conversation)&&s(e,"data-conversation",i),f&1&&o!==(o=c[0].note.id)&&s(e,"data-note",o)},d(c){c&&_(e)}}}function Xe(r){let e,t,a;function l(d,b){return d[0].note.ephemeralAnnounced?Nt:jt}let n=l(r),i=n(r);function o(d,b){return d[0].note.ephemeralLiked?yt:Dt}let c=o(r),f=c(r),u=r[0].actor&&Ye(r);return{c(){e=g("nav"),i.c(),t=C(),f.c(),a=C(),u&&u.c(),this.h()},l(d){e=k(d,"NAV",{class:!0});var b=T(e);i.l(b),t=R(b),f.l(b),a=R(b),u&&u.l(b),b.forEach(_),this.h()},h(){s(e,"class","svelte-iote2n")},m(d,b){N(d,e,b),i.m(e,null),v(e,t),f.m(e,null),v(e,a),u&&u.m(e,null)},p(d,b){n===(n=l(d))&&i?i.p(d,b):(i.d(1),i=n(d),i&&(i.c(),i.m(e,t))),c===(c=o(d))&&f?f.p(d,b):(f.d(1),f=c(d),f&&(f.c(),f.m(e,a))),d[0].actor?u?u.p(d,b):(u=Ye(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(d){d&&_(e),i.d(),f.d(),u&&u.d()}}}function jt(r){let e,t,a,l,n;return{c(){e=g("i"),this.h()},l(i){e=k(i,"I",{class:!0,"data-object":!0,"data-actor":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-repeat svelte-iote2n"),s(e,"data-object",t=r[0].note.id),s(e,"data-actor",a=r[0].note.attributedTo)},m(i,o){N(i,e,o),l||(n=x(e,"click",te(r[3])),l=!0)},p(i,o){o&1&&t!==(t=i[0].note.id)&&s(e,"data-object",t),o&1&&a!==(a=i[0].note.attributedTo)&&s(e,"data-actor",a)},d(i){i&&_(e),l=!1,n()}}}function Nt(r){let e,t,a,l,n;return{c(){e=g("i"),this.h()},l(i){e=k(i,"I",{class:!0,"data-object":!0,"data-actor":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-repeat selected svelte-iote2n"),s(e,"data-object",t=r[0].note.id),s(e,"data-actor",a=r[0].note.attributedTo)},m(i,o){N(i,e,o),l||(n=x(e,"click",te(r[3])),l=!0)},p(i,o){o&1&&t!==(t=i[0].note.id)&&s(e,"data-object",t),o&1&&a!==(a=i[0].note.attributedTo)&&s(e,"data-actor",a)},d(i){i&&_(e),l=!1,n()}}}function Dt(r){let e,t,a,l,n;return{c(){e=g("i"),this.h()},l(i){e=k(i,"I",{class:!0,"data-actor":!0,"data-object":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-star svelte-iote2n"),s(e,"data-actor",t=r[0].note.attributedTo),s(e,"data-object",a=r[0].note.id)},m(i,o){N(i,e,o),l||(n=x(e,"click",te(r[4])),l=!0)},p(i,o){o&1&&t!==(t=i[0].note.attributedTo)&&s(e,"data-actor",t),o&1&&a!==(a=i[0].note.id)&&s(e,"data-object",a)},d(i){i&&_(e),l=!1,n()}}}function yt(r){let e,t,a,l,n;return{c(){e=g("i"),this.h()},l(i){e=k(i,"I",{class:!0,"data-actor":!0,"data-object":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-star selected svelte-iote2n"),s(e,"data-actor",t=r[0].note.attributedTo),s(e,"data-object",a=r[0].note.id)},m(i,o){N(i,e,o),l||(n=x(e,"click",te(Ut)),l=!0)},p(i,o){o&1&&t!==(t=i[0].note.attributedTo)&&s(e,"data-actor",t),o&1&&a!==(a=i[0].note.id)&&s(e,"data-object",a)},d(i){i&&_(e),l=!1,n()}}}function Ye(r){let e,t,a,l,n,i,o,c,f;return{c(){e=g("i"),this.h()},l(u){e=k(u,"I",{class:!0,"data-reply":!0,"data-display":!0,"data-url":!0,"data-username":!0,"data-recipient":!0,"data-conversation":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-reply svelte-iote2n"),s(e,"data-reply",t=r[0].note.id),s(e,"data-display",a=r[0].actor.name||r[0].actor.preferredUsername),s(e,"data-url",l=r[0].actor.url),s(e,"data-username",n=r[0].actor.preferredUsername),s(e,"data-recipient",i=r[0].actor.id),s(e,"data-conversation",o=r[0].note.conversation)},m(u,d){N(u,e,d),c||(f=x(e,"click",r[7]),c=!0)},p(u,d){d&1&&t!==(t=u[0].note.id)&&s(e,"data-reply",t),d&1&&a!==(a=u[0].actor.name||u[0].actor.preferredUsername)&&s(e,"data-display",a),d&1&&l!==(l=u[0].actor.url)&&s(e,"data-url",l),d&1&&n!==(n=u[0].actor.preferredUsername)&&s(e,"data-username",n),d&1&&i!==(i=u[0].actor.id)&&s(e,"data-recipient",i),d&1&&o!==(o=u[0].note.conversation)&&s(e,"data-conversation",o)},d(u){u&&_(e),c=!1,f()}}}function Ze(r){let e,t,a=je(Array.from(r[0].replies.values()).sort(Pe)),l=[];for(let i=0;i<a.length;i+=1)l[i]=$e(Je(r,a,i));const n=i=>Q(l[i],1,1,()=>{l[i]=null});return{c(){e=g("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=k(i,"DIV",{class:!0});var o=T(e);for(let c=0;c<l.length;c+=1)l[c].l(o);o.forEach(_),this.h()},h(){s(e,"class","replies svelte-iote2n")},m(i,o){N(i,e,o);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);t=!0},p(i,o){if(o&99){a=je(Array.from(i[0].replies.values()).sort(Pe));let c;for(c=0;c<a.length;c+=1){const f=Je(i,a,c);l[c]?(l[c].p(f,o),M(l[c],1)):(l[c]=$e(f),l[c].c(),M(l[c],1),l[c].m(e,null))}for(oe(),c=a.length;c<l.length;c+=1)n(c);ce()}},i(i){if(!t){for(let o=0;o<a.length;o+=1)M(l[o]);t=!0}},o(i){l=l.filter(Boolean);for(let o=0;o<l.length;o+=1)Q(l[o]);t=!1},d(i){i&&_(e),_t(l,i)}}}function $e(r){let e,t;return e=new Rt({props:{note:r[12],username:r[1]}}),e.$on("reply_to",r[6]),e.$on("note_select",r[5]),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&1&&(n.note=a[12]),l&2&&(n.username=a[1]),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){Q(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function Lt(r){let e,t,a,l,n,i,o,c,f=re(r[2],r[0].note.content||"",r[0].note)+"",u,d,b,h,p=Ne(new Date(String(r[0].published)).getTime())+"",A,D,B,H,y,P,V=r[0].actor&&r[0].actor.icon&&Ke(r),U=r[0].actor&&qe(r),m=r[0].note.attachment&&r[0].note.attachment.length>0&&Fe(r),I=r[0].replies?.size&&Qe(r),E=r[1]&&Xe(r),w=r[0].replies?.size&&Ze(r);return{c(){e=g("article"),t=g("div"),a=g("div"),V&&V.c(),l=C(),n=g("address"),U&&U.c(),i=C(),o=g("section"),c=new de(!1),u=C(),m&&m.c(),d=C(),I&&I.c(),b=C(),h=g("time"),A=X(p),B=C(),E&&E.c(),H=C(),w&&w.c(),y=ae(),this.h()},l(S){e=k(S,"ARTICLE",{class:!0});var O=T(e);t=k(O,"DIV",{class:!0});var he=T(t);a=k(he,"DIV",{});var J=T(a);V&&V.l(J),J.forEach(_),he.forEach(_),l=R(O),n=k(O,"ADDRESS",{class:!0});var K=T(n);U&&U.l(K),K.forEach(_),i=R(O),o=k(O,"SECTION",{class:!0});var q=T(o);c=_e(q,!1),q.forEach(_),u=R(O),m&&m.l(O),d=R(O),I&&I.l(O),b=R(O),h=k(O,"TIME",{datetime:!0,class:!0});var F=T(h);A=Y(F,p),F.forEach(_),B=R(O),E&&E.l(O),O.forEach(_),H=R(S),w&&w.l(S),y=ae(),this.h()},h(){s(t,"class","avatar svelte-iote2n"),s(n,"class","svelte-iote2n"),c.a=null,s(o,"class","svelte-iote2n"),s(h,"datetime",D=r[0].published),s(h,"class","svelte-iote2n"),s(e,"class","svelte-iote2n")},m(S,O){N(S,e,O),v(e,t),v(t,a),V&&V.m(a,null),v(e,l),v(e,n),U&&U.m(n,null),v(e,i),v(e,o),c.m(f,o),v(e,u),m&&m.m(e,null),v(e,d),I&&I.m(e,null),v(e,b),v(e,h),v(h,A),v(e,B),E&&E.m(e,null),N(S,H,O),w&&w.m(S,O),N(S,y,O),P=!0},p(S,[O]){S[0].actor&&S[0].actor.icon?V?V.p(S,O):(V=Ke(S),V.c(),V.m(a,null)):V&&(V.d(1),V=null),S[0].actor?U?U.p(S,O):(U=qe(S),U.c(),U.m(n,null)):U&&(U.d(1),U=null),(!P||O&5)&&f!==(f=re(S[2],S[0].note.content||"",S[0].note)+"")&&c.p(f),S[0].note.attachment&&S[0].note.attachment.length>0?m?(m.p(S,O),O&1&&M(m,1)):(m=Fe(S),m.c(),M(m,1),m.m(e,d)):m&&(oe(),Q(m,1,1,()=>{m=null}),ce()),S[0].replies?.size?I?I.p(S,O):(I=Qe(S),I.c(),I.m(e,b)):I&&(I.d(1),I=null),(!P||O&1)&&p!==(p=Ne(new Date(String(S[0].published)).getTime())+"")&&ee(A,p),(!P||O&1&&D!==(D=S[0].published))&&s(h,"datetime",D),S[1]?E?E.p(S,O):(E=Xe(S),E.c(),E.m(e,null)):E&&(E.d(1),E=null),S[0].replies?.size?w?(w.p(S,O),O&1&&M(w,1)):(w=Ze(S),w.c(),M(w,1),w.m(y.parentNode,y)):w&&(oe(),Q(w,1,1,()=>{w=null}),ce())},i(S){P||(M(m),M(w),P=!0)},o(S){Q(m),Q(w),P=!1},d(S){S&&(_(e),_(H),_(y)),V&&V.d(),U&&U.d(),m&&m.d(),I&&I.d(),E&&E.d(),w&&w.d(S)}}}function Ut(r){String(r.target.dataset.object),String(r.target.dataset.actor)}function Ct(r,e,t){let a,l;ue(r,Te,h=>t(8,l=h));const n=ye();let{note:i}=e,{username:o}=e;function c(h){console.debug("HANDLING DISPATCHED ANNOUNCE");const p=String(h.target.dataset.object),A=String(h.target.dataset.actor);a&&p&&A?h.target.classList.add("selected"):(console.error("OBJECT OR ACTOR INVALID"),console.debug(`OBJECT: ${p}, ACTOR: ${A}`))}function f(h){console.debug("HANDLING DISPATCHED LIKE");const p=String(h.target.dataset.object),A=String(h.target.dataset.actor);a&&a.send_like(A,p).then(()=>{})}function u(h){n("note_select",h.detail)}function d(h){n("reply_to",h.detail)}function b(h){n("reply_to",{reply_to_recipient:h.target.dataset.recipient,reply_to_note:h.target.dataset.reply,reply_to_display:h.target.dataset.display,reply_to_conversation:h.target.dataset.conversation,reply_to_url:h.target.dataset.url,reply_to_username:h.target.dataset.username})}return r.$$set=h=>{"note"in h&&t(0,i=h.note),"username"in h&&t(1,o=h.username)},r.$$.update=()=>{r.$$.dirty&256&&t(2,a=l)},[i,o,a,c,f,u,d,b,l]}class Rt extends ve{constructor(e){super(),be(this,e,Ct,Lt,pe,{note:0,username:1})}}function xe(r){let e,t,a,l,n,i=r[0][G].ogTitle+"",o,c,f,u,d=r[0][G].ogImage?.length&&et(r),b=r[0][G].ogDescription&&tt(r),h=r[0][G].ogSiteName&&at(r);return{c(){e=g("a"),t=g("div"),d&&d.c(),a=C(),l=g("div"),n=g("span"),o=X(i),c=C(),b&&b.c(),f=C(),h&&h.c(),this.h()},l(p){e=k(p,"A",{href:!0,target:!0,rel:!0,class:!0});var A=T(e);t=k(A,"DIV",{class:!0});var D=T(t);d&&d.l(D),a=R(D),l=k(D,"DIV",{class:!0});var B=T(l);n=k(B,"SPAN",{class:!0});var H=T(n);o=Y(H,i),H.forEach(_),c=R(B),b&&b.l(B),f=R(B),h&&h.l(B),B.forEach(_),D.forEach(_),A.forEach(_),this.h()},h(){s(n,"class","svelte-9o0bks"),s(l,"class","svelte-9o0bks"),s(t,"class","svelte-9o0bks"),s(e,"href",u=r[0][G].ogUrl),s(e,"target","_blank"),s(e,"rel","noreferrer"),s(e,"class","svelte-9o0bks")},m(p,A){N(p,e,A),v(e,t),d&&d.m(t,null),v(t,a),v(t,l),v(l,n),v(n,o),v(l,c),b&&b.m(l,null),v(l,f),h&&h.m(l,null)},p(p,A){p[0][G].ogImage?.length?d?d.p(p,A):(d=et(p),d.c(),d.m(t,a)):d&&(d.d(1),d=null),A&1&&i!==(i=p[0][G].ogTitle+"")&&ee(o,i),p[0][G].ogDescription?b?b.p(p,A):(b=tt(p),b.c(),b.m(l,f)):b&&(b.d(1),b=null),p[0][G].ogSiteName?h?h.p(p,A):(h=at(p),h.c(),h.m(l,null)):h&&(h.d(1),h=null),A&1&&u!==(u=p[0][G].ogUrl)&&s(e,"href",u)},d(p){p&&_(e),d&&d.d(),b&&b.d(),h&&h.d()}}}function et(r){let e,t,a,l,n;return{c(){e=g("div"),t=g("img"),this.h()},l(i){e=k(i,"DIV",{class:!0});var o=T(e);t=k(o,"IMG",{src:!0,alt:!0,class:!0}),o.forEach(_),this.h()},h(){le(t.src,a=se(r[1],window.Buffer,String(r[0][G].ogImage)))||s(t,"src",a),s(t,"alt","Link Preview"),s(t,"class","svelte-9o0bks"),s(e,"class","image svelte-9o0bks")},m(i,o){N(i,e,o),v(e,t),l||(n=x(t,"error",r[2]),l=!0)},p(i,o){o&3&&!le(t.src,a=se(i[1],window.Buffer,String(i[0][G].ogImage)))&&s(t,"src",a)},d(i){i&&_(e),l=!1,n()}}}function tt(r){let e,t=r[0][G].ogDescription+"",a;return{c(){e=g("span"),a=X(t),this.h()},l(l){e=k(l,"SPAN",{class:!0});var n=T(e);a=Y(n,t),n.forEach(_),this.h()},h(){s(e,"class","svelte-9o0bks")},m(l,n){N(l,e,n),v(e,a)},p(l,n){n&1&&t!==(t=l[0][G].ogDescription+"")&&ee(a,t)},d(l){l&&_(e)}}}function at(r){let e,t=r[0][G].ogSiteName+"",a;return{c(){e=g("span"),a=X(t),this.h()},l(l){e=k(l,"SPAN",{class:!0});var n=T(e);a=Y(n,t),n.forEach(_),this.h()},h(){s(e,"class","svelte-9o0bks")},m(l,n){N(l,e,n),v(e,a)},p(l,n){n&1&&t!==(t=l[0][G].ogSiteName+"")&&ee(a,t)},d(l){l&&_(e)}}}function Bt(r){let e,t=r[0][G].ogUrl&&r[0][G].ogTitle&&xe(r);return{c(){t&&t.c(),e=ae()},l(a){t&&t.l(a),e=ae()},m(a,l){t&&t.m(a,l),N(a,e,l)},p(a,[l]){a[0][G].ogUrl&&a[0][G].ogTitle?t?t.p(a,l):(t=xe(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:W,o:W,d(a){a&&_(e),t&&t.d(a)}}}let G=0;function Ot(r,e,t){let a,l;ue(r,Te,o=>t(3,l=o));let{links:n}=e;De(async()=>{const{Buffer:o}=await Le(()=>import("./index.aMiLl7Je.js").then(c=>c.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=o});const i=o=>{console.log(o.target);let c=o.target;c&&(c.style.display="none")};return r.$$set=o=>{"links"in o&&t(0,n=o.links)},r.$$.update=()=>{r.$$.dirty&8&&t(1,a=l)},[n,a,i,l]}class Vt extends ve{constructor(e){super(),be(this,e,Ot,Bt,pe,{links:0})}}function lt(r){let e,t,a,l,n="Edit",i,o;return{c(){e=g("li"),t=X("Delete"),a=C(),l=g("li"),l.textContent=n,this.h()},l(c){e=k(c,"LI",{"data-object":!0,class:!0});var f=T(e);t=Y(f,"Delete"),f.forEach(_),a=R(c),l=k(c,"LI",{class:!0,"data-svelte-h":!0}),Ae(l)!=="svelte-nqb85c"&&(l.textContent=n),this.h()},h(){s(e,"data-object",r[0]),s(e,"class","svelte-1v3blo6"),s(l,"class","svelte-1v3blo6")},m(c,f){N(c,e,f),v(e,t),N(c,a,f),N(c,l,f),i||(o=x(e,"click",te(r[4])),i=!0)},p(c,f){f&1&&s(e,"data-object",c[0])},d(c){c&&(_(e),_(a),_(l)),i=!1,o()}}}function Ht(r){let e,t,a,l,n,i,o="Mute Author",c,f,u="Block Author",d,b,h="Block Instance",p,A,D=r[1]&&lt(r);return{c(){e=g("i"),t=C(),a=g("dialog"),l=g("ul"),D&&D.c(),n=C(),i=g("li"),i.textContent=o,c=C(),f=g("li"),f.textContent=u,d=C(),b=g("li"),b.textContent=h,this.h()},l(B){e=k(B,"I",{class:!0,"data-object":!0}),T(e).forEach(_),t=R(B),a=k(B,"DIALOG",{class:!0});var H=T(a);l=k(H,"UL",{class:!0});var y=T(l);D&&D.l(y),n=R(y),i=k(y,"LI",{class:!0,"data-svelte-h":!0}),Ae(i)!=="svelte-cedbu2"&&(i.textContent=o),c=R(y),f=k(y,"LI",{class:!0,"data-svelte-h":!0}),Ae(f)!=="svelte-1gvp02o"&&(f.textContent=u),d=R(y),b=k(y,"LI",{class:!0,"data-svelte-h":!0}),Ae(b)!=="svelte-5kz5l4"&&(b.textContent=h),y.forEach(_),H.forEach(_),this.h()},h(){s(e,"class","fa-solid fa-ellipsis svelte-1v3blo6"),s(e,"data-object",r[0]),s(i,"class","svelte-1v3blo6"),s(f,"class","svelte-1v3blo6"),s(b,"class","svelte-1v3blo6"),s(l,"class","svelte-1v3blo6"),s(a,"class","svelte-1v3blo6")},m(B,H){N(B,e,H),N(B,t,H),N(B,a,H),v(a,l),D&&D.m(l,null),v(l,n),v(l,i),v(l,c),v(l,f),v(l,d),v(l,b),r[8](a),p||(A=x(e,"click",r[3]),p=!0)},p(B,[H]){H&1&&s(e,"data-object",B[0]),B[1]?D?D.p(B,H):(D=lt(B),D.c(),D.m(l,n)):D&&(D.d(1),D=null)},i:W,o:W,d(B){B&&(_(e),_(t),_(a)),D&&D.d(),r[8](null),p=!1,A()}}}function Pt(r,e,t){let a,l;ue(r,Te,h=>t(7,l=h));let{object:n}=e,{owner:i}=e,{refresh:o}=e,{remove:c}=e;De(async()=>{});function f(h){console.log("HANDLE MENU ACTIVATED"),d.open?d.close():d.show()}function u(h){console.log("HANDLE DELETE ACTIVATED");const p=h.target.dataset.object;a?.send_delete(p).then(A=>{A&&(console.info("DELETE SENT"),c(p))})}let d;function b(h){bt[h?"unshift":"push"](()=>{d=h,t(2,d)})}return r.$$set=h=>{"object"in h&&t(0,n=h.object),"owner"in h&&t(1,i=h.owner),"refresh"in h&&t(5,o=h.refresh),"remove"in h&&t(6,c=h.remove)},r.$$.update=()=>{r.$$.dirty&128&&(a=l)},[n,i,d,f,u,o,c,l,b]}class Mt extends ve{constructor(e){super(),be(this,e,Pt,Ht,pe,{object:0,owner:1,refresh:5,remove:6})}}function rt(r){let e,t,a,l,n,i,o,c;return{c(){e=g("span"),t=g("i"),a=X(` In
			`),l=g("a"),n=X("reply"),o=X(`
			to `),c=new de(!1),this.h()},l(f){e=k(f,"SPAN",{class:!0});var u=T(e);t=k(u,"I",{class:!0}),T(t).forEach(_),a=Y(u,` In
			`),l=k(u,"A",{href:!0,target:!0,rel:!0,class:!0});var d=T(l);n=Y(d,"reply"),d.forEach(_),o=Y(u,`
			to `),c=_e(u,!1),u.forEach(_),this.h()},h(){s(t,"class","fa-solid fa-reply svelte-8a7ih0"),s(l,"href",i=r[0].note.inReplyTo),s(l,"target","_blank"),s(l,"rel","noreferrer"),s(l,"class","svelte-8a7ih0"),c.a=null,s(e,"class","reply svelte-8a7ih0")},m(f,u){N(f,e,u),v(e,t),v(e,a),v(e,l),v(l,n),v(e,o),c.m(r[2],e)},p(f,u){u&1&&i!==(i=f[0].note.inReplyTo)&&s(l,"href",i),u&4&&c.p(f[2])},d(f){f&&_(e)}}}function it(r){let e,t,a,l,n,i=r[3].name+"",o,c=r[3].others+"",f;return{c(){e=g("span"),t=g("i"),a=X(` Reposted by
			`),l=g("a"),n=new de(!1),f=X(c),this.h()},l(u){e=k(u,"SPAN",{class:!0});var d=T(e);t=k(d,"I",{class:!0}),T(t).forEach(_),a=Y(d,` Reposted by
			`),l=k(d,"A",{href:!0,class:!0});var b=T(l);n=_e(b,!1),b.forEach(_),f=Y(d,c),d.forEach(_),this.h()},h(){s(t,"class","fa-solid fa-retweet svelte-8a7ih0"),n.a=null,s(l,"href",o=r[3].url),s(l,"class","svelte-8a7ih0"),s(e,"class","repost svelte-8a7ih0")},m(u,d){N(u,e,d),v(e,t),v(e,a),v(e,l),n.m(i,l),v(e,f)},p(u,d){d&8&&i!==(i=u[3].name+"")&&n.p(i),d&8&&o!==(o=u[3].url)&&s(l,"href",o),d&8&&c!==(c=u[3].others+"")&&ee(f,c)},d(u){u&&_(e)}}}function nt(r){let e,t;return{c(){e=g("img"),this.h()},l(a){e=k(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){le(e.src,t=se(r[9],window.Buffer,r[0].actor.icon.url))||s(e,"src",t),s(e,"alt","Sender"),s(e,"class","svelte-8a7ih0")},m(a,l){N(a,e,l)},p(a,l){l&513&&!le(e.src,t=se(a[9],window.Buffer,a[0].actor.icon.url))&&s(e,"src",t)},d(a){a&&_(e)}}}function st(r){let e,t,a=re(r[9],r[0].actor.name||r[0].actor.preferredUsername,r[0].actor)+"",l,n,i=fe(r[0].actor)+"",o,c;return{c(){e=g("span"),t=new de(!1),l=C(),n=g("a"),o=X(i),this.h()},l(f){e=k(f,"SPAN",{class:!0});var u=T(e);t=_e(u,!1),u.forEach(_),l=R(f),n=k(f,"A",{href:!0,class:!0});var d=T(n);o=Y(d,i),d.forEach(_),this.h()},h(){t.a=null,s(e,"class","svelte-8a7ih0"),s(n,"href",c="/"+fe(r[0].actor)),s(n,"class","svelte-8a7ih0")},m(f,u){N(f,e,u),t.m(a,e),N(f,l,u),N(f,n,u),v(n,o)},p(f,u){u&513&&a!==(a=re(f[9],f[0].actor.name||f[0].actor.preferredUsername,f[0].actor)+"")&&t.p(a),u&1&&i!==(i=fe(f[0].actor)+"")&&ee(o,i),u&1&&c!==(c="/"+fe(f[0].actor))&&s(n,"href",c)},d(f){f&&(_(e),_(l),_(n))}}}function zt(r){let e,t;return e=new Vt({props:{links:r[0].note.ephemeralMetadata}}),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&1&&(n.links=a[0].note.ephemeralMetadata),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){Q(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function Gt(r){let e,t;return e=new ht({props:{note:r[0].note}}),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&1&&(n.note=a[0].note),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){Q(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function ot(r){let e,t,a,l=r[0].note.ephemeralLikes.length+"",n;return{c(){e=g("span"),t=g("i"),a=C(),n=X(l),this.h()},l(i){e=k(i,"SPAN",{class:!0});var o=T(e);t=k(o,"I",{class:!0}),T(t).forEach(_),a=R(o),n=Y(o,l),o.forEach(_),this.h()},h(){s(t,"class","fa-solid fa-star svelte-8a7ih0"),s(e,"class","likes svelte-8a7ih0")},m(i,o){N(i,e,o),v(e,t),v(e,a),v(e,n)},p(i,o){o&1&&l!==(l=i[0].note.ephemeralLikes.length+"")&&ee(n,l)},d(i){i&&_(e)}}}function ct(r){let e,t,a,l=me(r[0])+"",n,i,o,c,f,u,d,b,h;return{c(){e=g("span"),t=g("i"),a=C(),n=X(l),this.h()},l(p){e=k(p,"SPAN",{class:!0,"data-display":!0,"data-url":!0,"data-username":!0,"data-recipient":!0,"data-conversation":!0,"data-note":!0});var A=T(e);t=k(A,"I",{class:!0}),T(t).forEach(_),a=R(A),n=Y(A,l),A.forEach(_),this.h()},h(){s(t,"class","fa-solid fa-comments svelte-8a7ih0"),s(e,"class","comments svelte-8a7ih0"),s(e,"data-display",i=r[0].actor.name||r[0].actor.preferredUsername),s(e,"data-url",o=r[0].actor.url),s(e,"data-username",c=r[0].actor.preferredUsername),s(e,"data-recipient",f=r[0].actor.id),s(e,"data-conversation",u=r[0].note.conversation),s(e,"data-note",d=r[0].note.id)},m(p,A){N(p,e,A),v(e,t),v(e,a),v(e,n),b||(h=x(e,"click",te(r[14])),b=!0)},p(p,A){A&1&&l!==(l=me(p[0])+"")&&ee(n,l),A&1&&i!==(i=p[0].actor.name||p[0].actor.preferredUsername)&&s(e,"data-display",i),A&1&&o!==(o=p[0].actor.url)&&s(e,"data-url",o),A&1&&c!==(c=p[0].actor.preferredUsername)&&s(e,"data-username",c),A&1&&f!==(f=p[0].actor.id)&&s(e,"data-recipient",f),A&1&&u!==(u=p[0].note.conversation)&&s(e,"data-conversation",u),A&1&&d!==(d=p[0].note.id)&&s(e,"data-note",d)},d(p){p&&_(e),b=!1,h()}}}function ft(r){let e,t,a,l,n,i,o,c,f,u,d,b,h,p,A,D;function B(E,w){return E[0].note.ephemeralAnnounced?Jt:Wt}let H=B(r),y=H(r);function P(E,w){return E[0].note.ephemeralLiked?qt:Kt}let V=P(r),U=V(r),m=r[0].actor&&ut(r),I=r[0].note.id&&dt(r);return{c(){e=g("nav"),t=g("i"),u=C(),y.c(),d=C(),U.c(),b=C(),m&&m.c(),h=C(),I&&I.c(),this.h()},l(E){e=k(E,"NAV",{class:!0});var w=T(e);t=k(w,"I",{class:!0,"data-conversation":!0,"data-note":!0,"data-reply":!0,"data-display":!0,"data-url":!0,"data-username":!0,"data-recipient":!0}),T(t).forEach(_),u=R(w),y.l(w),d=R(w),U.l(w),b=R(w),m&&m.l(w),h=R(w),I&&I.l(w),w.forEach(_),this.h()},h(){s(t,"class","fa-solid fa-expand svelte-8a7ih0"),s(t,"data-conversation",a=r[0].note.conversation),s(t,"data-note",l=r[0].note.id),s(t,"data-reply",n=r[0].note.id),s(t,"data-display",i=r[0].actor.name||r[0].actor.preferredUsername),s(t,"data-url",o=r[0].actor.url),s(t,"data-username",c=r[0].actor.preferredUsername),s(t,"data-recipient",f=r[0].actor.id),s(e,"class","svelte-8a7ih0")},m(E,w){N(E,e,w),v(e,t),v(e,u),y.m(e,null),v(e,d),U.m(e,null),v(e,b),m&&m.m(e,null),v(e,h),I&&I.m(e,null),p=!0,A||(D=x(t,"click",te(r[14])),A=!0)},p(E,w){(!p||w&1&&a!==(a=E[0].note.conversation))&&s(t,"data-conversation",a),(!p||w&1&&l!==(l=E[0].note.id))&&s(t,"data-note",l),(!p||w&1&&n!==(n=E[0].note.id))&&s(t,"data-reply",n),(!p||w&1&&i!==(i=E[0].actor.name||E[0].actor.preferredUsername))&&s(t,"data-display",i),(!p||w&1&&o!==(o=E[0].actor.url))&&s(t,"data-url",o),(!p||w&1&&c!==(c=E[0].actor.preferredUsername))&&s(t,"data-username",c),(!p||w&1&&f!==(f=E[0].actor.id))&&s(t,"data-recipient",f),H===(H=B(E))&&y?y.p(E,w):(y.d(1),y=H(E),y&&(y.c(),y.m(e,d))),V===(V=P(E))&&U?U.p(E,w):(U.d(1),U=V(E),U&&(U.c(),U.m(e,b))),E[0].actor?m?m.p(E,w):(m=ut(E),m.c(),m.m(e,h)):m&&(m.d(1),m=null),E[0].note.id?I?(I.p(E,w),w&1&&M(I,1)):(I=dt(E),I.c(),M(I,1),I.m(e,null)):I&&(oe(),Q(I,1,1,()=>{I=null}),ce())},i(E){p||(M(I),p=!0)},o(E){Q(I),p=!1},d(E){E&&_(e),y.d(),U.d(),m&&m.d(),I&&I.d(),A=!1,D()}}}function Wt(r){let e,t,a,l;return{c(){e=g("i"),this.h()},l(n){e=k(n,"I",{class:!0,"data-object":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-repeat svelte-8a7ih0"),s(e,"data-object",t=r[0].note.id)},m(n,i){N(n,e,i),a||(l=x(e,"click",te(r[13])),a=!0)},p(n,i){i&1&&t!==(t=n[0].note.id)&&s(e,"data-object",t)},d(n){n&&_(e),a=!1,l()}}}function Jt(r){let e,t,a,l,n;return{c(){e=g("i"),this.h()},l(i){e=k(i,"I",{class:!0,"data-object":!0,"data-activity":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-repeat selected svelte-8a7ih0"),s(e,"data-object",t=r[0].note.id),s(e,"data-activity",a=r[0].note.ephemeralAnnounced)},m(i,o){N(i,e,o),l||(n=x(e,"click",te(r[12])),l=!0)},p(i,o){o&1&&t!==(t=i[0].note.id)&&s(e,"data-object",t),o&1&&a!==(a=i[0].note.ephemeralAnnounced)&&s(e,"data-activity",a)},d(i){i&&_(e),l=!1,n()}}}function Kt(r){let e,t,a,l,n;return{c(){e=g("i"),this.h()},l(i){e=k(i,"I",{class:!0,"data-actor":!0,"data-object":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-star svelte-8a7ih0"),s(e,"data-actor",t=r[0].note.attributedTo),s(e,"data-object",a=r[0].note.id)},m(i,o){N(i,e,o),l||(n=x(e,"click",te(r[11])),l=!0)},p(i,o){o&1&&t!==(t=i[0].note.attributedTo)&&s(e,"data-actor",t),o&1&&a!==(a=i[0].note.id)&&s(e,"data-object",a)},d(i){i&&_(e),l=!1,n()}}}function qt(r){let e,t,a,l,n,i;return{c(){e=g("i"),this.h()},l(o){e=k(o,"I",{class:!0,"data-actor":!0,"data-object":!0,"data-activity":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-star selected svelte-8a7ih0"),s(e,"data-actor",t=r[0].note.attributedTo),s(e,"data-object",a=r[0].note.id),s(e,"data-activity",l=r[0].note.ephemeralLiked)},m(o,c){N(o,e,c),n||(i=x(e,"click",te(r[10])),n=!0)},p(o,c){c&1&&t!==(t=o[0].note.attributedTo)&&s(e,"data-actor",t),c&1&&a!==(a=o[0].note.id)&&s(e,"data-object",a),c&1&&l!==(l=o[0].note.ephemeralLiked)&&s(e,"data-activity",l)},d(o){o&&_(e),n=!1,i()}}}function ut(r){let e,t,a,l,n,i,o,c,f;return{c(){e=g("i"),this.h()},l(u){e=k(u,"I",{class:!0,"data-reply":!0,"data-display":!0,"data-url":!0,"data-username":!0,"data-recipient":!0,"data-conversation":!0}),T(e).forEach(_),this.h()},h(){s(e,"class","fa-solid fa-reply svelte-8a7ih0"),s(e,"data-reply",t=r[0].note.id),s(e,"data-display",a=r[0].actor.name||r[0].actor.preferredUsername),s(e,"data-url",l=r[0].actor.url),s(e,"data-username",n=r[0].actor.preferredUsername),s(e,"data-recipient",i=r[0].actor.id),s(e,"data-conversation",o=r[0].note.conversation)},m(u,d){N(u,e,d),c||(f=x(e,"click",r[15]),c=!0)},p(u,d){d&1&&t!==(t=u[0].note.id)&&s(e,"data-reply",t),d&1&&a!==(a=u[0].actor.name||u[0].actor.preferredUsername)&&s(e,"data-display",a),d&1&&l!==(l=u[0].actor.url)&&s(e,"data-url",l),d&1&&n!==(n=u[0].actor.preferredUsername)&&s(e,"data-username",n),d&1&&i!==(i=u[0].actor.id)&&s(e,"data-recipient",i),d&1&&o!==(o=u[0].note.conversation)&&s(e,"data-conversation",o)},d(u){u&&_(e),c=!1,f()}}}function dt(r){let e,t,a,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Xt,then:Qt,catch:Ft,value:20,blocks:[,,,]};return Me(t=r[9]?.get_ap_id(),l),{c(){e=ae(),l.block.c()},l(n){e=ae(),l.block.l(n)},m(n,i){N(n,e,i),l.block.m(n,l.anchor=i),l.mount=()=>e.parentNode,l.anchor=e,a=!0},p(n,i){r=n,l.ctx=r,i&512&&t!==(t=r[9]?.get_ap_id())&&Me(t,l)||wt(l,r,i)},i(n){a||(M(l.block),a=!0)},o(n){for(let i=0;i<3;i+=1){const o=l.blocks[i];Q(o)}a=!1},d(n){n&&_(e),l.block.d(n),l.token=null,l=null}}}function Ft(r){return{c:W,l:W,m:W,p:W,i:W,o:W,d:W}}function Qt(r){let e,t;return e=new Mt({props:{remove:r[6],refresh:r[5],object:r[0].note.id,owner:r[20]==r[0].note.attributedTo}}),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&64&&(n.remove=a[6]),l&32&&(n.refresh=a[5]),l&1&&(n.object=a[0].note.id),l&513&&(n.owner=a[20]==a[0].note.attributedTo),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){Q(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function Xt(r){return{c:W,l:W,m:W,p:W,i:W,o:W,d:W}}function Yt(r){let e,t,a,l,n,i,o,c,f,u,d=re(r[9],r[0].note.content||"",r[0].note)+"",b,h,p,A,D,B,H,y,P,V=Ne(new Date(String(r[0].published)).getTime())+"",U,m,I,E,w,S,O,he,J=r[2]&&rt(r),K=r[3]&&it(r),q=r[0].actor&&r[0].actor.icon&&nt(r),F=r[0].actor&&st(r);const Ue=[Gt,zt],ie=[];function Ce(j,L){return j[0].note.attachment&&j[0].note.attachment.length>0?0:j[0].note.ephemeralMetadata&&j[0].note.ephemeralMetadata.length?1:-1}~(h=Ce(r))&&(p=ie[h]=Ue[h](r));let Z=r[0].note.ephemeralLikes?.length&&ot(r),$=r[0].replies?.size&&ct(r),z=r[1]&&ft(r);return{c(){e=g("article"),J&&J.c(),t=C(),K&&K.c(),a=C(),l=g("header"),n=g("div"),q&&q.c(),i=C(),o=g("address"),F&&F.c(),c=C(),f=g("section"),u=new de(!1),b=C(),p&&p.c(),A=C(),D=g("div"),Z&&Z.c(),B=C(),$&&$.c(),H=C(),y=g("time"),P=g("a"),U=X(V),E=C(),z&&z.c(),this.h()},l(j){e=k(j,"ARTICLE",{"data-conversation":!0,class:!0});var L=T(e);J&&J.l(L),t=R(L),K&&K.l(L),a=R(L),l=k(L,"HEADER",{class:!0});var ne=T(l);n=k(ne,"DIV",{class:!0});var Re=T(n);q&&q.l(Re),Re.forEach(_),i=R(ne),o=k(ne,"ADDRESS",{class:!0});var Be=T(o);F&&F.l(Be),Be.forEach(_),ne.forEach(_),c=R(L),f=k(L,"SECTION",{class:!0});var Oe=T(f);u=_e(Oe,!1),Oe.forEach(_),b=R(L),p&&p.l(L),A=R(L),D=k(L,"DIV",{class:!0});var Ie=T(D);Z&&Z.l(Ie),B=R(Ie),$&&$.l(Ie),Ie.forEach(_),H=R(L),y=k(L,"TIME",{datetime:!0,class:!0});var Ve=T(y);P=k(Ve,"A",{href:!0,target:!0,rel:!0,class:!0});var He=T(P);U=Y(He,V),He.forEach(_),Ve.forEach(_),E=R(L),z&&z.l(L),L.forEach(_),this.h()},h(){s(n,"class","svelte-8a7ih0"),s(o,"class","svelte-8a7ih0"),s(l,"class","svelte-8a7ih0"),u.a=null,s(f,"class","svelte-8a7ih0"),s(D,"class","activity svelte-8a7ih0"),s(P,"href",m=r[0].note.url),s(P,"target",r[7]),s(P,"rel",r[8]),s(P,"class","svelte-8a7ih0"),s(y,"datetime",I=r[0].published),s(y,"class","svelte-8a7ih0"),s(e,"data-conversation",w=r[0].note.conversation),s(e,"class","svelte-8a7ih0")},m(j,L){N(j,e,L),J&&J.m(e,null),v(e,t),K&&K.m(e,null),v(e,a),v(e,l),v(l,n),q&&q.m(n,null),v(l,i),v(l,o),F&&F.m(o,null),v(e,c),v(e,f),u.m(d,f),v(e,b),~h&&ie[h].m(e,null),v(e,A),v(e,D),Z&&Z.m(D,null),v(D,B),$&&$.m(D,null),v(e,H),v(e,y),v(y,P),v(P,U),v(e,E),z&&z.m(e,null),S=!0,O||(he=gt(r[4].call(null,e)),O=!0)},p(j,[L]){j[2]?J?J.p(j,L):(J=rt(j),J.c(),J.m(e,t)):J&&(J.d(1),J=null),j[3]?K?K.p(j,L):(K=it(j),K.c(),K.m(e,a)):K&&(K.d(1),K=null),j[0].actor&&j[0].actor.icon?q?q.p(j,L):(q=nt(j),q.c(),q.m(n,null)):q&&(q.d(1),q=null),j[0].actor?F?F.p(j,L):(F=st(j),F.c(),F.m(o,null)):F&&(F.d(1),F=null),(!S||L&513)&&d!==(d=re(j[9],j[0].note.content||"",j[0].note)+"")&&u.p(d);let ne=h;h=Ce(j),h===ne?~h&&ie[h].p(j,L):(p&&(oe(),Q(ie[ne],1,1,()=>{ie[ne]=null}),ce()),~h?(p=ie[h],p?p.p(j,L):(p=ie[h]=Ue[h](j),p.c()),M(p,1),p.m(e,A)):p=null),j[0].note.ephemeralLikes?.length?Z?Z.p(j,L):(Z=ot(j),Z.c(),Z.m(D,B)):Z&&(Z.d(1),Z=null),j[0].replies?.size?$?$.p(j,L):($=ct(j),$.c(),$.m(D,null)):$&&($.d(1),$=null),(!S||L&1)&&V!==(V=Ne(new Date(String(j[0].published)).getTime())+"")&&ee(U,V),(!S||L&1&&m!==(m=j[0].note.url))&&s(P,"href",m),(!S||L&128)&&s(P,"target",j[7]),(!S||L&256)&&s(P,"rel",j[8]),(!S||L&1&&I!==(I=j[0].published))&&s(y,"datetime",I),j[1]?z?(z.p(j,L),L&2&&M(z,1)):(z=ft(j),z.c(),M(z,1),z.m(e,null)):z&&(oe(),Q(z,1,1,()=>{z=null}),ce()),(!S||L&1&&w!==(w=j[0].note.conversation))&&s(e,"data-conversation",w)},i(j){S||(M(p),M(z),S=!0)},o(j){Q(p),Q(z),S=!1},d(j){j&&_(e),J&&J.d(),K&&K.d(),q&&q.d(),F&&F.d(),~h&&ie[h].d(),Z&&Z.d(),$&&$.d(),z&&z.d(),O=!1,he()}}}function Zt(r,e,t){let a,l,n;ue(r,Et,m=>t(17,l=m)),ue(r,Te,m=>t(16,n=m));const i=ye(),o=ye();De(async()=>{const{Buffer:m}=await Le(()=>import("./index.aMiLl7Je.js").then(I=>I.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=m});let{note:c}=e,{username:f}=e,{replyToHeader:u}=e,{announceHeader:d}=e,{renderAction:b}=e,{refresh:h}=e,{remove:p}=e;function A(m){const I=String(m.target.dataset.object),E=String(m.target.dataset.actor),w=String(m.target.dataset.activity);console.debug(`UNDOING ${w}`),a&&a.send_unlike(E,I,w).then(S=>{console.debug("UNLIKE SENT"),t(0,c.note.ephemeralLiked=null,c),t(0,c)})}function D(m){const I=String(m.target.dataset.object),E=String(m.target.dataset.actor);a&&a.send_like(E,I).then(w=>{console.debug(`LIKE SENT ${w}`),t(0,c.note.ephemeralLiked=w,c),t(0,c)})}function B(m){const I=String(m.target.dataset.object),E=String(m.target.dataset.activity);a&&I?a.send_unannounce(I,E).then(w=>{console.debug("UNANNOUNCE SENT"),t(0,c.note.ephemeralAnnounced=null,c),t(0,c)}):console.error("OBJECT INVALID")}function H(m){const I=String(m.target.dataset.object);a&&I?a.send_announce(I).then(E=>{console.debug(`ANNOUNCE SENT ${E}`),t(0,c.note.ephemeralAnnounced=E,c),t(0,c)}):console.error("OBJECT INVALID")}function y(m){console.log("DISPATCHING NOTE_SELECT"),console.log(m),o("noteSelect",{replyToConversation:m.target.dataset.conversation,replyToRecipient:m.target.dataset.recipient,replyToNote:m.target.dataset.note,replyToDisplay:re(a,m.target.dataset.display,c.actor),replyToUrl:m.target.dataset.url,replyToUsername:m.target.dataset.username,openAside:!1})}function P(m){i("replyTo",{replyToRecipient:m.target.dataset.recipient,replyToNote:m.target.dataset.reply,replyToDisplay:re(a,m.target.dataset.display,c.actor),replyToConversation:m.target.dataset.conversation,replyToUrl:m.target.dataset.url,replyToUsername:m.target.dataset.username,openAside:!0})}let V=null,U=null;return c&&c.note&&c.note.url&&!kt(l.url.toString(),c.note.url)&&(V="_blank",U="noreferrer"),r.$$set=m=>{"note"in m&&t(0,c=m.note),"username"in m&&t(1,f=m.username),"replyToHeader"in m&&t(2,u=m.replyToHeader),"announceHeader"in m&&t(3,d=m.announceHeader),"renderAction"in m&&t(4,b=m.renderAction),"refresh"in m&&t(5,h=m.refresh),"remove"in m&&t(6,p=m.remove)},r.$$.update=()=>{r.$$.dirty&65536&&t(9,a=n)},[c,f,u,d,b,h,p,V,U,a,A,D,B,H,y,P,n]}class na extends ve{constructor(e){super(),be(this,e,Zt,Yt,pe,{note:0,username:1,replyToHeader:2,announceHeader:3,renderAction:4,refresh:5,remove:6})}}export{na as A,Rt as R,Me as h,wt as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index.aMiLl7Je.js","./_commonjsHelpers.5-cIlDoe.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}