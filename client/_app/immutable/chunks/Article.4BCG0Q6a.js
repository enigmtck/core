import{P as ht,Q as mt,R as Ae,H as pt,s as pe,f as v,g as b,h as w,d as _,j as o,i as j,G,w as ue,o as Ne,e as te,I as dt,a as U,c as R,F as ae,v as p,K as de,l as Z,L as _e,m as $,n as re,S as ye,D as x,E as ee,u as Se,p as vt,T as bt}from"./scheduler.tnyNm5U0.js";import{g as oe,t as F,c as ce,a as M,S as ve,i as be,b as ge,d as ke,m as Ee,e as we}from"./index.R_ElRwcJ.js";import{e as je}from"./each.-oqiv04n.js";import"./paths.zd4cJMUS.js";import{a as se,i as le,t as De,g as fe,c as He,d as gt}from"./common.wRqRBlgV.js";import{e as Te}from"./stores.bABpd-zC.js";import{_ as Le}from"./preload-helper.0HuHagjb.js";import{p as kt}from"./stores.4o_GZvRM.js";function Me(r,e){const t=e.token={};function a(l,n,i,s){if(e.token!==t)return;e.resolved=s;let c=e.ctx;i!==void 0&&(c=c.slice(),c[i]=s);const f=l&&(e.current=l)(c);let u=!1;e.block&&(e.blocks?e.blocks.forEach((d,g)=>{g!==n&&d&&(oe(),F(d,1,1,()=>{e.blocks[g]===d&&(e.blocks[g]=null)}),ce())}):e.block.d(1),f.c(),M(f,1),f.m(e.mount(),e.anchor),u=!0),e.block=f,e.blocks&&(e.blocks[n]=f),u&&pt()}if(ht(r)){const l=mt();if(r.then(n=>{Ae(l),a(e.then,1,e.value,n),Ae(null)},n=>{if(Ae(l),a(e.catch,2,e.error,n),Ae(null),!e.hasCatch)throw n}),e.current!==e.pending)return a(e.pending,0),!0}else{if(e.current!==e.then)return a(e.then,1,e.value,r),!0;e.resolved=r}}function Et(r,e,t){const a=e.slice(),{resolved:l}=r;r.current===r.then&&(a[r.value]=l),r.current===r.catch&&(a[r.error]=l),r.block.p(a,t)}function me(r){let e=r.replies.size;return r.replies.size>0&&r.replies.forEach(t=>{e+=me(t)}),e}function ze(r,e,t){const a=r.slice();return a[6]=e[t],a}function Ge(r){let e,t=je(r[0].attachment),a=[];for(let l=0;l<t.length;l+=1)a[l]=We(ze(r,t,l));return{c(){for(let l=0;l<a.length;l+=1)a[l].c();e=te()},l(l){for(let n=0;n<a.length;n+=1)a[n].l(l);e=te()},m(l,n){for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(l,n);j(l,e,n)},p(l,n){if(n&7){t=je(l[0].attachment);let i;for(i=0;i<t.length;i+=1){const s=ze(l,t,i);a[i]?a[i].p(s,n):(a[i]=We(s),a[i].c(),a[i].m(e.parentNode,e))}for(;i<a.length;i+=1)a[i].d(1);a.length=t.length}},d(l){l&&_(e),dt(a,l)}}}function wt(r){let e,t,a,l,n,i,s,c;return{c(){e=v("div"),t=v("video"),a=v("source"),c=U(),this.h()},l(f){e=b(f,"DIV",{class:!0,tabindex:!0});var u=w(e);t=b(u,"VIDEO",{width:!0,height:!0});var d=w(t);a=b(d,"SOURCE",{src:!0,type:!0}),d.forEach(_),c=R(u),u.forEach(_),this.h()},h(){ae(a.src,l=se(r[1],window.Buffer,String(r[6].url)))||o(a,"src",l),o(a,"type",n=r[6].mediaType),o(t,"width",i=r[6].width),o(t,"height",s=r[6].height),t.controls=!0,o(e,"class",r[2]()),o(e,"tabindex","0")},m(f,u){j(f,e,u),p(e,t),p(t,a),p(e,c)},p(f,u){u&3&&!ae(a.src,l=se(f[1],window.Buffer,String(f[6].url)))&&o(a,"src",l),u&1&&n!==(n=f[6].mediaType)&&o(a,"type",n),u&1&&i!==(i=f[6].width)&&o(t,"width",i),u&1&&s!==(s=f[6].height)&&o(t,"height",s)},d(f){f&&_(e)}}}function Tt(r){let e,t,a,l,n,i,s;return{c(){e=v("div"),t=v("img"),s=U(),this.h()},l(c){e=b(c,"DIV",{class:!0,tabindex:!0});var f=w(e);t=b(f,"IMG",{src:!0,width:!0,height:!0,alt:!0}),s=R(f),f.forEach(_),this.h()},h(){ae(t.src,a=se(r[1],window.Buffer,String(r[6].url)))||o(t,"src",a),o(t,"width",l=r[6].width),o(t,"height",n=r[6].height),o(t,"alt",i=r[6].name),o(e,"class",r[2]()),o(e,"tabindex","0")},m(c,f){j(c,e,f),p(e,t),p(e,s)},p(c,f){f&3&&!ae(t.src,a=se(c[1],window.Buffer,String(c[6].url)))&&o(t,"src",a),f&1&&l!==(l=c[6].width)&&o(t,"width",l),f&1&&n!==(n=c[6].height)&&o(t,"height",n),f&1&&i!==(i=c[6].name)&&o(t,"alt",i)},d(c){c&&_(e)}}}function We(r){let e,t,a;function l(s,c){if(c&1&&(e=null),c&1&&(t=null),e==null&&(e=!!(s[6].type=="Document"&&/^(?:image)\/.+$/.test(String(s[6].mediaType)))),e)return Tt;if(t==null&&(t=!!(s[6].type=="Document"&&/^(?:video)\/.+$/.test(String(s[6].mediaType)))),t)return wt}let n=l(r,-1),i=n&&n(r);return{c(){i&&i.c(),a=te()},l(s){i&&i.l(s),a=te()},m(s,c){i&&i.m(s,c),j(s,a,c)},p(s,c){n===(n=l(s,c))&&i?i.p(s,c):(i&&i.d(1),i=n&&n(s),i&&(i.c(),i.m(a.parentNode,a)))},d(s){s&&_(a),i&&i.d(s)}}}function It(r){let e,t=r[0].attachment&&Ge(r);return{c(){e=v("section"),t&&t.c(),this.h()},l(a){e=b(a,"SECTION",{class:!0});var l=w(e);t&&t.l(l),l.forEach(_),this.h()},h(){o(e,"class","svelte-dyltn2")},m(a,l){j(a,e,l),t&&t.m(e,null)},p(a,[l]){a[0].attachment?t?t.p(a,l):(t=Ge(a),t.c(),t.m(e,null)):t&&(t.d(1),t=null)},i:G,o:G,d(a){a&&_(e),t&&t.d()}}}function At(r,e,t){let a,l;ue(r,Te,c=>t(3,l=c));let{note:n}=e;Ne(async()=>{const{Buffer:c}=await Le(()=>import("./index.aMiLl7Je.js").then(f=>f.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=c});function i(){return s>1?"half":"full"}let s=n.attachment?.length||0;return n.attachment?.length,r.$$set=c=>{"note"in c&&t(0,n=c.note)},r.$$.update=()=>{r.$$.dirty&8&&t(1,a=l)},[n,a,i,l]}class _t extends ve{constructor(e){super(),be(this,e,At,It,pe,{note:0})}}function Je(r,e,t){const a=r.slice();return a[12]=e[t],a}function Ke(r){let e,t;return{c(){e=v("img"),this.h()},l(a){e=b(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ae(e.src,t=r[0].actor.icon.url)||o(e,"src",t),o(e,"alt","Sender"),o(e,"class","svelte-iote2n")},m(a,l){j(a,e,l)},p(a,l){l&1&&!ae(e.src,t=a[0].actor.icon.url)&&o(e,"src",t)},d(a){a&&_(e)}}}function qe(r){let e,t,a=le(r[2],r[0].actor.name||r[0].actor.preferredUsername,r[0].actor)+"",l,n,i=fe(r[0].actor)+"",s,c;return{c(){e=v("a"),t=new de(!1),l=Z(` •
				`),n=v("span"),s=Z(i),this.h()},l(f){e=b(f,"A",{href:!0,class:!0});var u=w(e);t=_e(u,!1),l=$(u,` •
				`),n=b(u,"SPAN",{class:!0});var d=w(n);s=$(d,i),d.forEach(_),u.forEach(_),this.h()},h(){t.a=l,o(n,"class","url svelte-iote2n"),o(e,"href",c="/search?actor="+r[0].actor.id),o(e,"class","svelte-iote2n")},m(f,u){j(f,e,u),t.m(a,e),p(e,l),p(e,n),p(n,s)},p(f,u){u&5&&a!==(a=le(f[2],f[0].actor.name||f[0].actor.preferredUsername,f[0].actor)+"")&&t.p(a),u&1&&i!==(i=fe(f[0].actor)+"")&&re(s,i),u&1&&c!==(c="/search?actor="+f[0].actor.id)&&o(e,"href",c)},d(f){f&&_(e)}}}function Fe(r){let e,t;return e=new _t({props:{note:r[0].note}}),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&1&&(n.note=a[0].note),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){F(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function Qe(r){let e,t,a,l=me(r[0])+"",n,i,s;return{c(){e=v("span"),t=v("i"),a=U(),n=Z(l),this.h()},l(c){e=b(c,"SPAN",{class:!0,"data-conversation":!0,"data-note":!0});var f=w(e);t=b(f,"I",{class:!0}),w(t).forEach(_),a=R(f),n=$(f,l),f.forEach(_),this.h()},h(){o(t,"class","fa-solid fa-comments svelte-iote2n"),o(e,"class","comments svelte-iote2n"),o(e,"data-conversation",i=r[0].note.conversation),o(e,"data-note",s=r[0].note.id)},m(c,f){j(c,e,f),p(e,t),p(e,a),p(e,n)},p(c,f){f&1&&l!==(l=me(c[0])+"")&&re(n,l),f&1&&i!==(i=c[0].note.conversation)&&o(e,"data-conversation",i),f&1&&s!==(s=c[0].note.id)&&o(e,"data-note",s)},d(c){c&&_(e)}}}function Xe(r){let e,t,a;function l(d,g){return d[0].note.ephemeralAnnounced?jt:St}let n=l(r),i=n(r);function s(d,g){return d[0].note.ephemeralLiked?Nt:Dt}let c=s(r),f=c(r),u=r[0].actor&&Ye(r);return{c(){e=v("nav"),i.c(),t=U(),f.c(),a=U(),u&&u.c(),this.h()},l(d){e=b(d,"NAV",{class:!0});var g=w(e);i.l(g),t=R(g),f.l(g),a=R(g),u&&u.l(g),g.forEach(_),this.h()},h(){o(e,"class","svelte-iote2n")},m(d,g){j(d,e,g),i.m(e,null),p(e,t),f.m(e,null),p(e,a),u&&u.m(e,null)},p(d,g){n===(n=l(d))&&i?i.p(d,g):(i.d(1),i=n(d),i&&(i.c(),i.m(e,t))),c===(c=s(d))&&f?f.p(d,g):(f.d(1),f=c(d),f&&(f.c(),f.m(e,a))),d[0].actor?u?u.p(d,g):(u=Ye(d),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(d){d&&_(e),i.d(),f.d(),u&&u.d()}}}function St(r){let e,t,a,l,n;return{c(){e=v("i"),this.h()},l(i){e=b(i,"I",{class:!0,"data-object":!0,"data-actor":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-repeat svelte-iote2n"),o(e,"data-object",t=r[0].note.id),o(e,"data-actor",a=r[0].note.attributedTo)},m(i,s){j(i,e,s),l||(n=x(e,"click",ee(r[3])),l=!0)},p(i,s){s&1&&t!==(t=i[0].note.id)&&o(e,"data-object",t),s&1&&a!==(a=i[0].note.attributedTo)&&o(e,"data-actor",a)},d(i){i&&_(e),l=!1,n()}}}function jt(r){let e,t,a,l,n;return{c(){e=v("i"),this.h()},l(i){e=b(i,"I",{class:!0,"data-object":!0,"data-actor":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-repeat selected svelte-iote2n"),o(e,"data-object",t=r[0].note.id),o(e,"data-actor",a=r[0].note.attributedTo)},m(i,s){j(i,e,s),l||(n=x(e,"click",ee(r[3])),l=!0)},p(i,s){s&1&&t!==(t=i[0].note.id)&&o(e,"data-object",t),s&1&&a!==(a=i[0].note.attributedTo)&&o(e,"data-actor",a)},d(i){i&&_(e),l=!1,n()}}}function Dt(r){let e,t,a,l,n;return{c(){e=v("i"),this.h()},l(i){e=b(i,"I",{class:!0,"data-actor":!0,"data-object":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-star svelte-iote2n"),o(e,"data-actor",t=r[0].note.attributedTo),o(e,"data-object",a=r[0].note.id)},m(i,s){j(i,e,s),l||(n=x(e,"click",ee(r[4])),l=!0)},p(i,s){s&1&&t!==(t=i[0].note.attributedTo)&&o(e,"data-actor",t),s&1&&a!==(a=i[0].note.id)&&o(e,"data-object",a)},d(i){i&&_(e),l=!1,n()}}}function Nt(r){let e,t,a,l,n;return{c(){e=v("i"),this.h()},l(i){e=b(i,"I",{class:!0,"data-actor":!0,"data-object":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-star selected svelte-iote2n"),o(e,"data-actor",t=r[0].note.attributedTo),o(e,"data-object",a=r[0].note.id)},m(i,s){j(i,e,s),l||(n=x(e,"click",ee(Lt)),l=!0)},p(i,s){s&1&&t!==(t=i[0].note.attributedTo)&&o(e,"data-actor",t),s&1&&a!==(a=i[0].note.id)&&o(e,"data-object",a)},d(i){i&&_(e),l=!1,n()}}}function Ye(r){let e,t,a,l,n,i,s,c,f;return{c(){e=v("i"),this.h()},l(u){e=b(u,"I",{class:!0,"data-reply":!0,"data-display":!0,"data-url":!0,"data-username":!0,"data-recipient":!0,"data-conversation":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-reply svelte-iote2n"),o(e,"data-reply",t=r[0].note.id),o(e,"data-display",a=r[0].actor.name||r[0].actor.preferredUsername),o(e,"data-url",l=r[0].actor.url),o(e,"data-username",n=r[0].actor.preferredUsername),o(e,"data-recipient",i=r[0].actor.id),o(e,"data-conversation",s=r[0].note.conversation)},m(u,d){j(u,e,d),c||(f=x(e,"click",r[7]),c=!0)},p(u,d){d&1&&t!==(t=u[0].note.id)&&o(e,"data-reply",t),d&1&&a!==(a=u[0].actor.name||u[0].actor.preferredUsername)&&o(e,"data-display",a),d&1&&l!==(l=u[0].actor.url)&&o(e,"data-url",l),d&1&&n!==(n=u[0].actor.preferredUsername)&&o(e,"data-username",n),d&1&&i!==(i=u[0].actor.id)&&o(e,"data-recipient",i),d&1&&s!==(s=u[0].note.conversation)&&o(e,"data-conversation",s)},d(u){u&&_(e),c=!1,f()}}}function Ze(r){let e,t,a=je(Array.from(r[0].replies.values()).sort(He)),l=[];for(let i=0;i<a.length;i+=1)l[i]=$e(Je(r,a,i));const n=i=>F(l[i],1,1,()=>{l[i]=null});return{c(){e=v("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=b(i,"DIV",{class:!0});var s=w(e);for(let c=0;c<l.length;c+=1)l[c].l(s);s.forEach(_),this.h()},h(){o(e,"class","replies svelte-iote2n")},m(i,s){j(i,e,s);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);t=!0},p(i,s){if(s&99){a=je(Array.from(i[0].replies.values()).sort(He));let c;for(c=0;c<a.length;c+=1){const f=Je(i,a,c);l[c]?(l[c].p(f,s),M(l[c],1)):(l[c]=$e(f),l[c].c(),M(l[c],1),l[c].m(e,null))}for(oe(),c=a.length;c<l.length;c+=1)n(c);ce()}},i(i){if(!t){for(let s=0;s<a.length;s+=1)M(l[s]);t=!0}},o(i){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)F(l[s]);t=!1},d(i){i&&_(e),dt(l,i)}}}function $e(r){let e,t;return e=new Ut({props:{note:r[12],username:r[1]}}),e.$on("reply_to",r[6]),e.$on("note_select",r[5]),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&1&&(n.note=a[12]),l&2&&(n.username=a[1]),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){F(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function yt(r){let e,t,a,l,n,i,s,c,f=le(r[2],r[0].note.content||"",r[0].note)+"",u,d,g,m,T=De(new Date(String(r[0].published)).getTime())+"",B,D,O,P,N,H,V=r[0].actor&&r[0].actor.icon&&Ke(r),L=r[0].actor&&qe(r),h=r[0].note.attachment&&r[0].note.attachment.length>0&&Fe(r),I=r[0].replies?.size&&Qe(r),k=r[1]&&Xe(r),E=r[0].replies?.size&&Ze(r);return{c(){e=v("article"),t=v("div"),a=v("div"),V&&V.c(),l=U(),n=v("address"),L&&L.c(),i=U(),s=v("section"),c=new de(!1),u=U(),h&&h.c(),d=U(),I&&I.c(),g=U(),m=v("time"),B=Z(T),O=U(),k&&k.c(),P=U(),E&&E.c(),N=te(),this.h()},l(A){e=b(A,"ARTICLE",{class:!0});var C=w(e);t=b(C,"DIV",{class:!0});var he=w(t);a=b(he,"DIV",{});var W=w(a);V&&V.l(W),W.forEach(_),he.forEach(_),l=R(C),n=b(C,"ADDRESS",{class:!0});var J=w(n);L&&L.l(J),J.forEach(_),i=R(C),s=b(C,"SECTION",{class:!0});var K=w(s);c=_e(K,!1),K.forEach(_),u=R(C),h&&h.l(C),d=R(C),I&&I.l(C),g=R(C),m=b(C,"TIME",{datetime:!0,class:!0});var q=w(m);B=$(q,T),q.forEach(_),O=R(C),k&&k.l(C),C.forEach(_),P=R(A),E&&E.l(A),N=te(),this.h()},h(){o(t,"class","avatar svelte-iote2n"),o(n,"class","svelte-iote2n"),c.a=null,o(s,"class","svelte-iote2n"),o(m,"datetime",D=r[0].published),o(m,"class","svelte-iote2n"),o(e,"class","svelte-iote2n")},m(A,C){j(A,e,C),p(e,t),p(t,a),V&&V.m(a,null),p(e,l),p(e,n),L&&L.m(n,null),p(e,i),p(e,s),c.m(f,s),p(e,u),h&&h.m(e,null),p(e,d),I&&I.m(e,null),p(e,g),p(e,m),p(m,B),p(e,O),k&&k.m(e,null),j(A,P,C),E&&E.m(A,C),j(A,N,C),H=!0},p(A,[C]){A[0].actor&&A[0].actor.icon?V?V.p(A,C):(V=Ke(A),V.c(),V.m(a,null)):V&&(V.d(1),V=null),A[0].actor?L?L.p(A,C):(L=qe(A),L.c(),L.m(n,null)):L&&(L.d(1),L=null),(!H||C&5)&&f!==(f=le(A[2],A[0].note.content||"",A[0].note)+"")&&c.p(f),A[0].note.attachment&&A[0].note.attachment.length>0?h?(h.p(A,C),C&1&&M(h,1)):(h=Fe(A),h.c(),M(h,1),h.m(e,d)):h&&(oe(),F(h,1,1,()=>{h=null}),ce()),A[0].replies?.size?I?I.p(A,C):(I=Qe(A),I.c(),I.m(e,g)):I&&(I.d(1),I=null),(!H||C&1)&&T!==(T=De(new Date(String(A[0].published)).getTime())+"")&&re(B,T),(!H||C&1&&D!==(D=A[0].published))&&o(m,"datetime",D),A[1]?k?k.p(A,C):(k=Xe(A),k.c(),k.m(e,null)):k&&(k.d(1),k=null),A[0].replies?.size?E?(E.p(A,C),C&1&&M(E,1)):(E=Ze(A),E.c(),M(E,1),E.m(N.parentNode,N)):E&&(oe(),F(E,1,1,()=>{E=null}),ce())},i(A){H||(M(h),M(E),H=!0)},o(A){F(h),F(E),H=!1},d(A){A&&(_(e),_(P),_(N)),V&&V.d(),L&&L.d(),h&&h.d(),I&&I.d(),k&&k.d(),E&&E.d(A)}}}function Lt(r){String(r.target.dataset.object),String(r.target.dataset.actor)}function Ct(r,e,t){let a,l;ue(r,Te,m=>t(8,l=m));const n=ye();let{note:i}=e,{username:s}=e;function c(m){console.debug("HANDLING DISPATCHED ANNOUNCE");const T=String(m.target.dataset.object),B=String(m.target.dataset.actor);a&&T&&B?m.target.classList.add("selected"):(console.error("OBJECT OR ACTOR INVALID"),console.debug(`OBJECT: ${T}, ACTOR: ${B}`))}function f(m){console.debug("HANDLING DISPATCHED LIKE");const T=String(m.target.dataset.object),B=String(m.target.dataset.actor);a&&a.send_like(B,T).then(()=>{})}function u(m){n("note_select",m.detail)}function d(m){n("reply_to",m.detail)}function g(m){n("reply_to",{reply_to_recipient:m.target.dataset.recipient,reply_to_note:m.target.dataset.reply,reply_to_display:m.target.dataset.display,reply_to_conversation:m.target.dataset.conversation,reply_to_url:m.target.dataset.url,reply_to_username:m.target.dataset.username})}return r.$$set=m=>{"note"in m&&t(0,i=m.note),"username"in m&&t(1,s=m.username)},r.$$.update=()=>{r.$$.dirty&256&&t(2,a=l)},[i,s,a,c,f,u,d,g,l]}class Ut extends ve{constructor(e){super(),be(this,e,Ct,yt,pe,{note:0,username:1})}}function xe(r){let e,t,a,l,n,i=r[0][Y].ogTitle+"",s,c,f,u=r[0][Y].ogImage?.length&&et(r),d=r[0][Y].ogDescription&&tt(r);return{c(){e=v("a"),t=v("div"),u&&u.c(),a=U(),l=v("div"),n=v("span"),s=Z(i),c=U(),d&&d.c(),this.h()},l(g){e=b(g,"A",{href:!0,target:!0,rel:!0,class:!0});var m=w(e);t=b(m,"DIV",{class:!0});var T=w(t);u&&u.l(T),a=R(T),l=b(T,"DIV",{class:!0});var B=w(l);n=b(B,"SPAN",{class:!0});var D=w(n);s=$(D,i),D.forEach(_),c=R(B),d&&d.l(B),B.forEach(_),T.forEach(_),m.forEach(_),this.h()},h(){o(n,"class","svelte-1bhmehm"),o(l,"class","svelte-1bhmehm"),o(t,"class","svelte-1bhmehm"),o(e,"href",f=r[0][Y].ogUrl),o(e,"target","_blank"),o(e,"rel","noreferrer"),o(e,"class","svelte-1bhmehm")},m(g,m){j(g,e,m),p(e,t),u&&u.m(t,null),p(t,a),p(t,l),p(l,n),p(n,s),p(l,c),d&&d.m(l,null)},p(g,m){g[0][Y].ogImage?.length?u?u.p(g,m):(u=et(g),u.c(),u.m(t,a)):u&&(u.d(1),u=null),m&1&&i!==(i=g[0][Y].ogTitle+"")&&re(s,i),g[0][Y].ogDescription?d?d.p(g,m):(d=tt(g),d.c(),d.m(l,null)):d&&(d.d(1),d=null),m&1&&f!==(f=g[0][Y].ogUrl)&&o(e,"href",f)},d(g){g&&_(e),u&&u.d(),d&&d.d()}}}function et(r){let e,t,a,l,n;return{c(){e=v("div"),t=v("img"),this.h()},l(i){e=b(i,"DIV",{class:!0});var s=w(e);t=b(s,"IMG",{src:!0,alt:!0,class:!0}),s.forEach(_),this.h()},h(){ae(t.src,a=se(r[1],window.Buffer,String(r[0][Y].ogImage)))||o(t,"src",a),o(t,"alt","Link Preview"),o(t,"class","svelte-1bhmehm"),o(e,"class","image svelte-1bhmehm")},m(i,s){j(i,e,s),p(e,t),l||(n=x(t,"error",r[2]),l=!0)},p(i,s){s&3&&!ae(t.src,a=se(i[1],window.Buffer,String(i[0][Y].ogImage)))&&o(t,"src",a)},d(i){i&&_(e),l=!1,n()}}}function tt(r){let e,t=r[0][Y].ogDescription+"",a;return{c(){e=v("span"),a=Z(t),this.h()},l(l){e=b(l,"SPAN",{class:!0});var n=w(e);a=$(n,t),n.forEach(_),this.h()},h(){o(e,"class","svelte-1bhmehm")},m(l,n){j(l,e,n),p(e,a)},p(l,n){n&1&&t!==(t=l[0][Y].ogDescription+"")&&re(a,t)},d(l){l&&_(e)}}}function Rt(r){let e,t=r[0][Y].ogUrl&&r[0][Y].ogTitle&&xe(r);return{c(){t&&t.c(),e=te()},l(a){t&&t.l(a),e=te()},m(a,l){t&&t.m(a,l),j(a,e,l)},p(a,[l]){a[0][Y].ogUrl&&a[0][Y].ogTitle?t?t.p(a,l):(t=xe(a),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:G,o:G,d(a){a&&_(e),t&&t.d(a)}}}let Y=0;function Bt(r,e,t){let a,l;ue(r,Te,s=>t(3,l=s));let{links:n}=e;Ne(async()=>{const{Buffer:s}=await Le(()=>import("./index.aMiLl7Je.js").then(c=>c.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=s});const i=s=>{console.log(s.target);let c=s.target;c&&(c.style.display="none")};return r.$$set=s=>{"links"in s&&t(0,n=s.links)},r.$$.update=()=>{r.$$.dirty&8&&t(1,a=l)},[n,a,i,l]}class Vt extends ve{constructor(e){super(),be(this,e,Bt,Rt,pe,{links:0})}}function at(r){let e,t,a,l,n="Edit",i,s;return{c(){e=v("li"),t=Z("Delete"),a=U(),l=v("li"),l.textContent=n,this.h()},l(c){e=b(c,"LI",{"data-object":!0,class:!0});var f=w(e);t=$(f,"Delete"),f.forEach(_),a=R(c),l=b(c,"LI",{class:!0,"data-svelte-h":!0}),Se(l)!=="svelte-nqb85c"&&(l.textContent=n),this.h()},h(){o(e,"data-object",r[0]),o(e,"class","svelte-1v3blo6"),o(l,"class","svelte-1v3blo6")},m(c,f){j(c,e,f),p(e,t),j(c,a,f),j(c,l,f),i||(s=x(e,"click",ee(r[4])),i=!0)},p(c,f){f&1&&o(e,"data-object",c[0])},d(c){c&&(_(e),_(a),_(l)),i=!1,s()}}}function Ot(r){let e,t,a,l,n,i,s="Mute Author",c,f,u="Block Author",d,g,m="Block Instance",T,B,D=r[1]&&at(r);return{c(){e=v("i"),t=U(),a=v("dialog"),l=v("ul"),D&&D.c(),n=U(),i=v("li"),i.textContent=s,c=U(),f=v("li"),f.textContent=u,d=U(),g=v("li"),g.textContent=m,this.h()},l(O){e=b(O,"I",{class:!0,"data-object":!0}),w(e).forEach(_),t=R(O),a=b(O,"DIALOG",{class:!0});var P=w(a);l=b(P,"UL",{class:!0});var N=w(l);D&&D.l(N),n=R(N),i=b(N,"LI",{class:!0,"data-svelte-h":!0}),Se(i)!=="svelte-cedbu2"&&(i.textContent=s),c=R(N),f=b(N,"LI",{class:!0,"data-svelte-h":!0}),Se(f)!=="svelte-1gvp02o"&&(f.textContent=u),d=R(N),g=b(N,"LI",{class:!0,"data-svelte-h":!0}),Se(g)!=="svelte-5kz5l4"&&(g.textContent=m),N.forEach(_),P.forEach(_),this.h()},h(){o(e,"class","fa-solid fa-ellipsis svelte-1v3blo6"),o(e,"data-object",r[0]),o(i,"class","svelte-1v3blo6"),o(f,"class","svelte-1v3blo6"),o(g,"class","svelte-1v3blo6"),o(l,"class","svelte-1v3blo6"),o(a,"class","svelte-1v3blo6")},m(O,P){j(O,e,P),j(O,t,P),j(O,a,P),p(a,l),D&&D.m(l,null),p(l,n),p(l,i),p(l,c),p(l,f),p(l,d),p(l,g),r[8](a),T||(B=x(e,"click",r[3]),T=!0)},p(O,[P]){P&1&&o(e,"data-object",O[0]),O[1]?D?D.p(O,P):(D=at(O),D.c(),D.m(l,n)):D&&(D.d(1),D=null)},i:G,o:G,d(O){O&&(_(e),_(t),_(a)),D&&D.d(),r[8](null),T=!1,B()}}}function Pt(r,e,t){let a,l;ue(r,Te,m=>t(7,l=m));let{object:n}=e,{owner:i}=e,{refresh:s}=e,{remove:c}=e;Ne(async()=>{});function f(m){console.log("HANDLE MENU ACTIVATED"),d.open?d.close():d.show()}function u(m){console.log("HANDLE DELETE ACTIVATED");const T=m.target.dataset.object;a?.send_delete(T).then(B=>{B&&(console.info("DELETE SENT"),c(T))})}let d;function g(m){vt[m?"unshift":"push"](()=>{d=m,t(2,d)})}return r.$$set=m=>{"object"in m&&t(0,n=m.object),"owner"in m&&t(1,i=m.owner),"refresh"in m&&t(5,s=m.refresh),"remove"in m&&t(6,c=m.remove)},r.$$.update=()=>{r.$$.dirty&128&&(a=l)},[n,i,d,f,u,s,c,l,g]}class Ht extends ve{constructor(e){super(),be(this,e,Pt,Ot,pe,{object:0,owner:1,refresh:5,remove:6})}}function lt(r){let e,t,a,l,n,i,s,c;return{c(){e=v("span"),t=v("i"),a=Z(` In
			`),l=v("a"),n=Z("reply"),s=Z(`
			to `),c=new de(!1),this.h()},l(f){e=b(f,"SPAN",{class:!0});var u=w(e);t=b(u,"I",{class:!0}),w(t).forEach(_),a=$(u,` In
			`),l=b(u,"A",{href:!0,target:!0,rel:!0,class:!0});var d=w(l);n=$(d,"reply"),d.forEach(_),s=$(u,`
			to `),c=_e(u,!1),u.forEach(_),this.h()},h(){o(t,"class","fa-solid fa-reply svelte-8a7ih0"),o(l,"href",i=r[0].note.inReplyTo),o(l,"target","_blank"),o(l,"rel","noreferrer"),o(l,"class","svelte-8a7ih0"),c.a=null,o(e,"class","reply svelte-8a7ih0")},m(f,u){j(f,e,u),p(e,t),p(e,a),p(e,l),p(l,n),p(e,s),c.m(r[2],e)},p(f,u){u&1&&i!==(i=f[0].note.inReplyTo)&&o(l,"href",i),u&4&&c.p(f[2])},d(f){f&&_(e)}}}function rt(r){let e,t,a,l,n,i=r[3].name+"",s,c=r[3].others+"",f;return{c(){e=v("span"),t=v("i"),a=Z(` Reposted by
			`),l=v("a"),n=new de(!1),f=Z(c),this.h()},l(u){e=b(u,"SPAN",{class:!0});var d=w(e);t=b(d,"I",{class:!0}),w(t).forEach(_),a=$(d,` Reposted by
			`),l=b(d,"A",{href:!0,class:!0});var g=w(l);n=_e(g,!1),g.forEach(_),f=$(d,c),d.forEach(_),this.h()},h(){o(t,"class","fa-solid fa-retweet svelte-8a7ih0"),n.a=null,o(l,"href",s=r[3].url),o(l,"class","svelte-8a7ih0"),o(e,"class","repost svelte-8a7ih0")},m(u,d){j(u,e,d),p(e,t),p(e,a),p(e,l),n.m(i,l),p(e,f)},p(u,d){d&8&&i!==(i=u[3].name+"")&&n.p(i),d&8&&s!==(s=u[3].url)&&o(l,"href",s),d&8&&c!==(c=u[3].others+"")&&re(f,c)},d(u){u&&_(e)}}}function it(r){let e,t;return{c(){e=v("img"),this.h()},l(a){e=b(a,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ae(e.src,t=se(r[9],window.Buffer,r[0].actor.icon.url))||o(e,"src",t),o(e,"alt","Sender"),o(e,"class","svelte-8a7ih0")},m(a,l){j(a,e,l)},p(a,l){l&513&&!ae(e.src,t=se(a[9],window.Buffer,a[0].actor.icon.url))&&o(e,"src",t)},d(a){a&&_(e)}}}function nt(r){let e,t,a=le(r[9],r[0].actor.name||r[0].actor.preferredUsername,r[0].actor)+"",l,n,i=fe(r[0].actor)+"",s,c;return{c(){e=v("span"),t=new de(!1),l=U(),n=v("a"),s=Z(i),this.h()},l(f){e=b(f,"SPAN",{class:!0});var u=w(e);t=_e(u,!1),u.forEach(_),l=R(f),n=b(f,"A",{href:!0,class:!0});var d=w(n);s=$(d,i),d.forEach(_),this.h()},h(){t.a=null,o(e,"class","svelte-8a7ih0"),o(n,"href",c="/"+fe(r[0].actor)),o(n,"class","svelte-8a7ih0")},m(f,u){j(f,e,u),t.m(a,e),j(f,l,u),j(f,n,u),p(n,s)},p(f,u){u&513&&a!==(a=le(f[9],f[0].actor.name||f[0].actor.preferredUsername,f[0].actor)+"")&&t.p(a),u&1&&i!==(i=fe(f[0].actor)+"")&&re(s,i),u&1&&c!==(c="/"+fe(f[0].actor))&&o(n,"href",c)},d(f){f&&(_(e),_(l),_(n))}}}function Mt(r){let e,t;return e=new Vt({props:{links:r[0].note.ephemeralMetadata}}),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&1&&(n.links=a[0].note.ephemeralMetadata),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){F(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function zt(r){let e,t;return e=new _t({props:{note:r[0].note}}),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&1&&(n.note=a[0].note),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){F(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function st(r){let e,t,a,l=r[0].note.ephemeralLikes.length+"",n;return{c(){e=v("span"),t=v("i"),a=U(),n=Z(l),this.h()},l(i){e=b(i,"SPAN",{class:!0});var s=w(e);t=b(s,"I",{class:!0}),w(t).forEach(_),a=R(s),n=$(s,l),s.forEach(_),this.h()},h(){o(t,"class","fa-solid fa-star svelte-8a7ih0"),o(e,"class","likes svelte-8a7ih0")},m(i,s){j(i,e,s),p(e,t),p(e,a),p(e,n)},p(i,s){s&1&&l!==(l=i[0].note.ephemeralLikes.length+"")&&re(n,l)},d(i){i&&_(e)}}}function ot(r){let e,t,a,l=me(r[0])+"",n,i,s,c,f;return{c(){e=v("span"),t=v("i"),a=U(),n=Z(l),this.h()},l(u){e=b(u,"SPAN",{class:!0,"data-conversation":!0,"data-note":!0});var d=w(e);t=b(d,"I",{class:!0}),w(t).forEach(_),a=R(d),n=$(d,l),d.forEach(_),this.h()},h(){o(t,"class","fa-solid fa-comments svelte-8a7ih0"),o(e,"class","comments svelte-8a7ih0"),o(e,"data-conversation",i=r[0].note.conversation),o(e,"data-note",s=r[0].note.id)},m(u,d){j(u,e,d),p(e,t),p(e,a),p(e,n),c||(f=x(e,"click",ee(r[14])),c=!0)},p(u,d){d&1&&l!==(l=me(u[0])+"")&&re(n,l),d&1&&i!==(i=u[0].note.conversation)&&o(e,"data-conversation",i),d&1&&s!==(s=u[0].note.id)&&o(e,"data-note",s)},d(u){u&&_(e),c=!1,f()}}}function ct(r){let e,t,a,l,n,i,s,c,f,u,d,g,m,T,B,D;function O(k,E){return k[0].note.ephemeralAnnounced?Wt:Gt}let P=O(r),N=P(r);function H(k,E){return k[0].note.ephemeralLiked?Kt:Jt}let V=H(r),L=V(r),h=r[0].actor&&ft(r),I=r[0].note.id&&ut(r);return{c(){e=v("nav"),t=v("i"),u=U(),N.c(),d=U(),L.c(),g=U(),h&&h.c(),m=U(),I&&I.c(),this.h()},l(k){e=b(k,"NAV",{class:!0});var E=w(e);t=b(E,"I",{class:!0,"data-conversation":!0,"data-note":!0,"data-reply":!0,"data-display":!0,"data-url":!0,"data-username":!0,"data-recipient":!0}),w(t).forEach(_),u=R(E),N.l(E),d=R(E),L.l(E),g=R(E),h&&h.l(E),m=R(E),I&&I.l(E),E.forEach(_),this.h()},h(){o(t,"class","fa-solid fa-expand svelte-8a7ih0"),o(t,"data-conversation",a=r[0].note.conversation),o(t,"data-note",l=r[0].note.id),o(t,"data-reply",n=r[0].note.id),o(t,"data-display",i=r[0].actor.name||r[0].actor.preferredUsername),o(t,"data-url",s=r[0].actor.url),o(t,"data-username",c=r[0].actor.preferredUsername),o(t,"data-recipient",f=r[0].actor.id),o(e,"class","svelte-8a7ih0")},m(k,E){j(k,e,E),p(e,t),p(e,u),N.m(e,null),p(e,d),L.m(e,null),p(e,g),h&&h.m(e,null),p(e,m),I&&I.m(e,null),T=!0,B||(D=x(t,"click",ee(r[14])),B=!0)},p(k,E){(!T||E&1&&a!==(a=k[0].note.conversation))&&o(t,"data-conversation",a),(!T||E&1&&l!==(l=k[0].note.id))&&o(t,"data-note",l),(!T||E&1&&n!==(n=k[0].note.id))&&o(t,"data-reply",n),(!T||E&1&&i!==(i=k[0].actor.name||k[0].actor.preferredUsername))&&o(t,"data-display",i),(!T||E&1&&s!==(s=k[0].actor.url))&&o(t,"data-url",s),(!T||E&1&&c!==(c=k[0].actor.preferredUsername))&&o(t,"data-username",c),(!T||E&1&&f!==(f=k[0].actor.id))&&o(t,"data-recipient",f),P===(P=O(k))&&N?N.p(k,E):(N.d(1),N=P(k),N&&(N.c(),N.m(e,d))),V===(V=H(k))&&L?L.p(k,E):(L.d(1),L=V(k),L&&(L.c(),L.m(e,g))),k[0].actor?h?h.p(k,E):(h=ft(k),h.c(),h.m(e,m)):h&&(h.d(1),h=null),k[0].note.id?I?(I.p(k,E),E&1&&M(I,1)):(I=ut(k),I.c(),M(I,1),I.m(e,null)):I&&(oe(),F(I,1,1,()=>{I=null}),ce())},i(k){T||(M(I),T=!0)},o(k){F(I),T=!1},d(k){k&&_(e),N.d(),L.d(),h&&h.d(),I&&I.d(),B=!1,D()}}}function Gt(r){let e,t,a,l;return{c(){e=v("i"),this.h()},l(n){e=b(n,"I",{class:!0,"data-object":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-repeat svelte-8a7ih0"),o(e,"data-object",t=r[0].note.id)},m(n,i){j(n,e,i),a||(l=x(e,"click",ee(r[13])),a=!0)},p(n,i){i&1&&t!==(t=n[0].note.id)&&o(e,"data-object",t)},d(n){n&&_(e),a=!1,l()}}}function Wt(r){let e,t,a,l,n;return{c(){e=v("i"),this.h()},l(i){e=b(i,"I",{class:!0,"data-object":!0,"data-activity":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-repeat selected svelte-8a7ih0"),o(e,"data-object",t=r[0].note.id),o(e,"data-activity",a=r[0].note.ephemeralAnnounced)},m(i,s){j(i,e,s),l||(n=x(e,"click",ee(r[12])),l=!0)},p(i,s){s&1&&t!==(t=i[0].note.id)&&o(e,"data-object",t),s&1&&a!==(a=i[0].note.ephemeralAnnounced)&&o(e,"data-activity",a)},d(i){i&&_(e),l=!1,n()}}}function Jt(r){let e,t,a,l,n;return{c(){e=v("i"),this.h()},l(i){e=b(i,"I",{class:!0,"data-actor":!0,"data-object":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-star svelte-8a7ih0"),o(e,"data-actor",t=r[0].note.attributedTo),o(e,"data-object",a=r[0].note.id)},m(i,s){j(i,e,s),l||(n=x(e,"click",ee(r[11])),l=!0)},p(i,s){s&1&&t!==(t=i[0].note.attributedTo)&&o(e,"data-actor",t),s&1&&a!==(a=i[0].note.id)&&o(e,"data-object",a)},d(i){i&&_(e),l=!1,n()}}}function Kt(r){let e,t,a,l,n,i;return{c(){e=v("i"),this.h()},l(s){e=b(s,"I",{class:!0,"data-actor":!0,"data-object":!0,"data-activity":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-star selected svelte-8a7ih0"),o(e,"data-actor",t=r[0].note.attributedTo),o(e,"data-object",a=r[0].note.id),o(e,"data-activity",l=r[0].note.ephemeralLiked)},m(s,c){j(s,e,c),n||(i=x(e,"click",ee(r[10])),n=!0)},p(s,c){c&1&&t!==(t=s[0].note.attributedTo)&&o(e,"data-actor",t),c&1&&a!==(a=s[0].note.id)&&o(e,"data-object",a),c&1&&l!==(l=s[0].note.ephemeralLiked)&&o(e,"data-activity",l)},d(s){s&&_(e),n=!1,i()}}}function ft(r){let e,t,a,l,n,i,s,c,f;return{c(){e=v("i"),this.h()},l(u){e=b(u,"I",{class:!0,"data-reply":!0,"data-display":!0,"data-url":!0,"data-username":!0,"data-recipient":!0,"data-conversation":!0}),w(e).forEach(_),this.h()},h(){o(e,"class","fa-solid fa-reply svelte-8a7ih0"),o(e,"data-reply",t=r[0].note.id),o(e,"data-display",a=r[0].actor.name||r[0].actor.preferredUsername),o(e,"data-url",l=r[0].actor.url),o(e,"data-username",n=r[0].actor.preferredUsername),o(e,"data-recipient",i=r[0].actor.id),o(e,"data-conversation",s=r[0].note.conversation)},m(u,d){j(u,e,d),c||(f=x(e,"click",r[15]),c=!0)},p(u,d){d&1&&t!==(t=u[0].note.id)&&o(e,"data-reply",t),d&1&&a!==(a=u[0].actor.name||u[0].actor.preferredUsername)&&o(e,"data-display",a),d&1&&l!==(l=u[0].actor.url)&&o(e,"data-url",l),d&1&&n!==(n=u[0].actor.preferredUsername)&&o(e,"data-username",n),d&1&&i!==(i=u[0].actor.id)&&o(e,"data-recipient",i),d&1&&s!==(s=u[0].note.conversation)&&o(e,"data-conversation",s)},d(u){u&&_(e),c=!1,f()}}}function ut(r){let e,t,a,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Qt,then:Ft,catch:qt,value:20,blocks:[,,,]};return Me(t=r[9]?.get_ap_id(),l),{c(){e=te(),l.block.c()},l(n){e=te(),l.block.l(n)},m(n,i){j(n,e,i),l.block.m(n,l.anchor=i),l.mount=()=>e.parentNode,l.anchor=e,a=!0},p(n,i){r=n,l.ctx=r,i&512&&t!==(t=r[9]?.get_ap_id())&&Me(t,l)||Et(l,r,i)},i(n){a||(M(l.block),a=!0)},o(n){for(let i=0;i<3;i+=1){const s=l.blocks[i];F(s)}a=!1},d(n){n&&_(e),l.block.d(n),l.token=null,l=null}}}function qt(r){return{c:G,l:G,m:G,p:G,i:G,o:G,d:G}}function Ft(r){let e,t;return e=new Ht({props:{remove:r[6],refresh:r[5],object:r[0].note.id,owner:r[20]==r[0].note.attributedTo}}),{c(){ge(e.$$.fragment)},l(a){ke(e.$$.fragment,a)},m(a,l){Ee(e,a,l),t=!0},p(a,l){const n={};l&64&&(n.remove=a[6]),l&32&&(n.refresh=a[5]),l&1&&(n.object=a[0].note.id),l&513&&(n.owner=a[20]==a[0].note.attributedTo),e.$set(n)},i(a){t||(M(e.$$.fragment,a),t=!0)},o(a){F(e.$$.fragment,a),t=!1},d(a){we(e,a)}}}function Qt(r){return{c:G,l:G,m:G,p:G,i:G,o:G,d:G}}function Xt(r){let e,t,a,l,n,i,s,c,f,u,d=le(r[9],r[0].note.content||"",r[0].note)+"",g,m,T,B,D,O,P,N,H,V=De(new Date(String(r[0].published)).getTime())+"",L,h,I,k,E,A,C,he,W=r[2]&&lt(r),J=r[3]&&rt(r),K=r[0].actor&&r[0].actor.icon&&it(r),q=r[0].actor&&nt(r);const Ce=[zt,Mt],ie=[];function Ue(S,y){return S[0].note.attachment&&S[0].note.attachment.length>0?0:S[0].note.ephemeralMetadata&&S[0].note.ephemeralMetadata.length?1:-1}~(m=Ue(r))&&(T=ie[m]=Ce[m](r));let Q=r[0].note.ephemeralLikes?.length&&st(r),X=r[0].replies?.size&&ot(r),z=r[1]&&ct(r);return{c(){e=v("article"),W&&W.c(),t=U(),J&&J.c(),a=U(),l=v("header"),n=v("div"),K&&K.c(),i=U(),s=v("address"),q&&q.c(),c=U(),f=v("section"),u=new de(!1),g=U(),T&&T.c(),B=U(),D=v("div"),Q&&Q.c(),O=U(),X&&X.c(),P=U(),N=v("time"),H=v("a"),L=Z(V),k=U(),z&&z.c(),this.h()},l(S){e=b(S,"ARTICLE",{"data-conversation":!0,class:!0});var y=w(e);W&&W.l(y),t=R(y),J&&J.l(y),a=R(y),l=b(y,"HEADER",{class:!0});var ne=w(l);n=b(ne,"DIV",{class:!0});var Re=w(n);K&&K.l(Re),Re.forEach(_),i=R(ne),s=b(ne,"ADDRESS",{class:!0});var Be=w(s);q&&q.l(Be),Be.forEach(_),ne.forEach(_),c=R(y),f=b(y,"SECTION",{class:!0});var Ve=w(f);u=_e(Ve,!1),Ve.forEach(_),g=R(y),T&&T.l(y),B=R(y),D=b(y,"DIV",{class:!0});var Ie=w(D);Q&&Q.l(Ie),O=R(Ie),X&&X.l(Ie),Ie.forEach(_),P=R(y),N=b(y,"TIME",{datetime:!0,class:!0});var Oe=w(N);H=b(Oe,"A",{href:!0,target:!0,rel:!0,class:!0});var Pe=w(H);L=$(Pe,V),Pe.forEach(_),Oe.forEach(_),k=R(y),z&&z.l(y),y.forEach(_),this.h()},h(){o(n,"class","svelte-8a7ih0"),o(s,"class","svelte-8a7ih0"),o(l,"class","svelte-8a7ih0"),u.a=null,o(f,"class","svelte-8a7ih0"),o(D,"class","activity svelte-8a7ih0"),o(H,"href",h=r[0].note.url),o(H,"target",r[7]),o(H,"rel",r[8]),o(H,"class","svelte-8a7ih0"),o(N,"datetime",I=r[0].published),o(N,"class","svelte-8a7ih0"),o(e,"data-conversation",E=r[0].note.conversation),o(e,"class","svelte-8a7ih0")},m(S,y){j(S,e,y),W&&W.m(e,null),p(e,t),J&&J.m(e,null),p(e,a),p(e,l),p(l,n),K&&K.m(n,null),p(l,i),p(l,s),q&&q.m(s,null),p(e,c),p(e,f),u.m(d,f),p(e,g),~m&&ie[m].m(e,null),p(e,B),p(e,D),Q&&Q.m(D,null),p(D,O),X&&X.m(D,null),p(e,P),p(e,N),p(N,H),p(H,L),p(e,k),z&&z.m(e,null),A=!0,C||(he=bt(r[4].call(null,e)),C=!0)},p(S,[y]){S[2]?W?W.p(S,y):(W=lt(S),W.c(),W.m(e,t)):W&&(W.d(1),W=null),S[3]?J?J.p(S,y):(J=rt(S),J.c(),J.m(e,a)):J&&(J.d(1),J=null),S[0].actor&&S[0].actor.icon?K?K.p(S,y):(K=it(S),K.c(),K.m(n,null)):K&&(K.d(1),K=null),S[0].actor?q?q.p(S,y):(q=nt(S),q.c(),q.m(s,null)):q&&(q.d(1),q=null),(!A||y&513)&&d!==(d=le(S[9],S[0].note.content||"",S[0].note)+"")&&u.p(d);let ne=m;m=Ue(S),m===ne?~m&&ie[m].p(S,y):(T&&(oe(),F(ie[ne],1,1,()=>{ie[ne]=null}),ce()),~m?(T=ie[m],T?T.p(S,y):(T=ie[m]=Ce[m](S),T.c()),M(T,1),T.m(e,B)):T=null),S[0].note.ephemeralLikes?.length?Q?Q.p(S,y):(Q=st(S),Q.c(),Q.m(D,O)):Q&&(Q.d(1),Q=null),S[0].replies?.size?X?X.p(S,y):(X=ot(S),X.c(),X.m(D,null)):X&&(X.d(1),X=null),(!A||y&1)&&V!==(V=De(new Date(String(S[0].published)).getTime())+"")&&re(L,V),(!A||y&1&&h!==(h=S[0].note.url))&&o(H,"href",h),(!A||y&128)&&o(H,"target",S[7]),(!A||y&256)&&o(H,"rel",S[8]),(!A||y&1&&I!==(I=S[0].published))&&o(N,"datetime",I),S[1]?z?(z.p(S,y),y&2&&M(z,1)):(z=ct(S),z.c(),M(z,1),z.m(e,null)):z&&(oe(),F(z,1,1,()=>{z=null}),ce()),(!A||y&1&&E!==(E=S[0].note.conversation))&&o(e,"data-conversation",E)},i(S){A||(M(T),M(z),A=!0)},o(S){F(T),F(z),A=!1},d(S){S&&_(e),W&&W.d(),J&&J.d(),K&&K.d(),q&&q.d(),~m&&ie[m].d(),Q&&Q.d(),X&&X.d(),z&&z.d(),C=!1,he()}}}function Yt(r,e,t){let a,l,n;ue(r,kt,h=>t(17,l=h)),ue(r,Te,h=>t(16,n=h));const i=ye(),s=ye();Ne(async()=>{const{Buffer:h}=await Le(()=>import("./index.aMiLl7Je.js").then(I=>I.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=h});let{note:c}=e,{username:f}=e,{replyToHeader:u}=e,{announceHeader:d}=e,{renderAction:g}=e,{refresh:m}=e,{remove:T}=e;function B(h){const I=String(h.target.dataset.object),k=String(h.target.dataset.actor),E=String(h.target.dataset.activity);console.debug(`UNDOING ${E}`),a&&a.send_unlike(k,I,E).then(A=>{console.debug("UNLIKE SENT"),t(0,c.note.ephemeralLiked=null,c),t(0,c)})}function D(h){const I=String(h.target.dataset.object),k=String(h.target.dataset.actor);a&&a.send_like(k,I).then(E=>{console.debug(`LIKE SENT ${E}`),t(0,c.note.ephemeralLiked=E,c),t(0,c)})}function O(h){const I=String(h.target.dataset.object),k=String(h.target.dataset.activity);a&&I?a.send_unannounce(I,k).then(E=>{console.debug("UNANNOUNCE SENT"),t(0,c.note.ephemeralAnnounced=null,c),t(0,c)}):console.error("OBJECT INVALID")}function P(h){const I=String(h.target.dataset.object);a&&I?a.send_announce(I).then(k=>{console.debug(`ANNOUNCE SENT ${k}`),t(0,c.note.ephemeralAnnounced=k,c),t(0,c)}):console.error("OBJECT INVALID")}function N(h){s("noteSelect",{replyToConversation:h.target.dataset.conversation,replyToRecipient:h.target.dataset.recipient,replyToNote:h.target.dataset.note,replyToDisplay:le(a,h.target.dataset.display,c.actor),replyToUrl:h.target.dataset.url,replyToUsername:h.target.dataset.username,openAside:!1})}function H(h){i("replyTo",{replyToRecipient:h.target.dataset.recipient,replyToNote:h.target.dataset.reply,replyToDisplay:le(a,h.target.dataset.display,c.actor),replyToConversation:h.target.dataset.conversation,replyToUrl:h.target.dataset.url,replyToUsername:h.target.dataset.username,openAside:!0})}let V=null,L=null;return c&&c.note&&c.note.url&&!gt(l.url.toString(),c.note.url)&&(V="_blank",L="noreferrer"),r.$$set=h=>{"note"in h&&t(0,c=h.note),"username"in h&&t(1,f=h.username),"replyToHeader"in h&&t(2,u=h.replyToHeader),"announceHeader"in h&&t(3,d=h.announceHeader),"renderAction"in h&&t(4,g=h.renderAction),"refresh"in h&&t(5,m=h.refresh),"remove"in h&&t(6,T=h.remove)},r.$$.update=()=>{r.$$.dirty&65536&&t(9,a=n)},[c,f,u,d,g,m,T,V,L,a,B,D,O,P,N,H,n]}class ia extends ve{constructor(e){super(),be(this,e,Yt,Xt,pe,{note:0,username:1,replyToHeader:2,announceHeader:3,renderAction:4,refresh:5,remove:6})}}export{ia as A,Ut as R,Me as h,Et as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./index.aMiLl7Je.js","./_commonjsHelpers.5-cIlDoe.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}