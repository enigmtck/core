import{_ as Al}from"../chunks/preload-helper.0HuHagjb.js";import{s as Il,H as Ze,a as H,f as k,c as U,g as y,h as S,d,j as h,i as I,w as Ae,o as Sl,e as pe,I as Ol,v as b,D as W,E as se,p as Me,J as Ll,G as E,l as fe,m as ue,F as Fe,C as Ne,n as je,k as Ml,K as Ke,L as Ge,u as ce,M as We,N as Pl}from"../chunks/scheduler.tnyNm5U0.js";import{S as Fl,i as Hl,a as L,g as ge,t as P,c as ve,b as De,d as Be,m as Pe,e as Re}from"../chunks/index.R_ElRwcJ.js";import{p as Rl}from"../chunks/stores.OapmKNu7.js";import{C as Vl,s as Jl,a as jl}from"../chunks/Compose.qy77mOn2.js";import{a as Ul,e as Cl}from"../chunks/stores.bABpd-zC.js";import{c as He,i as Te,D as Kl,g as $e}from"../chunks/common.zKe3wBQm.js";import{h as Ue,u as Dl,R as Gl,A as Wl}from"../chunks/Article.yc8txHN0.js";import{e as Ce}from"../chunks/each.-oqiv04n.js";import"../chunks/paths.QxYarMjf.js";function xe(i,e,n){const s=i.slice();return s[29]=e[n],s}function el(i,e,n){const s=i.slice();return s[32]=e[n],s}function ll(i){let e,n,s={sender:et};return e=new Vl({props:s}),i[15](e),{c(){De(e.$$.fragment)},l(l){Be(e.$$.fragment,l)},m(l,t){Pe(e,l,t),n=!0},p(l,t){const o={};e.$set(o)},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){P(e.$$.fragment,l),n=!1},d(l){i[15](null),Re(e,l)}}}function tl(i){let e,n,s,l=Ce(Array.from(i[3].values()).sort(He).reverse()),t=[];for(let a=0;a<l.length;a+=1)t[a]=ol(xe(i,l,a));const o=a=>P(t[a],1,1,()=>{t[a]=null});let r=i[1]&&rl(i);return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=H(),r&&r.c(),n=pe()},l(a){for(let m=0;m<t.length;m+=1)t[m].l(a);e=U(a),r&&r.l(a),n=pe()},m(a,m){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(a,m);I(a,e,m),r&&r.m(a,m),I(a,n,m),s=!0},p(a,m){if(m[0]&4009){l=Ce(Array.from(a[3].values()).sort(He).reverse());let f;for(f=0;f<l.length;f+=1){const _=xe(a,l,f);t[f]?(t[f].p(_,m),L(t[f],1)):(t[f]=ol(_),t[f].c(),L(t[f],1),t[f].m(e.parentNode,e))}for(ge(),f=l.length;f<t.length;f+=1)o(f);ve()}a[1]?r?r.p(a,m):(r=rl(a),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i(a){if(!s){for(let m=0;m<l.length;m+=1)L(t[m]);s=!0}},o(a){t=t.filter(Boolean);for(let m=0;m<t.length;m+=1)P(t[m]);s=!1},d(a){a&&(d(e),d(n)),Ol(t,a),r&&r.d(a)}}}function nl(i){let e,n,s,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Zl,then:zl,catch:ql,value:35,blocks:[,,,]};Ue(e=i[9](i[29].note),t);let o=i[29].note.id==al&&i[29].replies?.size&&sl(i);return{c(){t.block.c(),n=H(),o&&o.c(),s=pe()},l(r){t.block.l(r),n=U(r),o&&o.l(r),s=pe()},m(r,a){t.block.m(r,t.anchor=a),t.mount=()=>n.parentNode,t.anchor=n,I(r,n,a),o&&o.m(r,a),I(r,s,a),l=!0},p(r,a){i=r,t.ctx=i,a[0]&8&&e!==(e=i[9](i[29].note))&&Ue(e,t)||Dl(t,i,a),i[29].note.id==al&&i[29].replies?.size?o?(o.p(i,a),a[0]&8&&L(o,1)):(o=sl(i),o.c(),L(o,1),o.m(s.parentNode,s)):o&&(ge(),P(o,1,1,()=>{o=null}),ve())},i(r){l||(L(t.block),L(o),l=!0)},o(r){for(let a=0;a<3;a+=1){const m=t.blocks[a];P(m)}P(o),l=!1},d(r){r&&(d(n),d(s)),t.block.d(r),t.token=null,t=null,o&&o.d(r)}}}function ql(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function zl(i){let e,n,s,l={ctx:i,current:null,token:null,hasCatch:!1,pending:Xl,then:Ql,catch:Yl,value:36,blocks:[,,,]};return Ue(n=i[10](i[29].note),l),{c(){e=pe(),l.block.c()},l(t){e=pe(),l.block.l(t)},m(t,o){I(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e,s=!0},p(t,o){i=t,l.ctx=i,o[0]&8&&n!==(n=i[10](i[29].note))&&Ue(n,l)||Dl(l,i,o)},i(t){s||(L(l.block),s=!0)},o(t){for(let o=0;o<3;o+=1){const r=l.blocks[o];P(r)}s=!1},d(t){t&&d(e),l.block.d(t),l.token=null,l=null}}}function Yl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function Ql(i){let e,n;return e=new Wl({props:{remove:i[8],refresh:i[7],note:i[29],username:i[11],replyToHeader:i[35],announceHeader:i[36],renderAction:i[5]}}),e.$on("reply_to",function(){Ll(i[0].handleReplyToMessage)&&i[0].handleReplyToMessage.apply(this,arguments)}),e.$on("note_select",Bl),{c(){De(e.$$.fragment)},l(s){Be(e.$$.fragment,s)},m(s,l){Pe(e,s,l),n=!0},p(s,l){i=s;const t={};l[0]&8&&(t.note=i[29]),l[0]&8&&(t.replyToHeader=i[35]),l[0]&8&&(t.announceHeader=i[36]),e.$set(t)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Re(e,s)}}}function Xl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function Zl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function sl(i){let e,n,s=Ce(Array.from(i[29].replies.values()).sort(He)),l=[];for(let o=0;o<s.length;o+=1)l[o]=il(el(i,s,o));const t=o=>P(l[o],1,1,()=>{l[o]=null});return{c(){e=k("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0});var r=S(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(d),this.h()},h(){h(e,"class","replies")},m(o,r){I(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);n=!0},p(o,r){if(r[0]&2057){s=Ce(Array.from(o[29].replies.values()).sort(He));let a;for(a=0;a<s.length;a+=1){const m=el(o,s,a);l[a]?(l[a].p(m,r),L(l[a],1)):(l[a]=il(m),l[a].c(),L(l[a],1),l[a].m(e,null))}for(ge(),a=s.length;a<l.length;a+=1)t(a);ve()}},i(o){if(!n){for(let r=0;r<s.length;r+=1)L(l[r]);n=!0}},o(o){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)P(l[r]);n=!1},d(o){o&&d(e),Ol(l,o)}}}function il(i){let e,n;return e=new Gl({props:{note:i[32],username:i[11]}}),e.$on("reply_to",function(){Ll(i[0].handleReplyToMessage)&&i[0].handleReplyToMessage.apply(this,arguments)}),e.$on("note_select",Bl),{c(){De(e.$$.fragment)},l(s){Be(e.$$.fragment,s)},m(s,l){Pe(e,s,l),n=!0},p(s,l){i=s;const t={};l[0]&8&&(t.note=i[32]),e.$set(t)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Re(e,s)}}}function ol(i){let e,n,s=i[29].note&&nl(i);return{c(){s&&s.c(),e=pe()},l(l){s&&s.l(l),e=pe()},m(l,t){s&&s.m(l,t),I(l,e,t),n=!0},p(l,t){l[29].note?s?(s.p(l,t),t[0]&8&&L(s,1)):(s=nl(l),s.c(),L(s,1),s.m(e.parentNode,e)):s&&(ge(),P(s,1,1,()=>{s=null}),ve())},i(l){n||(L(s),n=!0)},o(l){P(s),n=!1},d(l){l&&d(e),s&&s.d(l)}}}function rl(i){let e,n,s,l;return{c(){e=k("button"),n=k("i"),this.h()},l(t){e=y(t,"BUTTON",{class:!0});var o=S(e);n=y(o,"I",{class:!0}),S(n).forEach(d),o.forEach(d),this.h()},h(){h(n,"class","fa-solid fa-ellipsis"),e.disabled=i[2],h(e,"class","svelte-eycy8b")},m(t,o){I(t,e,o),b(e,n),s||(l=W(e,"click",se(i[16])),s=!0)},p(t,o){o[0]&4&&(e.disabled=t[2])},d(t){t&&d(e),s=!1,l()}}}function $l(i){let e,n,s,l=i[4]&&ll(i),t=i[4]&&tl(i);return{c(){l&&l.c(),e=H(),n=k("main"),t&&t.c(),this.h()},l(o){l&&l.l(o),e=U(o),n=y(o,"MAIN",{class:!0});var r=S(n);t&&t.l(r),r.forEach(d),this.h()},h(){h(n,"class","svelte-eycy8b")},m(o,r){l&&l.m(o,r),I(o,e,r),I(o,n,r),t&&t.m(n,null),s=!0},p(o,r){o[4]?l?(l.p(o,r),r[0]&16&&L(l,1)):(l=ll(o),l.c(),L(l,1),l.m(e.parentNode,e)):l&&(ge(),P(l,1,1,()=>{l=null}),ve()),o[4]?t?(t.p(o,r),r[0]&16&&L(t,1)):(t=tl(o),t.c(),L(t,1),t.m(n,null)):t&&(ge(),P(t,1,1,()=>{t=null}),ve())},i(o){s||(L(l),L(t),s=!0)},o(o){P(l),P(t),s=!1},d(o){o&&(d(e),d(n)),l&&l.d(o),t&&t.d()}}}let al=null;function xl(i){for(let e of i)if(e.isIntersecting&&e.target){let n=e.target;if(n.dataset){let s=n.dataset;console.log(s.conversation)}}}async function et(i,e,n,s,l){return!0}function fl(i){if(i)try{return JSON.parse(i)}catch{return console.error("UNABLE TO PARSE PROFILE"),console.debug(i),null}else return console.error("UNABLE TO PARSE NULL OR UNDEFINED"),null}function Bl(){}function lt(i,e,n){let s,l,t,o;Ae(i,Ul,u=>n(19,t=u)),Ae(i,Cl,u=>n(14,o=u));let r,{local:a}=e,{handle:m}=e,f=null;function _(u){f&&f.observe(u)}Sl(async()=>{const{Buffer:u}=await Al(()=>import("../chunks/index.aMiLl7Je.js").then(v=>v.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=u,f=new IntersectionObserver(xl,{root:null,threshold:.3})}),console.debug(`HANDLE ${m}`);async function N(u){const v=u.orderedItems;if(console.debug(v),v){for(const c of v)if(c.type==="Create")he(c.object);else if(c.type==="Announce"){let A=await s?.get_note(String(c.object));if(A){const B=JSON.parse(A);console.debug(c),c.actor&&(B.ephemeralAnnounces=[c.actor]),he(B)}}}n(1,le=u.next||null),$=u.prev||null}async function z(u,v){n(3,l=new Map);let c=s?.get_state();if(c){let A=c.get_server_url();if(v&&u){const B=await s?.get_outbox(`${A}/user/${u}/outbox?page=true`);if(B){const Y=JSON.parse(B);console.debug(Y),N(Y).then(()=>{n(2,V=!1)})}}else s?.get_remote_outbox(`@${u}`).then(B=>{if(B){const Y=JSON.parse(B);s?.get_remote_outbox(`@${u}`,Y.first).then(re=>{if(re){const _e=JSON.parse(re);N(_e).then(()=>{n(2,V=!1)})}})}})}}async function ee(u){let v=null;!u&&le?v=le:$&&(v=$),v&&(n(2,V=!0),a?s?.get_outbox(v).then(c=>{if(c){const A=JSON.parse(c);N(A).then(()=>{n(2,V=!1)})}}):s?.get_remote_outbox(`@${m}`,v).then(c=>{if(c){const A=JSON.parse(c);N(A).then(()=>{n(2,V=!1)})}}))}function ie(){console.debug("REFRESH"),l.clear(),z(m,a).then(u=>{console.log("LOADED")})}function oe(u){l.delete(u),n(3,l)}async function he(u){u.ephemeralActors&&u.ephemeralActors.forEach(c=>{c.id&&M.set(c.id,JSON.stringify(c))}),u.ephemeralLikes&&(console.debug("EPHEMERAL LIKES"),console.debug(u.ephemeralLikes));const v=await Q(u.attributedTo);if(v){let c=JSON.parse(v);const A=new Kl(c,u);l.get(String(u.id))||(l.set(String(u.id),A),Z.set(String(u.id),[String(u.id)]))}n(3,l)}async function me(u){if(u.inReplyTo){const v=await X(u.inReplyTo);if(v){const c=JSON.parse(String(v)),A=await Q(c.attributedTo),B=fl(A);return B?Te(s,B.name||B.preferredUsername,B):null}else return null}else return null}async function J(u){if(u.ephemeralAnnounces){const v=await Q(u.ephemeralAnnounces[0]);let c="";if(u.ephemeralAnnounces.length==2?c=` and ${u.ephemeralAnnounces.length-1} other`:u.ephemeralAnnounces.length>2&&(c=` and ${u.ephemeralAnnounces.length-1} others`),v){const A=fl(v);if(A){const B=Te(s,A.name||A.preferredUsername,A);return{url:A.url,name:B,others:c}}else return null}else return null}else return null}async function Q(u){return s&&!M.has(u)&&M.set(u,await s.get_actor(u)),M.get(u)}async function X(u){return s&&!M.has(u)&&M.set(u,await s.get_note(u)),M.get(u)}let Z=new Map,M=new Map,q=t.username,le=null,$=null,V=!0;function te(u){Me[u?"unshift":"push"](()=>{r=u,n(0,r)})}const de=()=>ee(!1);return i.$$set=u=>{"local"in u&&n(12,a=u.local),"handle"in u&&n(13,m=u.handle)},i.$$.update=()=>{i.$$.dirty[0]&16384&&n(4,s=o),i.$$.dirty[0]&12288&&z(m,a).then(()=>{console.debug("RELOADED")})},n(3,l=new Map),[r,le,V,l,s,_,ee,ie,oe,me,J,q,a,m,o,te,de]}class tt extends Fl{constructor(e){super(),Hl(this,e,lt,$l,Il,{local:12,handle:13},null,[-1,-1])}get local(){return this.$$.ctx[12]}set local(e){this.$$set({local:e}),Ze()}get handle(){return this.$$.ctx[13]}set handle(e){this.$$set({handle:e}),Ze()}}function ul(i){let e,n,s,l,t,o,r,a,m,f,_,N,z,ee=$e(i[10])+"",ie,oe,he,me,J,Q,X,Z,M,q,le,$,V,te,de,u,v,c,A,B,Y=(i[10].ephemeralLeaders?.length||i[8])+"",re,_e,ae,Ee,be=(i[10].ephemeralFollowers?.length||i[7])+"",ke,ye,p,w,T=i[13]&&cl(i),F=i[10].image&&hl(i),D=i[13]&&ml(i),C=i[10].name&&dl(i),R=i[13]&&pl(i),j=i[5]&&Tl(i),K=i[13]&&!i[5]&&El(i),G=!i[13]&&Nl(i),x=i[24]===i[23].Posts&&it(i);return{c(){e=k("div"),n=k("div"),T&&T.c(),s=H(),F&&F.c(),l=H(),t=k("div"),o=k("div"),D&&D.c(),r=H(),a=k("img"),f=H(),_=k("div"),C&&C.c(),N=H(),z=k("a"),ie=fe(ee),he=H(),R&&R.c(),me=H(),J=k("div"),j&&j.c(),Q=H(),K&&K.c(),X=H(),G&&G.c(),Z=H(),M=k("div"),q=k("button"),le=fe("Articles"),$=H(),V=k("button"),te=fe("Posts"),de=H(),u=k("button"),v=fe("Gallery"),c=H(),A=k("button"),B=fe("Following • "),re=fe(Y),_e=H(),ae=k("button"),Ee=fe("Followers • "),ke=fe(be),ye=H(),p=k("section"),x&&x.c(),this.h()},l(g){e=y(g,"DIV",{class:!0});var O=S(e);n=y(O,"DIV",{class:!0});var Ie=S(n);T&&T.l(Ie),s=U(Ie),F&&F.l(Ie),Ie.forEach(d),l=U(O),t=y(O,"DIV",{class:!0});var Se=S(t);o=y(Se,"DIV",{class:!0});var Oe=S(o);D&&D.l(Oe),r=U(Oe),a=y(Oe,"IMG",{src:!0,alt:!0,class:!0}),Oe.forEach(d),f=U(Se),_=y(Se,"DIV",{class:!0});var Le=S(_);C&&C.l(Le),N=U(Le),z=y(Le,"A",{href:!0,class:!0});var qe=S(z);ie=ue(qe,ee),qe.forEach(d),Le.forEach(d),Se.forEach(d),he=U(O),R&&R.l(O),me=U(O),J=y(O,"DIV",{class:!0});var we=S(J);j&&j.l(we),Q=U(we),K&&K.l(we),X=U(we),G&&G.l(we),we.forEach(d),Z=U(O),M=y(O,"DIV",{class:!0});var ne=S(M);q=y(ne,"BUTTON",{class:!0});var ze=S(q);le=ue(ze,"Articles"),ze.forEach(d),$=U(ne),V=y(ne,"BUTTON",{class:!0});var Ye=S(V);te=ue(Ye,"Posts"),Ye.forEach(d),de=U(ne),u=y(ne,"BUTTON",{class:!0});var Qe=S(u);v=ue(Qe,"Gallery"),Qe.forEach(d),c=U(ne),A=y(ne,"BUTTON",{class:!0});var Ve=S(A);B=ue(Ve,"Following • "),re=ue(Ve,Y),Ve.forEach(d),_e=U(ne),ae=y(ne,"BUTTON",{class:!0});var Je=S(ae);Ee=ue(Je,"Followers • "),ke=ue(Je,be),Je.forEach(d),ne.forEach(d),O.forEach(d),ye=U(g),p=y(g,"SECTION",{class:!0});var Xe=S(p);x&&x.l(Xe),Xe.forEach(d),this.h()},h(){h(n,"class","banner svelte-1u63h0a"),Fe(a.src,m=i[10].icon?.url)||h(a,"src",m),h(a,"alt","Avatar"),h(a,"class","svelte-1u63h0a"),h(o,"class","avatar svelte-1u63h0a"),h(z,"href",oe=i[10].url),h(z,"class","svelte-1u63h0a"),h(_,"class","details svelte-1u63h0a"),h(t,"class","identity svelte-1u63h0a"),h(J,"class","summary svelte-1u63h0a"),h(q,"class",Ne(i[24]===i[23].Articles?"selected":"")+" svelte-1u63h0a"),h(V,"class",Ne(i[24]===i[23].Posts?"selected":"")+" svelte-1u63h0a"),h(u,"class",Ne(i[24]===i[23].Gallery?"selected":"")+" svelte-1u63h0a"),h(A,"class",Ne(i[24]===i[23].Following?"selected":"")+" svelte-1u63h0a"),h(ae,"class",Ne(i[24]===i[23].Followers?"selected":"")+" svelte-1u63h0a"),h(M,"class","tabs svelte-1u63h0a"),h(e,"class","profile svelte-1u63h0a"),h(p,"class","svelte-1u63h0a")},m(g,O){I(g,e,O),b(e,n),T&&T.m(n,null),b(n,s),F&&F.m(n,null),b(e,l),b(e,t),b(t,o),D&&D.m(o,null),b(o,r),b(o,a),b(t,f),b(t,_),C&&C.m(_,null),b(_,N),b(_,z),b(z,ie),b(e,he),R&&R.m(e,null),b(e,me),b(e,J),j&&j.m(J,null),b(J,Q),K&&K.m(J,null),b(J,X),G&&G.m(J,null),b(e,Z),b(e,M),b(M,q),b(q,le),b(M,$),b(M,V),b(V,te),b(M,de),b(M,u),b(u,v),b(M,c),b(M,A),b(A,B),b(A,re),b(M,_e),b(M,ae),b(ae,Ee),b(ae,ke),I(g,ye,O),I(g,p,O),x&&x.m(p,null),w=!0},p(g,O){g[13]?T?T.p(g,O):(T=cl(g),T.c(),T.m(n,s)):T&&(T.d(1),T=null),g[10].image?F?F.p(g,O):(F=hl(g),F.c(),F.m(n,null)):F&&(F.d(1),F=null),g[13]?D?D.p(g,O):(D=ml(g),D.c(),D.m(o,r)):D&&(D.d(1),D=null),(!w||O[0]&1024&&!Fe(a.src,m=g[10].icon?.url))&&h(a,"src",m),g[10].name?C?C.p(g,O):(C=dl(g),C.c(),C.m(_,N)):C&&(C.d(1),C=null),(!w||O[0]&1024)&&ee!==(ee=$e(g[10])+"")&&je(ie,ee),(!w||O[0]&1024&&oe!==(oe=g[10].url))&&h(z,"href",oe),g[13]?R?R.p(g,O):(R=pl(g),R.c(),R.m(e,me)):R&&(R.d(1),R=null),g[5]?j?j.p(g,O):(j=Tl(g),j.c(),j.m(J,Q)):j&&(j.d(1),j=null),g[13]&&!g[5]?K?K.p(g,O):(K=El(g),K.c(),K.m(J,X)):K&&(K.d(1),K=null),g[13]?G&&(G.d(1),G=null):G?G.p(g,O):(G=Nl(g),G.c(),G.m(J,null)),(!w||O[0]&1280)&&Y!==(Y=(g[10].ephemeralLeaders?.length||g[8])+"")&&je(re,Y),(!w||O[0]&1152)&&be!==(be=(g[10].ephemeralFollowers?.length||g[7])+"")&&je(ke,be),g[24]===g[23].Posts&&x.p(g,O)},i(g){w||(L(x),w=!0)},o(g){P(x),w=!1},d(g){g&&(d(e),d(ye),d(p)),T&&T.d(),F&&F.d(),D&&D.d(),C&&C.d(),R&&R.d(),j&&j.d(),K&&K.d(),G&&G.d(),x&&x.d()}}}function cl(i){let e,n,s;return{c(){e=k("input"),this.h()},l(l){e=y(l,"INPUT",{style:!0,type:!0,accept:!0}),this.h()},h(){Ml(e,"display","none"),h(e,"type","file"),h(e,"accept",".jpg, .jpeg, .png")},m(l,t){I(l,e,t),i[27](e),n||(s=W(e,"change",i[26]),n=!0)},p:E,d(l){l&&d(e),i[27](null),n=!1,s()}}}function hl(i){let e,n;return{c(){e=k("img"),this.h()},l(s){e=y(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,n=i[10].image.url)||h(e,"src",n),h(e,"alt","Banner"),h(e,"class","svelte-1u63h0a")},m(s,l){I(s,e,l)},p(s,l){l[0]&1024&&!Fe(e.src,n=s[10].image.url)&&h(e,"src",n)},d(s){s&&d(e)}}}function ml(i){let e,n,s;return{c(){e=k("input"),this.h()},l(l){e=y(l,"INPUT",{style:!0,type:!0,accept:!0}),this.h()},h(){Ml(e,"display","none"),h(e,"type","file"),h(e,"accept",".jpg, .jpeg, .png")},m(l,t){I(l,e,t),i[29](e),n||(s=W(e,"change",i[28]),n=!0)},p:E,d(l){l&&d(e),i[29](null),n=!1,s()}}}function dl(i){let e,n,s=Te(i[12],i[10].name,i[10])+"";return{c(){e=k("h1"),n=new Ke(!1),this.h()},l(l){e=y(l,"H1",{class:!0});var t=S(e);n=Ge(t,!1),t.forEach(d),this.h()},h(){n.a=null,h(e,"class","svelte-1u63h0a")},m(l,t){I(l,e,t),n.m(s,e)},p(l,t){t[0]&5120&&s!==(s=Te(l[12],l[10].name,l[10])+"")&&n.p(s)},d(l){l&&d(e)}}}function pl(i){let e,n=i[1].domain&&(!i[10].id?.includes(i[1].domain)||i[10].preferredUsername!==i[13]),s,l,t=n&&_l(i),o=i[11]&&i[10].preferredUsername===i[13]&&kl(i);function r(f,_){if(f[5])return st;if(f[4])return nt}let a=r(i),m=a&&a(i);return{c(){e=k("div"),t&&t.c(),s=H(),o&&o.c(),l=H(),m&&m.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var _=S(e);t&&t.l(_),s=U(_),o&&o.l(_),l=U(_),m&&m.l(_),_.forEach(d),this.h()},h(){h(e,"class","controls svelte-1u63h0a")},m(f,_){I(f,e,_),t&&t.m(e,null),b(e,s),o&&o.m(e,null),b(e,l),m&&m.m(e,null)},p(f,_){_[0]&9218&&(n=f[1].domain&&(!f[10].id?.includes(f[1].domain)||f[10].preferredUsername!==f[13])),n?t?t.p(f,_):(t=_l(f),t.c(),t.m(e,s)):t&&(t.d(1),t=null),f[11]&&f[10].preferredUsername===f[13]?o?o.p(f,_):(o=kl(f),o.c(),o.m(e,l)):o&&(o.d(1),o=null),a===(a=r(f))&&m?m.p(f,_):(m&&m.d(1),m=a&&a(f),m&&(m.c(),m.m(e,null)))},d(f){f&&d(e),t&&t.d(),o&&o.d(),m&&m.d()}}}function _l(i){let e,n,s,l=!i[10].ephemeralFollowing&&bl(i),t=i[10].ephemeralFollowing!==void 0&&i[10].ephemeralFollowing&&gl(i),o=i[10].capabilities&&i[10].capabilities.enigmatickEncryption&&vl(i);return{c(){e=k("div"),l&&l.c(),n=H(),t&&t.c(),s=H(),o&&o.c(),this.h()},l(r){e=y(r,"DIV",{class:!0});var a=S(e);l&&l.l(a),n=U(a),t&&t.l(a),s=U(a),o&&o.l(a),a.forEach(d),this.h()},h(){h(e,"class","svelte-1u63h0a")},m(r,a){I(r,e,a),l&&l.m(e,null),b(e,n),t&&t.m(e,null),b(e,s),o&&o.m(e,null)},p(r,a){r[10].ephemeralFollowing?l&&(l.d(1),l=null):l?l.p(r,a):(l=bl(r),l.c(),l.m(e,n)),r[10].ephemeralFollowing!==void 0&&r[10].ephemeralFollowing?t?t.p(r,a):(t=gl(r),t.c(),t.m(e,s)):t&&(t.d(1),t=null),r[10].capabilities&&r[10].capabilities.enigmatickEncryption?o?o.p(r,a):(o=vl(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(r){r&&d(e),l&&l.d(),t&&t.d(),o&&o.d()}}}function bl(i){let e,n='<i class="fa-solid fa-user-plus svelte-1u63h0a"></i>',s,l;return{c(){e=k("button"),e.innerHTML=n,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-mbdjen"&&(e.innerHTML=n),this.h()},h(){h(e,"title","Follow"),h(e,"class","svelte-1u63h0a")},m(t,o){I(t,e,o),s||(l=W(e,"click",se(i[20])),s=!0)},p:E,d(t){t&&d(e),s=!1,l()}}}function gl(i){let e,n,s,l,t;return{c(){e=k("button"),n=k("i"),this.h()},l(o){e=y(o,"BUTTON",{title:!0,"data-activity":!0,class:!0});var r=S(e);n=y(r,"I",{class:!0}),S(n).forEach(d),r.forEach(d),this.h()},h(){h(n,"class","fa-solid fa-user-minus svelte-1u63h0a"),h(e,"title","Unfollow"),h(e,"data-activity",s=i[10].ephemeralFollowActivityApId),h(e,"class","svelte-1u63h0a")},m(o,r){I(o,e,r),b(e,n),l||(t=W(e,"click",se(i[21])),l=!0)},p(o,r){r[0]&1024&&s!==(s=o[10].ephemeralFollowActivityApId)&&h(e,"data-activity",s)},d(o){o&&d(e),l=!1,t()}}}function vl(i){let e,n='<i class="fa-solid fa-key svelte-1u63h0a"></i>',s,l;return{c(){e=k("button"),e.innerHTML=n,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-18id3tr"&&(e.innerHTML=n),this.h()},h(){h(e,"title","Exchange Keys"),h(e,"class","svelte-1u63h0a")},m(t,o){I(t,e,o),s||(l=W(e,"click",se(i[22])),s=!0)},p:E,d(t){t&&d(e),s=!1,l()}}}function kl(i){let e,n,s='<i class="fa-solid fa-image-portrait svelte-1u63h0a"></i>',l,t,o='<i class="fa-solid fa-panorama svelte-1u63h0a"></i>',r,a,m,f=!i[5]&&yl(i);return{c(){e=k("div"),n=k("button"),n.innerHTML=s,l=H(),t=k("button"),t.innerHTML=o,r=H(),f&&f.c(),this.h()},l(_){e=y(_,"DIV",{class:!0});var N=S(e);n=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ce(n)!=="svelte-1hu9osd"&&(n.innerHTML=s),l=U(N),t=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-1q2bt0g"&&(t.innerHTML=o),r=U(N),f&&f.l(N),N.forEach(d),this.h()},h(){h(n,"title","Change Avatar"),h(n,"class","svelte-1u63h0a"),h(t,"title","Change Banner"),h(t,"class","svelte-1u63h0a"),h(e,"class","svelte-1u63h0a")},m(_,N){I(_,e,N),b(e,n),b(e,l),b(e,t),b(e,r),f&&f.m(e,null),a||(m=[W(n,"keypress",i[30]),W(n,"click",i[31]),W(t,"keypress",i[32]),W(t,"click",i[33])],a=!0)},p(_,N){_[5]?f&&(f.d(1),f=null):f?f.p(_,N):(f=yl(_),f.c(),f.m(e,null))},d(_){_&&d(e),f&&f.d(),a=!1,We(m)}}}function yl(i){let e,n='<i class="fa-solid fa-pencil svelte-1u63h0a"></i>',s,l;return{c(){e=k("button"),e.innerHTML=n,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-1jsx8l0"&&(e.innerHTML=n),this.h()},h(){h(e,"title","Update Biography"),h(e,"class","svelte-1u63h0a")},m(t,o){I(t,e,o),s||(l=[W(e,"click",se(i[14])),W(e,"keypress",se(i[14]))],s=!0)},p:E,d(t){t&&d(e),s=!1,We(l)}}}function nt(i){let e,n,s='<i class="fa-solid fa-floppy-disk svelte-1u63h0a"></i>',l,t;return{c(){e=k("div"),n=k("button"),n.innerHTML=s,this.h()},l(o){e=y(o,"DIV",{class:!0});var r=S(e);n=y(r,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ce(n)!=="svelte-rd8bib"&&(n.innerHTML=s),r.forEach(d),this.h()},h(){h(n,"title","Save"),h(n,"class","svelte-1u63h0a"),h(e,"class","svelte-1u63h0a")},m(o,r){I(o,e,r),b(e,n),l||(t=W(n,"click",se(i[17])),l=!0)},p:E,d(o){o&&d(e),l=!1,t()}}}function st(i){let e,n,s='<i class="fa-solid fa-ban svelte-1u63h0a"></i>',l,t,o='<i class="fa-solid fa-eye svelte-1u63h0a"></i>',r,a,m,f=i[4]&&wl(i);return{c(){e=k("div"),n=k("button"),n.innerHTML=s,l=H(),t=k("button"),t.innerHTML=o,r=H(),f&&f.c(),this.h()},l(_){e=y(_,"DIV",{class:!0});var N=S(e);n=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ce(n)!=="svelte-kv8hcs"&&(n.innerHTML=s),l=U(N),t=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-1epd74s"&&(t.innerHTML=o),r=U(N),f&&f.l(N),N.forEach(d),this.h()},h(){h(n,"title","Cancel"),h(n,"class","svelte-1u63h0a"),h(t,"title","Preview"),h(t,"class","svelte-1u63h0a"),h(e,"class","svelte-1u63h0a")},m(_,N){I(_,e,N),b(e,n),b(e,l),b(e,t),b(e,r),f&&f.m(e,null),a||(m=[W(n,"click",se(i[16])),W(t,"click",se(i[15]))],a=!0)},p(_,N){_[4]?f?f.p(_,N):(f=wl(_),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(_){_&&d(e),f&&f.d(),a=!1,We(m)}}}function wl(i){let e,n='<i class="fa-solid fa-floppy-disk svelte-1u63h0a"></i>',s,l;return{c(){e=k("button"),e.innerHTML=n,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ce(e)!=="svelte-166g12d"&&(e.innerHTML=n),this.h()},h(){h(e,"title","Save"),h(e,"class","svelte-1u63h0a")},m(t,o){I(t,e,o),s||(l=W(e,"click",se(i[17])),s=!0)},p:E,d(t){t&&d(e),s=!1,l()}}}function Tl(i){let e,n;return{c(){e=k("pre"),n=fe(i[6]),this.h()},l(s){e=y(s,"PRE",{id:!0,contenteditable:!0,class:!0});var l=S(e);n=ue(l,i[6]),l.forEach(d),this.h()},h(){h(e,"id","summary_edit"),h(e,"contenteditable","true"),h(e,"class","svelte-1u63h0a")},m(s,l){I(s,e,l),b(e,n)},p(s,l){l[0]&64&&Pl(n,s[6])},d(s){s&&d(e)}}}function El(i){let e,n,s=Te(i[12],i[10].summary||"",i[10])+"";return{c(){e=k("div"),n=new Ke(!1),this.h()},l(l){e=y(l,"DIV",{class:!0});var t=S(e);n=Ge(t,!1),t.forEach(d),this.h()},h(){n.a=null,h(e,"class","svelte-1u63h0a")},m(l,t){I(l,e,t),n.m(s,e)},p(l,t){t[0]&5120&&s!==(s=Te(l[12],l[10].summary||"",l[10])+"")&&n.p(s)},d(l){l&&d(e)}}}function Nl(i){let e,n,s=(i[10].summary||"")+"";return{c(){e=k("span"),n=new Ke(!1),this.h()},l(l){e=y(l,"SPAN",{class:!0});var t=S(e);n=Ge(t,!1),t.forEach(d),this.h()},h(){n.a=null,h(e,"class","svelte-1u63h0a")},m(l,t){I(l,e,t),n.m(s,e)},p(l,t){t[0]&1024&&s!==(s=(l[10].summary||"")+"")&&n.p(s)},d(l){l&&d(e)}}}function it(i){let e,n,s={handle:i[0].params.handle,local:i[11]};return e=new tt({props:s}),i[34](e),{c(){De(e.$$.fragment)},l(l){Be(e.$$.fragment,l)},m(l,t){Pe(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.handle=l[0].params.handle),t[0]&2048&&(o.local=l[11]),e.$set(o)},i(l){n||(L(e.$$.fragment,l),n=!0)},o(l){P(e.$$.fragment,l),n=!1},d(l){i[34](null),Re(e,l)}}}function ot(i){let e,n,s=i[10]&&ul(i);return{c(){e=k("main"),s&&s.c(),this.h()},l(l){e=y(l,"MAIN",{class:!0});var t=S(e);s&&s.l(t),t.forEach(d),this.h()},h(){h(e,"class","svelte-1u63h0a")},m(l,t){I(l,e,t),s&&s.m(e,null),n=!0},p(l,t){l[10]?s?(s.p(l,t),t[0]&1024&&L(s,1)):(s=ul(l),s.c(),L(s,1),s.m(e,null)):s&&(ge(),P(s,1,1,()=>{s=null}),ve())},i(l){n||(L(s),n=!0)},o(l){P(s),n=!1},d(l){l&&d(e),s&&s.d()}}}function rt(i,e,n){let s,l,t,o,r;Ae(i,Rl,p=>n(0,t=p)),Ae(i,Cl,p=>n(25,o=p)),Ae(i,Ul,p=>n(1,r=p));const{Converter:a}=jl;Sl(async()=>{const{Buffer:p}=await Al(()=>import("../chunks/index.aMiLl7Je.js").then(w=>w.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=p});function m(p){console.debug(`INSTANCE DOMAIN: ${r.domain}`),p.includes("@")?(console.debug("REQUEST FOR REMOTE PROFILE"),n(11,A=!1),s?.get_actor_from_webfinger(`@${p}`).then(w=>{w&&(n(10,c=JSON.parse(w)),console.debug(c),v&&c&&(n(9,v.local=A,v),n(9,v.handle=p,v),n(9,v.profile=c,v)),s?.get_remote_followers(`@${p}`).then(T=>{if(T){let F=JSON.parse(T);n(7,de=F.totalItems)}}),s?.get_remote_following(`@${p}`).then(T=>{if(T){let F=JSON.parse(T);n(8,u=F.totalItems)}}))})):(n(11,A=!0),s?.get_profile_by_username(p).then(w=>{w&&(n(10,c=JSON.parse(w)),console.debug(c),v&&c&&(n(9,v.local=A,v),n(9,v.handle=p,v),n(9,v.profile=c,v)),n(6,te=c?.ephemeralSummaryMarkdown||""))}))}function f(p){let w=new a({extensions:[Jl({pre:!0,auto_detection:!0})]});return w.setFlavor("github"),w.setOption("tables",!0),w.setOption("requireSpaceBeforeHeadingText",!0),w.makeHtml(p)}function _(p){(p instanceof KeyboardEvent&&(p.key==="Enter"||p.key===" ")||p instanceof MouseEvent&&p.type==="click")&&n(5,V=!0)}function N(p){let w=document.getElementById("summary_edit");if(w){let T=w.innerText;c&&(n(6,te=T),n(5,V=!1),n(10,c.summary=f(T),c),n(4,$=!0))}}function z(p){n(5,V=!1)}function ee(){c&&c.summary&&s?.update_summary(c.summary,te).then(p=>{console.log(p),n(4,$=!1)})}const ie=p=>{let w=p.target;if(w.files!==null){let T=w.files[0],F=String(T.name.match(/\.[0-9a-z]+$/i)).slice(1),D=new FileReader;D.readAsArrayBuffer(T),D.onload=C=>{if(C.target!==null){X=C.target.result!==null?C.target.result:null,console.log(X);let R=new Uint8Array(X);s?.upload_avatar(R,X.byteLength,F).then(()=>{m(t.params.handle)})}}}},oe=p=>{let w=p.target;if(w.files!==null){let T=w.files[0],F=String(T.name.match(/\.[0-9a-z]+$/i)).slice(1),D=new FileReader;D.readAsArrayBuffer(T),D.onload=C=>{if(C.target!==null){M=C.target.result!==null?C.target.result:null,console.log(M);let R=new Uint8Array(M);s?.upload_banner(R,M.byteLength,F).then(()=>{m(t.params.handle)})}}}};function he(p){c&&c.id?(console.log("following: "+c.id),s?.send_follow(c.id).then(w=>{console.debug(`FOLLOW ${w}`),w&&c&&n(10,c.ephemeralFollowing=!0,c)})):console.log("no profile loaded")}function me(p){const w=String(p.target.dataset.activity);console.debug(`ACTIVITY ${w}`),console.debug(c),c&&c.id?(console.log("unfollowing: "+c.id),s?.send_unfollow(c.id,w).then(T=>{T&&c&&n(10,c.ephemeralFollowing=!1,c)})):console.log("no profile loaded")}async function J(p){console.log(p);let w=s?.KexInitParams.new();if(s&&c&&c.id&&w){let T=(await s.get_state()).get_olm_pickled_account();console.debug("PICKLED ACCOUNT"),console.debug(T);let F=s?.get_identity_public_key(String(T));console.debug("IDENTITY KEY"),console.debug(F),w.set_recipient_id(c.id),w.set_identity_key(String(F))}}const Q={Articles:Symbol("articles"),Posts:Symbol("posts"),Gallery:Symbol("gallery"),Followers:Symbol("followers"),Following:Symbol("following")};let X,Z,M,q,le=Q.Posts,$=!1,V=!1,te="",de=0,u=0,v,c=null,A=!0;const B=p=>oe(p);function Y(p){Me[p?"unshift":"push"](()=>{q=p,n(3,q)})}const re=p=>ie(p);function _e(p){Me[p?"unshift":"push"](()=>{Z=p,n(2,Z)})}const ae=()=>{Z.click()},Ee=()=>{Z.click()},be=()=>{q.click()},ke=()=>{q.click()};function ye(p){Me[p?"unshift":"push"](()=>{v=p,n(9,v)})}return i.$$.update=()=>{i.$$.dirty[0]&33554432&&n(12,s=o),i.$$.dirty[0]&2&&n(13,l=r.username),i.$$.dirty[0]&33554433&&o&&m(t.params.handle)},[t,r,Z,q,$,V,te,de,u,v,c,A,s,l,_,N,z,ee,ie,oe,he,me,J,Q,le,o,B,Y,re,_e,ae,Ee,be,ke,ye]}class gt extends Fl{constructor(e){super(),Hl(this,e,rt,ot,Il,{},null,[-1,-1])}}export{gt as component};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../chunks/index.aMiLl7Je.js","../chunks/_commonjsHelpers.5-cIlDoe.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}