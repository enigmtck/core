import{_ as Sl}from"../chunks/preload-helper.0HuHagjb.js";import{s as Al,H as Ze,a as F,f as k,c as H,g as y,h as A,d,j as c,i as S,w as Se,o as Il,e as pe,I as Ol,v as b,D as q,E as ne,p as Me,J as Ll,G as E,l as ae,m as fe,F as Fe,C as Ne,n as je,k as Ml,K as Ke,L as Ge,u as ue,M as We,N as Pl}from"../chunks/scheduler.tnyNm5U0.js";import{S as Fl,i as Hl,a as O,g as ge,t as R,c as ve,b as De,d as Be,m as Pe,e as Re}from"../chunks/index.R_ElRwcJ.js";import{p as Rl}from"../chunks/stores.o9IzJWtu.js";import{C as Vl,s as Jl,a as jl}from"../chunks/Compose.jtdFRHJI.js";import{a as Ul,e as Cl}from"../chunks/stores.bABpd-zC.js";import{c as He,i as Te,D as Kl,g as $e}from"../chunks/common.TJJApE5i.js";import{h as Ue,u as Dl,R as Gl,A as Wl}from"../chunks/Article.WG821VFA.js";import{e as Ce}from"../chunks/each.-oqiv04n.js";import"../chunks/paths.nOySfiN5.js";function xe(i,e,s){const n=i.slice();return n[30]=e[s],n}function el(i,e,s){const n=i.slice();return n[33]=e[s],n}function ll(i){let e,s,n={senderFunction:i[9]};return e=new Vl({props:n}),i[16](e),{c(){De(e.$$.fragment)},l(l){Be(e.$$.fragment,l)},m(l,t){Pe(e,l,t),s=!0},p(l,t){const o={};e.$set(o)},i(l){s||(O(e.$$.fragment,l),s=!0)},o(l){R(e.$$.fragment,l),s=!1},d(l){i[16](null),Re(e,l)}}}function tl(i){let e,s,n,l=Ce(Array.from(i[3].values()).sort(He).reverse()),t=[];for(let a=0;a<l.length;a+=1)t[a]=ol(xe(i,l,a));const o=a=>R(t[a],1,1,()=>{t[a]=null});let r=i[1]&&rl(i);return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=F(),r&&r.c(),s=pe()},l(a){for(let m=0;m<t.length;m+=1)t[m].l(a);e=H(a),r&&r.l(a),s=pe()},m(a,m){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(a,m);S(a,e,m),r&&r.m(a,m),S(a,s,m),n=!0},p(a,m){if(m[0]&7593){l=Ce(Array.from(a[3].values()).sort(He).reverse());let f;for(f=0;f<l.length;f+=1){const _=xe(a,l,f);t[f]?(t[f].p(_,m),O(t[f],1)):(t[f]=ol(_),t[f].c(),O(t[f],1),t[f].m(e.parentNode,e))}for(ge(),f=l.length;f<t.length;f+=1)o(f);ve()}a[1]?r?r.p(a,m):(r=rl(a),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},i(a){if(!n){for(let m=0;m<l.length;m+=1)O(t[m]);n=!0}},o(a){t=t.filter(Boolean);for(let m=0;m<t.length;m+=1)R(t[m]);n=!1},d(a){a&&(d(e),d(s)),Ol(t,a),r&&r.d(a)}}}function sl(i){let e,s,n,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Zl,then:zl,catch:ql,value:36,blocks:[,,,]};Ue(e=i[10](i[30].note),t);let o=i[30].note.id==al&&i[30].replies?.size&&nl(i);return{c(){t.block.c(),s=F(),o&&o.c(),n=pe()},l(r){t.block.l(r),s=H(r),o&&o.l(r),n=pe()},m(r,a){t.block.m(r,t.anchor=a),t.mount=()=>s.parentNode,t.anchor=s,S(r,s,a),o&&o.m(r,a),S(r,n,a),l=!0},p(r,a){i=r,t.ctx=i,a[0]&8&&e!==(e=i[10](i[30].note))&&Ue(e,t)||Dl(t,i,a),i[30].note.id==al&&i[30].replies?.size?o?(o.p(i,a),a[0]&8&&O(o,1)):(o=nl(i),o.c(),O(o,1),o.m(n.parentNode,n)):o&&(ge(),R(o,1,1,()=>{o=null}),ve())},i(r){l||(O(t.block),O(o),l=!0)},o(r){for(let a=0;a<3;a+=1){const m=t.blocks[a];R(m)}R(o),l=!1},d(r){r&&(d(s),d(n)),t.block.d(r),t.token=null,t=null,o&&o.d(r)}}}function ql(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function zl(i){let e,s,n,l={ctx:i,current:null,token:null,hasCatch:!1,pending:Xl,then:Ql,catch:Yl,value:37,blocks:[,,,]};return Ue(s=i[11](i[30].note),l),{c(){e=pe(),l.block.c()},l(t){e=pe(),l.block.l(t)},m(t,o){S(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e,n=!0},p(t,o){i=t,l.ctx=i,o[0]&8&&s!==(s=i[11](i[30].note))&&Ue(s,l)||Dl(l,i,o)},i(t){n||(O(l.block),n=!0)},o(t){for(let o=0;o<3;o+=1){const r=l.blocks[o];R(r)}n=!1},d(t){t&&d(e),l.block.d(t),l.token=null,l=null}}}function Yl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function Ql(i){let e,s;return e=new Wl({props:{remove:i[8],refresh:i[7],note:i[30],username:i[12],replyToHeader:i[36],announceHeader:i[37],renderAction:i[5]}}),e.$on("replyTo",function(){Ll(i[0].handleReplyToMessage)&&i[0].handleReplyToMessage.apply(this,arguments)}),e.$on("noteSelect",Bl),{c(){De(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,l){Pe(e,n,l),s=!0},p(n,l){i=n;const t={};l[0]&8&&(t.note=i[30]),l[0]&8&&(t.replyToHeader=i[36]),l[0]&8&&(t.announceHeader=i[37]),e.$set(t)},i(n){s||(O(e.$$.fragment,n),s=!0)},o(n){R(e.$$.fragment,n),s=!1},d(n){Re(e,n)}}}function Xl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function Zl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function nl(i){let e,s,n=Ce(Array.from(i[30].replies.values()).sort(He)),l=[];for(let o=0;o<n.length;o+=1)l[o]=il(el(i,n,o));const t=o=>R(l[o],1,1,()=>{l[o]=null});return{c(){e=k("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0});var r=A(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(d),this.h()},h(){c(e,"class","replies")},m(o,r){S(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);s=!0},p(o,r){if(r[0]&4105){n=Ce(Array.from(o[30].replies.values()).sort(He));let a;for(a=0;a<n.length;a+=1){const m=el(o,n,a);l[a]?(l[a].p(m,r),O(l[a],1)):(l[a]=il(m),l[a].c(),O(l[a],1),l[a].m(e,null))}for(ge(),a=n.length;a<l.length;a+=1)t(a);ve()}},i(o){if(!s){for(let r=0;r<n.length;r+=1)O(l[r]);s=!0}},o(o){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)R(l[r]);s=!1},d(o){o&&d(e),Ol(l,o)}}}function il(i){let e,s;return e=new Gl({props:{note:i[33],username:i[12]}}),e.$on("replyTo",function(){Ll(i[0].handleReplyToMessage)&&i[0].handleReplyToMessage.apply(this,arguments)}),e.$on("noteSelect",Bl),{c(){De(e.$$.fragment)},l(n){Be(e.$$.fragment,n)},m(n,l){Pe(e,n,l),s=!0},p(n,l){i=n;const t={};l[0]&8&&(t.note=i[33]),e.$set(t)},i(n){s||(O(e.$$.fragment,n),s=!0)},o(n){R(e.$$.fragment,n),s=!1},d(n){Re(e,n)}}}function ol(i){let e,s,n=i[30].note&&sl(i);return{c(){n&&n.c(),e=pe()},l(l){n&&n.l(l),e=pe()},m(l,t){n&&n.m(l,t),S(l,e,t),s=!0},p(l,t){l[30].note?n?(n.p(l,t),t[0]&8&&O(n,1)):(n=sl(l),n.c(),O(n,1),n.m(e.parentNode,e)):n&&(ge(),R(n,1,1,()=>{n=null}),ve())},i(l){s||(O(n),s=!0)},o(l){R(n),s=!1},d(l){l&&d(e),n&&n.d(l)}}}function rl(i){let e,s,n,l;return{c(){e=k("button"),s=k("i"),this.h()},l(t){e=y(t,"BUTTON",{class:!0});var o=A(e);s=y(o,"I",{class:!0}),A(s).forEach(d),o.forEach(d),this.h()},h(){c(s,"class","fa-solid fa-ellipsis"),e.disabled=i[2],c(e,"class","svelte-eycy8b")},m(t,o){S(t,e,o),b(e,s),n||(l=q(e,"click",ne(i[17])),n=!0)},p(t,o){o[0]&4&&(e.disabled=t[2])},d(t){t&&d(e),n=!1,l()}}}function $l(i){let e,s,n,l=i[4]&&ll(i),t=i[4]&&tl(i);return{c(){l&&l.c(),e=F(),s=k("main"),t&&t.c(),this.h()},l(o){l&&l.l(o),e=H(o),s=y(o,"MAIN",{class:!0});var r=A(s);t&&t.l(r),r.forEach(d),this.h()},h(){c(s,"class","svelte-eycy8b")},m(o,r){l&&l.m(o,r),S(o,e,r),S(o,s,r),t&&t.m(s,null),n=!0},p(o,r){o[4]?l?(l.p(o,r),r[0]&16&&O(l,1)):(l=ll(o),l.c(),O(l,1),l.m(e.parentNode,e)):l&&(ge(),R(l,1,1,()=>{l=null}),ve()),o[4]?t?(t.p(o,r),r[0]&16&&O(t,1)):(t=tl(o),t.c(),O(t,1),t.m(s,null)):t&&(ge(),R(t,1,1,()=>{t=null}),ve())},i(o){n||(O(l),O(t),n=!0)},o(o){R(l),R(t),n=!1},d(o){o&&(d(e),d(s)),l&&l.d(o),t&&t.d()}}}let al=null;function xl(i){for(let e of i)if(e.isIntersecting&&e.target){let s=e.target;if(s.dataset){let n=s.dataset;console.log(n.conversation)}}}function fl(i){if(i)try{return JSON.parse(i)}catch{return console.error("UNABLE TO PARSE PROFILE"),console.debug(i),null}else return console.error("UNABLE TO PARSE NULL OR UNDEFINED"),null}function Bl(){console.debug("NOT IMPLEMENTED")}function et(i,e,s){let n,l,t,o;Se(i,Ul,u=>s(20,t=u)),Se(i,Cl,u=>s(15,o=u));let r,{local:a}=e,{handle:m}=e,f=null;function _(u){f&&f.observe(u)}Il(async()=>{const{Buffer:u}=await Sl(()=>import("../chunks/index.aMiLl7Je.js").then(h=>h.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=u,f=new IntersectionObserver(xl,{root:null,threshold:.3})}),console.debug(`HANDLE ${m}`);async function N(u){const h=u.orderedItems;if(console.debug(h),h){for(const v of h)if(v.type==="Create")ce(v.object);else if(v.type==="Announce"){let M=await n?.get_note(String(v.object));if(M){const U=JSON.parse(M);console.debug(v),v.actor&&(U.ephemeralAnnounces=[v.actor]),ce(U)}}}s(1,Z=u.next||null),z=u.prev||null}async function Q(u,h){s(3,l=new Map);let v=n?.get_state();if(v){let M=v.get_server_url();if(h&&u){const U=await n?.get_outbox(`${M}/user/${u}/outbox?page=true`);if(U){const D=JSON.parse(U);console.debug(D),N(D).then(()=>{s(2,Y=!1)})}}else n?.get_remote_outbox(`@${u}`).then(U=>{if(U){const D=JSON.parse(U);n?.get_remote_outbox(`@${u}`,D.first).then(de=>{if(de){const ee=JSON.parse(de);N(ee).then(()=>{s(2,Y=!1)})}})}})}}async function te(u){let h=null;!u&&Z?h=Z:z&&(h=z),h&&(s(2,Y=!0),a?n?.get_outbox(h).then(v=>{if(v){const M=JSON.parse(v);N(M).then(()=>{s(2,Y=!1)})}}):n?.get_remote_outbox(`@${m}`,h).then(v=>{if(v){const M=JSON.parse(v);N(M).then(()=>{s(2,Y=!1)})}}))}function ie(){console.debug("REFRESH"),l.clear(),Q(m,a).then(u=>{console.log("LOADED")})}function oe(u){l.delete(u),s(3,l)}async function ce(u){u.ephemeralActors&&u.ephemeralActors.forEach(v=>{v.id&&V.set(v.id,JSON.stringify(v))}),u.ephemeralLikes&&(console.debug("EPHEMERAL LIKES"),console.debug(u.ephemeralLikes));const h=await X(u.attributedTo);if(h){let v=JSON.parse(h);const M=new Kl(v,u);l.get(String(u.id))||(l.set(String(u.id),M),P.set(String(u.id),[String(u.id)]))}s(3,l)}async function me(u,h,v,M,U){if(n){let D=(await n.SendParams.new()).set_content(M).set_public();return D=D.set_attachments(JSON.stringify(U)),h&&(D=await D.add_recipient_id(String(u),!0),D=D.set_in_reply_to(String(h)),D=D.set_conversation(String(v))),await n.send_note(D)}else return!1}async function j(u){if(u.inReplyTo){const h=await $(u.inReplyTo);if(h){const v=JSON.parse(String(h)),M=await X(v.attributedTo),U=fl(M);return U?Te(n,U.name||U.preferredUsername,U):null}else return null}else return null}async function re(u){if(u.ephemeralAnnounces){const h=await X(u.ephemeralAnnounces[0]);let v="";if(u.ephemeralAnnounces.length==2?v=` and ${u.ephemeralAnnounces.length-1} other`:u.ephemeralAnnounces.length>2&&(v=` and ${u.ephemeralAnnounces.length-1} others`),h){const M=fl(h);if(M){const U=Te(n,M.name||M.preferredUsername,M);return{url:M.url,name:U,others:v}}else return null}else return null}else return null}async function X(u){return n&&!V.has(u)&&V.set(u,await n.get_actor(u)),V.get(u)}async function $(u){return n&&!V.has(u)&&V.set(u,await n.get_note(u)),V.get(u)}let P=new Map,V=new Map,_e=t.username,Z=null,z=null,Y=!0;function he(u){Me[u?"unshift":"push"](()=>{r=u,s(0,r)})}const x=()=>te(!1);return i.$$set=u=>{"local"in u&&s(13,a=u.local),"handle"in u&&s(14,m=u.handle)},i.$$.update=()=>{i.$$.dirty[0]&32768&&s(4,n=o),i.$$.dirty[0]&24576&&Q(m,a).then(()=>{console.debug("RELOADED")})},s(3,l=new Map),[r,Z,Y,l,n,_,te,ie,oe,me,j,re,_e,a,m,o,he,x]}class lt extends Fl{constructor(e){super(),Hl(this,e,et,$l,Al,{local:13,handle:14},null,[-1,-1])}get local(){return this.$$.ctx[13]}set local(e){this.$$set({local:e}),Ze()}get handle(){return this.$$.ctx[14]}set handle(e){this.$$set({handle:e}),Ze()}}function ul(i){let e,s,n,l,t,o,r,a,m,f,_,N,Q,te=$e(i[10])+"",ie,oe,ce,me,j,re,X,$,P,V,_e,Z,z,Y,he,x,u,h,v,M,U=(i[10].ephemeralLeaders?.length||i[8])+"",D,de,ee,Ee,be=(i[10].ephemeralFollowers?.length||i[7])+"",ke,ye,p,w,T=i[13]&&cl(i),L=i[10].image&&ml(i),B=i[13]&&hl(i),C=i[10].name&&dl(i),J=i[13]&&pl(i),K=i[5]&&Tl(i),G=i[13]&&!i[5]&&El(i),W=!i[13]&&Nl(i),le=i[24]===i[23].Posts&&nt(i);return{c(){e=k("div"),s=k("div"),T&&T.c(),n=F(),L&&L.c(),l=F(),t=k("div"),o=k("div"),B&&B.c(),r=F(),a=k("img"),f=F(),_=k("div"),C&&C.c(),N=F(),Q=k("a"),ie=ae(te),ce=F(),J&&J.c(),me=F(),j=k("div"),K&&K.c(),re=F(),G&&G.c(),X=F(),W&&W.c(),$=F(),P=k("div"),V=k("button"),_e=ae("Articles"),Z=F(),z=k("button"),Y=ae("Posts"),he=F(),x=k("button"),u=ae("Gallery"),h=F(),v=k("button"),M=ae("Following • "),D=ae(U),de=F(),ee=k("button"),Ee=ae("Followers • "),ke=ae(be),ye=F(),p=k("section"),le&&le.c(),this.h()},l(g){e=y(g,"DIV",{class:!0});var I=A(e);s=y(I,"DIV",{class:!0});var Ae=A(s);T&&T.l(Ae),n=H(Ae),L&&L.l(Ae),Ae.forEach(d),l=H(I),t=y(I,"DIV",{class:!0});var Ie=A(t);o=y(Ie,"DIV",{class:!0});var Oe=A(o);B&&B.l(Oe),r=H(Oe),a=y(Oe,"IMG",{src:!0,alt:!0,class:!0}),Oe.forEach(d),f=H(Ie),_=y(Ie,"DIV",{class:!0});var Le=A(_);C&&C.l(Le),N=H(Le),Q=y(Le,"A",{href:!0,class:!0});var qe=A(Q);ie=fe(qe,te),qe.forEach(d),Le.forEach(d),Ie.forEach(d),ce=H(I),J&&J.l(I),me=H(I),j=y(I,"DIV",{class:!0});var we=A(j);K&&K.l(we),re=H(we),G&&G.l(we),X=H(we),W&&W.l(we),we.forEach(d),$=H(I),P=y(I,"DIV",{class:!0});var se=A(P);V=y(se,"BUTTON",{class:!0});var ze=A(V);_e=fe(ze,"Articles"),ze.forEach(d),Z=H(se),z=y(se,"BUTTON",{class:!0});var Ye=A(z);Y=fe(Ye,"Posts"),Ye.forEach(d),he=H(se),x=y(se,"BUTTON",{class:!0});var Qe=A(x);u=fe(Qe,"Gallery"),Qe.forEach(d),h=H(se),v=y(se,"BUTTON",{class:!0});var Ve=A(v);M=fe(Ve,"Following • "),D=fe(Ve,U),Ve.forEach(d),de=H(se),ee=y(se,"BUTTON",{class:!0});var Je=A(ee);Ee=fe(Je,"Followers • "),ke=fe(Je,be),Je.forEach(d),se.forEach(d),I.forEach(d),ye=H(g),p=y(g,"SECTION",{class:!0});var Xe=A(p);le&&le.l(Xe),Xe.forEach(d),this.h()},h(){c(s,"class","banner svelte-12sb5l0"),Fe(a.src,m=i[10].icon?.url)||c(a,"src",m),c(a,"alt","Avatar"),c(a,"class","svelte-12sb5l0"),c(o,"class","avatar svelte-12sb5l0"),c(Q,"href",oe=i[10].url),c(Q,"class","svelte-12sb5l0"),c(_,"class","details svelte-12sb5l0"),c(t,"class","identity svelte-12sb5l0"),c(j,"class","summary svelte-12sb5l0"),c(V,"class",Ne(i[24]===i[23].Articles?"selected":"")+" svelte-12sb5l0"),c(z,"class",Ne(i[24]===i[23].Posts?"selected":"")+" svelte-12sb5l0"),c(x,"class",Ne(i[24]===i[23].Gallery?"selected":"")+" svelte-12sb5l0"),c(v,"class",Ne(i[24]===i[23].Following?"selected":"")+" svelte-12sb5l0"),c(ee,"class",Ne(i[24]===i[23].Followers?"selected":"")+" svelte-12sb5l0"),c(P,"class","tabs svelte-12sb5l0"),c(e,"class","profile svelte-12sb5l0"),c(p,"class","svelte-12sb5l0")},m(g,I){S(g,e,I),b(e,s),T&&T.m(s,null),b(s,n),L&&L.m(s,null),b(e,l),b(e,t),b(t,o),B&&B.m(o,null),b(o,r),b(o,a),b(t,f),b(t,_),C&&C.m(_,null),b(_,N),b(_,Q),b(Q,ie),b(e,ce),J&&J.m(e,null),b(e,me),b(e,j),K&&K.m(j,null),b(j,re),G&&G.m(j,null),b(j,X),W&&W.m(j,null),b(e,$),b(e,P),b(P,V),b(V,_e),b(P,Z),b(P,z),b(z,Y),b(P,he),b(P,x),b(x,u),b(P,h),b(P,v),b(v,M),b(v,D),b(P,de),b(P,ee),b(ee,Ee),b(ee,ke),S(g,ye,I),S(g,p,I),le&&le.m(p,null),w=!0},p(g,I){g[13]?T?T.p(g,I):(T=cl(g),T.c(),T.m(s,n)):T&&(T.d(1),T=null),g[10].image?L?L.p(g,I):(L=ml(g),L.c(),L.m(s,null)):L&&(L.d(1),L=null),g[13]?B?B.p(g,I):(B=hl(g),B.c(),B.m(o,r)):B&&(B.d(1),B=null),(!w||I[0]&1024&&!Fe(a.src,m=g[10].icon?.url))&&c(a,"src",m),g[10].name?C?C.p(g,I):(C=dl(g),C.c(),C.m(_,N)):C&&(C.d(1),C=null),(!w||I[0]&1024)&&te!==(te=$e(g[10])+"")&&je(ie,te),(!w||I[0]&1024&&oe!==(oe=g[10].url))&&c(Q,"href",oe),g[13]?J?J.p(g,I):(J=pl(g),J.c(),J.m(e,me)):J&&(J.d(1),J=null),g[5]?K?K.p(g,I):(K=Tl(g),K.c(),K.m(j,re)):K&&(K.d(1),K=null),g[13]&&!g[5]?G?G.p(g,I):(G=El(g),G.c(),G.m(j,X)):G&&(G.d(1),G=null),g[13]?W&&(W.d(1),W=null):W?W.p(g,I):(W=Nl(g),W.c(),W.m(j,null)),(!w||I[0]&1280)&&U!==(U=(g[10].ephemeralLeaders?.length||g[8])+"")&&je(D,U),(!w||I[0]&1152)&&be!==(be=(g[10].ephemeralFollowers?.length||g[7])+"")&&je(ke,be),g[24]===g[23].Posts&&le.p(g,I)},i(g){w||(O(le),w=!0)},o(g){R(le),w=!1},d(g){g&&(d(e),d(ye),d(p)),T&&T.d(),L&&L.d(),B&&B.d(),C&&C.d(),J&&J.d(),K&&K.d(),G&&G.d(),W&&W.d(),le&&le.d()}}}function cl(i){let e,s,n;return{c(){e=k("input"),this.h()},l(l){e=y(l,"INPUT",{style:!0,type:!0,accept:!0}),this.h()},h(){Ml(e,"display","none"),c(e,"type","file"),c(e,"accept",".jpg, .jpeg, .png")},m(l,t){S(l,e,t),i[27](e),s||(n=q(e,"change",i[26]),s=!0)},p:E,d(l){l&&d(e),i[27](null),s=!1,n()}}}function ml(i){let e,s;return{c(){e=k("img"),this.h()},l(n){e=y(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Fe(e.src,s=i[10].image.url)||c(e,"src",s),c(e,"alt","Banner"),c(e,"class","svelte-12sb5l0")},m(n,l){S(n,e,l)},p(n,l){l[0]&1024&&!Fe(e.src,s=n[10].image.url)&&c(e,"src",s)},d(n){n&&d(e)}}}function hl(i){let e,s,n;return{c(){e=k("input"),this.h()},l(l){e=y(l,"INPUT",{style:!0,type:!0,accept:!0}),this.h()},h(){Ml(e,"display","none"),c(e,"type","file"),c(e,"accept",".jpg, .jpeg, .png")},m(l,t){S(l,e,t),i[29](e),s||(n=q(e,"change",i[28]),s=!0)},p:E,d(l){l&&d(e),i[29](null),s=!1,n()}}}function dl(i){let e,s,n=Te(i[12],i[10].name,i[10])+"";return{c(){e=k("h1"),s=new Ke(!1),this.h()},l(l){e=y(l,"H1",{class:!0});var t=A(e);s=Ge(t,!1),t.forEach(d),this.h()},h(){s.a=null,c(e,"class","svelte-12sb5l0")},m(l,t){S(l,e,t),s.m(n,e)},p(l,t){t[0]&5120&&n!==(n=Te(l[12],l[10].name,l[10])+"")&&s.p(n)},d(l){l&&d(e)}}}function pl(i){let e,s=i[1].domain&&(!i[10].id?.includes(i[1].domain)||i[10].preferredUsername!==i[13]),n,l,t=s&&_l(i),o=i[11]&&i[10].preferredUsername===i[13]&&kl(i);function r(f,_){if(f[5])return st;if(f[4])return tt}let a=r(i),m=a&&a(i);return{c(){e=k("div"),t&&t.c(),n=F(),o&&o.c(),l=F(),m&&m.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var _=A(e);t&&t.l(_),n=H(_),o&&o.l(_),l=H(_),m&&m.l(_),_.forEach(d),this.h()},h(){c(e,"class","controls svelte-12sb5l0")},m(f,_){S(f,e,_),t&&t.m(e,null),b(e,n),o&&o.m(e,null),b(e,l),m&&m.m(e,null)},p(f,_){_[0]&9218&&(s=f[1].domain&&(!f[10].id?.includes(f[1].domain)||f[10].preferredUsername!==f[13])),s?t?t.p(f,_):(t=_l(f),t.c(),t.m(e,n)):t&&(t.d(1),t=null),f[11]&&f[10].preferredUsername===f[13]?o?o.p(f,_):(o=kl(f),o.c(),o.m(e,l)):o&&(o.d(1),o=null),a===(a=r(f))&&m?m.p(f,_):(m&&m.d(1),m=a&&a(f),m&&(m.c(),m.m(e,null)))},d(f){f&&d(e),t&&t.d(),o&&o.d(),m&&m.d()}}}function _l(i){let e,s,n,l=!i[10].ephemeralFollowing&&bl(i),t=i[10].ephemeralFollowing!==void 0&&i[10].ephemeralFollowing&&gl(i),o=i[10].capabilities&&i[10].capabilities.enigmatickEncryption&&vl(i);return{c(){e=k("div"),l&&l.c(),s=F(),t&&t.c(),n=F(),o&&o.c(),this.h()},l(r){e=y(r,"DIV",{class:!0});var a=A(e);l&&l.l(a),s=H(a),t&&t.l(a),n=H(a),o&&o.l(a),a.forEach(d),this.h()},h(){c(e,"class","svelte-12sb5l0")},m(r,a){S(r,e,a),l&&l.m(e,null),b(e,s),t&&t.m(e,null),b(e,n),o&&o.m(e,null)},p(r,a){r[10].ephemeralFollowing?l&&(l.d(1),l=null):l?l.p(r,a):(l=bl(r),l.c(),l.m(e,s)),r[10].ephemeralFollowing!==void 0&&r[10].ephemeralFollowing?t?t.p(r,a):(t=gl(r),t.c(),t.m(e,n)):t&&(t.d(1),t=null),r[10].capabilities&&r[10].capabilities.enigmatickEncryption?o?o.p(r,a):(o=vl(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(r){r&&d(e),l&&l.d(),t&&t.d(),o&&o.d()}}}function bl(i){let e,s='<i class="fa-solid fa-user-plus svelte-12sb5l0"></i>',n,l;return{c(){e=k("button"),e.innerHTML=s,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-mbdjen"&&(e.innerHTML=s),this.h()},h(){c(e,"title","Follow"),c(e,"class","svelte-12sb5l0")},m(t,o){S(t,e,o),n||(l=q(e,"click",ne(i[20])),n=!0)},p:E,d(t){t&&d(e),n=!1,l()}}}function gl(i){let e,s,n,l,t;return{c(){e=k("button"),s=k("i"),this.h()},l(o){e=y(o,"BUTTON",{title:!0,"data-activity":!0,class:!0});var r=A(e);s=y(r,"I",{class:!0}),A(s).forEach(d),r.forEach(d),this.h()},h(){c(s,"class","fa-solid fa-user-minus svelte-12sb5l0"),c(e,"title","Unfollow"),c(e,"data-activity",n=i[10].ephemeralFollowActivityApId),c(e,"class","svelte-12sb5l0")},m(o,r){S(o,e,r),b(e,s),l||(t=q(e,"click",ne(i[21])),l=!0)},p(o,r){r[0]&1024&&n!==(n=o[10].ephemeralFollowActivityApId)&&c(e,"data-activity",n)},d(o){o&&d(e),l=!1,t()}}}function vl(i){let e,s='<i class="fa-solid fa-key svelte-12sb5l0"></i>',n,l;return{c(){e=k("button"),e.innerHTML=s,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-18id3tr"&&(e.innerHTML=s),this.h()},h(){c(e,"title","Exchange Keys"),c(e,"class","svelte-12sb5l0")},m(t,o){S(t,e,o),n||(l=q(e,"click",ne(i[22])),n=!0)},p:E,d(t){t&&d(e),n=!1,l()}}}function kl(i){let e,s,n='<i class="fa-solid fa-image-portrait svelte-12sb5l0"></i>',l,t,o='<i class="fa-solid fa-panorama svelte-12sb5l0"></i>',r,a,m,f=!i[5]&&yl(i);return{c(){e=k("div"),s=k("button"),s.innerHTML=n,l=F(),t=k("button"),t.innerHTML=o,r=F(),f&&f.c(),this.h()},l(_){e=y(_,"DIV",{class:!0});var N=A(e);s=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(s)!=="svelte-1hu9osd"&&(s.innerHTML=n),l=H(N),t=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-1q2bt0g"&&(t.innerHTML=o),r=H(N),f&&f.l(N),N.forEach(d),this.h()},h(){c(s,"title","Change Avatar"),c(s,"class","svelte-12sb5l0"),c(t,"title","Change Banner"),c(t,"class","svelte-12sb5l0"),c(e,"class","svelte-12sb5l0")},m(_,N){S(_,e,N),b(e,s),b(e,l),b(e,t),b(e,r),f&&f.m(e,null),a||(m=[q(s,"keypress",i[30]),q(s,"click",i[31]),q(t,"keypress",i[32]),q(t,"click",i[33])],a=!0)},p(_,N){_[5]?f&&(f.d(1),f=null):f?f.p(_,N):(f=yl(_),f.c(),f.m(e,null))},d(_){_&&d(e),f&&f.d(),a=!1,We(m)}}}function yl(i){let e,s='<i class="fa-solid fa-pencil svelte-12sb5l0"></i>',n,l;return{c(){e=k("button"),e.innerHTML=s,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1jsx8l0"&&(e.innerHTML=s),this.h()},h(){c(e,"title","Update Biography"),c(e,"class","svelte-12sb5l0")},m(t,o){S(t,e,o),n||(l=[q(e,"click",ne(i[14])),q(e,"keypress",ne(i[14]))],n=!0)},p:E,d(t){t&&d(e),n=!1,We(l)}}}function tt(i){let e,s,n='<i class="fa-solid fa-floppy-disk svelte-12sb5l0"></i>',l,t;return{c(){e=k("div"),s=k("button"),s.innerHTML=n,this.h()},l(o){e=y(o,"DIV",{class:!0});var r=A(e);s=y(r,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(s)!=="svelte-rd8bib"&&(s.innerHTML=n),r.forEach(d),this.h()},h(){c(s,"title","Save"),c(s,"class","svelte-12sb5l0"),c(e,"class","svelte-12sb5l0")},m(o,r){S(o,e,r),b(e,s),l||(t=q(s,"click",ne(i[17])),l=!0)},p:E,d(o){o&&d(e),l=!1,t()}}}function st(i){let e,s,n='<i class="fa-solid fa-ban svelte-12sb5l0"></i>',l,t,o='<i class="fa-solid fa-eye svelte-12sb5l0"></i>',r,a,m,f=i[4]&&wl(i);return{c(){e=k("div"),s=k("button"),s.innerHTML=n,l=F(),t=k("button"),t.innerHTML=o,r=F(),f&&f.c(),this.h()},l(_){e=y(_,"DIV",{class:!0});var N=A(e);s=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(s)!=="svelte-kv8hcs"&&(s.innerHTML=n),l=H(N),t=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-1epd74s"&&(t.innerHTML=o),r=H(N),f&&f.l(N),N.forEach(d),this.h()},h(){c(s,"title","Cancel"),c(s,"class","svelte-12sb5l0"),c(t,"title","Preview"),c(t,"class","svelte-12sb5l0"),c(e,"class","svelte-12sb5l0")},m(_,N){S(_,e,N),b(e,s),b(e,l),b(e,t),b(e,r),f&&f.m(e,null),a||(m=[q(s,"click",ne(i[16])),q(t,"click",ne(i[15]))],a=!0)},p(_,N){_[4]?f?f.p(_,N):(f=wl(_),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(_){_&&d(e),f&&f.d(),a=!1,We(m)}}}function wl(i){let e,s='<i class="fa-solid fa-floppy-disk svelte-12sb5l0"></i>',n,l;return{c(){e=k("button"),e.innerHTML=s,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-166g12d"&&(e.innerHTML=s),this.h()},h(){c(e,"title","Save"),c(e,"class","svelte-12sb5l0")},m(t,o){S(t,e,o),n||(l=q(e,"click",ne(i[17])),n=!0)},p:E,d(t){t&&d(e),n=!1,l()}}}function Tl(i){let e,s;return{c(){e=k("pre"),s=ae(i[6]),this.h()},l(n){e=y(n,"PRE",{id:!0,contenteditable:!0,class:!0});var l=A(e);s=fe(l,i[6]),l.forEach(d),this.h()},h(){c(e,"id","summary_edit"),c(e,"contenteditable","true"),c(e,"class","svelte-12sb5l0")},m(n,l){S(n,e,l),b(e,s)},p(n,l){l[0]&64&&Pl(s,n[6])},d(n){n&&d(e)}}}function El(i){let e,s,n=Te(i[12],i[10].summary||"",i[10])+"";return{c(){e=k("div"),s=new Ke(!1),this.h()},l(l){e=y(l,"DIV",{class:!0});var t=A(e);s=Ge(t,!1),t.forEach(d),this.h()},h(){s.a=null,c(e,"class","svelte-12sb5l0")},m(l,t){S(l,e,t),s.m(n,e)},p(l,t){t[0]&5120&&n!==(n=Te(l[12],l[10].summary||"",l[10])+"")&&s.p(n)},d(l){l&&d(e)}}}function Nl(i){let e,s,n=(i[10].summary||"")+"";return{c(){e=k("span"),s=new Ke(!1),this.h()},l(l){e=y(l,"SPAN",{class:!0});var t=A(e);s=Ge(t,!1),t.forEach(d),this.h()},h(){s.a=null,c(e,"class","svelte-12sb5l0")},m(l,t){S(l,e,t),s.m(n,e)},p(l,t){t[0]&1024&&n!==(n=(l[10].summary||"")+"")&&s.p(n)},d(l){l&&d(e)}}}function nt(i){let e,s,n={handle:i[0].params.handle,local:i[11]};return e=new lt({props:n}),i[34](e),{c(){De(e.$$.fragment)},l(l){Be(e.$$.fragment,l)},m(l,t){Pe(e,l,t),s=!0},p(l,t){const o={};t[0]&1&&(o.handle=l[0].params.handle),t[0]&2048&&(o.local=l[11]),e.$set(o)},i(l){s||(O(e.$$.fragment,l),s=!0)},o(l){R(e.$$.fragment,l),s=!1},d(l){i[34](null),Re(e,l)}}}function it(i){let e,s,n=i[10]&&ul(i);return{c(){e=k("main"),n&&n.c(),this.h()},l(l){e=y(l,"MAIN",{class:!0});var t=A(e);n&&n.l(t),t.forEach(d),this.h()},h(){c(e,"class","svelte-12sb5l0")},m(l,t){S(l,e,t),n&&n.m(e,null),s=!0},p(l,t){l[10]?n?(n.p(l,t),t[0]&1024&&O(n,1)):(n=ul(l),n.c(),O(n,1),n.m(e,null)):n&&(ge(),R(n,1,1,()=>{n=null}),ve())},i(l){s||(O(n),s=!0)},o(l){R(n),s=!1},d(l){l&&d(e),n&&n.d()}}}function ot(i,e,s){let n,l,t,o,r;Se(i,Rl,p=>s(0,t=p)),Se(i,Cl,p=>s(25,o=p)),Se(i,Ul,p=>s(1,r=p));const{Converter:a}=jl;Il(async()=>{const{Buffer:p}=await Sl(()=>import("../chunks/index.aMiLl7Je.js").then(w=>w.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=p});function m(p){console.debug(`INSTANCE DOMAIN: ${r.domain}`),p.includes("@")?(console.debug("REQUEST FOR REMOTE PROFILE"),s(11,v=!1),n?.get_actor_from_webfinger(`@${p}`).then(w=>{w&&(s(10,h=JSON.parse(w)),console.debug(h),u&&h&&(s(9,u.local=v,u),s(9,u.handle=p,u),s(9,u.profile=h,u)),n?.get_remote_followers(`@${p}`).then(T=>{if(T){let L=JSON.parse(T);s(7,he=L.totalItems)}}),n?.get_remote_following(`@${p}`).then(T=>{if(T){let L=JSON.parse(T);s(8,x=L.totalItems)}}))})):(s(11,v=!0),n?.get_profile_by_username(p).then(w=>{w&&(s(10,h=JSON.parse(w)),console.debug(h),u&&h&&(s(9,u.local=v,u),s(9,u.handle=p,u),s(9,u.profile=h,u)),s(6,Y=h?.ephemeralSummaryMarkdown||""))}))}function f(p){let w=new a({extensions:[Jl({pre:!0,auto_detection:!0})]});return w.setFlavor("github"),w.setOption("tables",!0),w.setOption("requireSpaceBeforeHeadingText",!0),w.makeHtml(p)}function _(p){(p instanceof KeyboardEvent&&(p.key==="Enter"||p.key===" ")||p instanceof MouseEvent&&p.type==="click")&&s(5,z=!0)}function N(p){let w=document.getElementById("summary_edit");if(w){let T=w.innerText;h&&(s(6,Y=T),s(5,z=!1),s(10,h.summary=f(T),h),s(4,Z=!0))}}function Q(p){s(5,z=!1)}function te(){h&&h.summary&&n?.update_summary(h.summary,Y).then(p=>{console.log(p),s(4,Z=!1)})}const ie=p=>{let w=p.target;if(w.files!==null){let T=w.files[0],L=String(T.name.match(/\.[0-9a-z]+$/i)).slice(1),B=new FileReader;B.readAsArrayBuffer(T),B.onload=C=>{if(C.target!==null){X=C.target.result!==null?C.target.result:null,console.log(X);let J=new Uint8Array(X);n?.upload_avatar(J,X.byteLength,L).then(()=>{m(t.params.handle)})}}}},oe=p=>{let w=p.target;if(w.files!==null){let T=w.files[0],L=String(T.name.match(/\.[0-9a-z]+$/i)).slice(1),B=new FileReader;B.readAsArrayBuffer(T),B.onload=C=>{if(C.target!==null){P=C.target.result!==null?C.target.result:null,console.log(P);let J=new Uint8Array(P);n?.upload_banner(J,P.byteLength,L).then(()=>{m(t.params.handle)})}}}};function ce(p){h&&h.id?(console.log("following: "+h.id),n?.send_follow(h.id).then(w=>{console.debug(`FOLLOW ${w}`),w&&h&&s(10,h.ephemeralFollowing=!0,h)})):console.log("no profile loaded")}function me(p){const w=String(p.target.dataset.activity);console.debug(`ACTIVITY ${w}`),console.debug(h),h&&h.id?(console.log("unfollowing: "+h.id),n?.send_unfollow(h.id,w).then(T=>{T&&h&&s(10,h.ephemeralFollowing=!1,h)})):console.log("no profile loaded")}async function j(p){console.log(p);let w=n?.KexInitParams.new();if(n&&h&&h.id&&w){let T=(await n.get_state()).get_olm_pickled_account();console.debug("PICKLED ACCOUNT"),console.debug(T);let L=n?.get_identity_public_key(String(T));console.debug("IDENTITY KEY"),console.debug(L),w.set_recipient_id(h.id),w.set_identity_key(String(L))}}const re={Articles:Symbol("articles"),Posts:Symbol("posts"),Gallery:Symbol("gallery"),Followers:Symbol("followers"),Following:Symbol("following")};let X,$,P,V,_e=re.Posts,Z=!1,z=!1,Y="",he=0,x=0,u,h=null,v=!0;const M=p=>oe(p);function U(p){Me[p?"unshift":"push"](()=>{V=p,s(3,V)})}const D=p=>ie(p);function de(p){Me[p?"unshift":"push"](()=>{$=p,s(2,$)})}const ee=()=>{$.click()},Ee=()=>{$.click()},be=()=>{V.click()},ke=()=>{V.click()};function ye(p){Me[p?"unshift":"push"](()=>{u=p,s(9,u)})}return i.$$.update=()=>{i.$$.dirty[0]&33554432&&s(12,n=o),i.$$.dirty[0]&2&&s(13,l=r.username),i.$$.dirty[0]&33554433&&o&&m(t.params.handle)},[t,r,$,V,Z,z,Y,he,x,u,h,v,n,l,_,N,Q,te,ie,oe,ce,me,j,re,_e,o,M,U,D,de,ee,Ee,be,ke,ye]}class bt extends Fl{constructor(e){super(),Hl(this,e,ot,it,Al,{},null,[-1,-1])}}export{bt as component};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../chunks/index.aMiLl7Je.js","../chunks/_commonjsHelpers.5-cIlDoe.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}