import{S as ee,i as te,s as ae,n as F,d as f,w as se,b as Y,c as a,m as O,y as V,o as e,e as l,f as A,B as E,h as C,g as J,G as ne,j as o,k as L,t as Q,l as le,p as oe,q as re}from"../chunks/DR2rOELM.js";import{g as ie}from"../chunks/D0QH3NT1.js";import"../chunks/IHki7fMi.js";import{e as ue,a as me}from"../chunks/B4kYsGbE.js";import{g as X}from"../chunks/eEFvHPNh.js";const{document:Z}=ie;function ce(p){let s,c,v="ENIGMATICK",_,r,T="Create Account",h,t,n,B=`Username
			<input name="username" type="text" placeholder="bob" class="svelte-1ouma4k"/>`,N,b,G=`Display Name
			<input name="display_name" type="text" placeholder="Bob Anderson" class="svelte-1ouma4k"/>`,P,y,H,i,I,k,S,u,q,w,R='<button class="svelte-1ouma4k">Create Account</button>',M,g,W=`body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  display: block;
  background: white;
}
@media screen and (max-width: 700px) {
  body {
    background: #fafafa;
  }
}`,D,z;return{c(){s=o("main"),c=o("h1"),c.textContent=v,_=L(),r=o("h2"),r.textContent=T,h=L(),t=o("form"),n=o("label"),n.innerHTML=B,N=L(),b=o("label"),b.innerHTML=G,P=L(),y=o("label"),H=Q(`Password
			`),i=o("input"),I=L(),k=o("label"),S=Q(`Confirm Password
			`),u=o("input"),q=L(),w=o("div"),w.innerHTML=R,M=L(),g=o("style"),g.textContent=W,this.h()},l(x){s=l(x,"MAIN",{class:!0});var d=A(s);c=l(d,"H1",{class:!0,"data-svelte-h":!0}),E(c)!=="svelte-1bn9c6g"&&(c.textContent=v),_=C(d),r=l(d,"H2",{class:!0,"data-svelte-h":!0}),E(r)!=="svelte-lqaecl"&&(r.textContent=T),h=C(d),t=l(d,"FORM",{id:!0,method:!0,class:!0});var m=A(t);n=l(m,"LABEL",{class:!0,"data-svelte-h":!0}),E(n)!=="svelte-onj7mi"&&(n.innerHTML=B),N=C(m),b=l(m,"LABEL",{class:!0,"data-svelte-h":!0}),E(b)!=="svelte-1umteht"&&(b.innerHTML=G),P=C(m),y=l(m,"LABEL",{class:!0});var U=A(y);H=J(U,`Password
			`),i=l(U,"INPUT",{name:!0,type:!0,minlength:!0,placeholder:!0,class:!0}),U.forEach(f),I=C(m),k=l(m,"LABEL",{class:!0});var $=A(k);S=J($,`Confirm Password
			`),u=l($,"INPUT",{name:!0,type:!0,minlength:!0,placeholder:!0,class:!0}),$.forEach(f),q=C(m),w=l(m,"DIV",{class:!0,"data-svelte-h":!0}),E(w)!=="svelte-1msvkw3"&&(w.innerHTML=R),m.forEach(f),d.forEach(f),M=C(x);const K=ne("svelte-skzsmw",Z.head);g=l(K,"STYLE",{lang:!0,"data-svelte-h":!0}),E(g)!=="svelte-1m6wti8"&&(g.textContent=W),K.forEach(f),this.h()},h(){e(c,"class","svelte-1ouma4k"),e(r,"class","svelte-1ouma4k"),e(n,"class","svelte-1ouma4k"),e(b,"class","svelte-1ouma4k"),e(i,"name","password"),e(i,"type","password"),i.required=!0,e(i,"minlength","5"),e(i,"placeholder","Use a password manager"),e(i,"class","svelte-1ouma4k"),e(y,"class","svelte-1ouma4k"),e(u,"name","confirm_password"),e(u,"type","password"),u.required=!0,e(u,"minlength","5"),e(u,"placeholder","Confirm your password"),e(u,"class","svelte-1ouma4k"),e(k,"class","svelte-1ouma4k"),e(w,"class","svelte-1ouma4k"),e(t,"id","signup"),e(t,"method","POST"),e(t,"class","svelte-1ouma4k"),e(s,"class","svelte-1ouma4k"),e(g,"lang","scss")},m(x,d){Y(x,s,d),a(s,c),a(s,_),a(s,r),a(s,h),a(s,t),a(t,n),a(t,N),a(t,b),a(t,P),a(t,y),a(y,H),a(y,i),a(t,I),a(t,k),a(k,S),a(k,u),a(t,q),a(t,w),Y(x,M,d),a(Z.head,g),D||(z=[O(i,"change",V(j)),O(u,"change",V(j)),O(t,"submit",V(p[0]))],D=!0)},p:F,i:F,o:F,d(x){x&&(f(s),f(M)),f(g),D=!1,se(z)}}}function j(){const p=document.getElementsByName("password")[0],s=document.getElementsByName("confirm_password")[0];return p.value==s.value}function de(p,s,c){let v,_;le(p,ue,h=>c(1,_=h));let r=oe(me).username;re(()=>{r&&X(`/@${r}`)});async function T(h){const t=document.getElementsByTagName("button")[0];if(t.disabled=!0,h.target.checkValidity&&j()){let n=new FormData(h.target);console.log(n),n.get("username")&&n.get("display_name")&&n.get("password")&&(v==null||v.create_user(String(n.get("username")),String(n.get("display_name")),String(n.get("password"))).then(B=>{X("/login")}))}else console.error("FORM INVALID")}return p.$$.update=()=>{p.$$.dirty&2&&(v=_)},[T,_]}class _e extends ee{constructor(s){super(),te(this,s,de,ce,ae,{})}}export{_e as component};
