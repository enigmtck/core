import{s as ee,f as l,a as C,l as Y,g as r,h as P,u as M,c as L,m as J,d as f,r as te,j as e,i as Q,v as s,D as U,E as V,G as j,M as se,w as ae,x as ne,o as le}from"../chunks/scheduler.tnyNm5U0.js";import{g as re}from"../chunks/globals.0cDDIVm6.js";import{S as oe,i as ie}from"../chunks/index.R_ElRwcJ.js";import{e as ce,a as ue}from"../chunks/stores.bABpd-zC.js";import{g as X}from"../chunks/navigation._3dZ04L8.js";const{document:Z}=re;function de(h){let a,m,_="ENIGMATICK",v,o,T="Create Account",g,t,n,E=`Username
			<input name="username" type="text" placeholder="bob" class="svelte-157e9qb"/>`,k,i,S=`Display Name
			<input name="display_name" type="text" placeholder="Bob Anderson" class="svelte-157e9qb"/>`,N,y,B,c,H,w,I,u,D,x,G='<button class="svelte-157e9qb">Create Account</button>',A,b,R=`body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  display: block;
  background: white;
}
@media screen and (max-width: 600px) {
  body {
    background: #fafafa;
  }
}`,$,W;return{c(){a=l("main"),m=l("h1"),m.textContent=_,v=C(),o=l("h2"),o.textContent=T,g=C(),t=l("form"),n=l("label"),n.innerHTML=E,k=C(),i=l("label"),i.innerHTML=S,N=C(),y=l("label"),B=Y(`Password
			`),c=l("input"),H=C(),w=l("label"),I=Y(`Confirm Password
			`),u=l("input"),D=C(),x=l("div"),x.innerHTML=G,A=C(),b=l("style"),b.textContent=R,this.h()},l(q){a=r(q,"MAIN",{class:!0});var p=P(a);m=r(p,"H1",{class:!0,"data-svelte-h":!0}),M(m)!=="svelte-1bn9c6g"&&(m.textContent=_),v=L(p),o=r(p,"H2",{class:!0,"data-svelte-h":!0}),M(o)!=="svelte-lqaecl"&&(o.textContent=T),g=L(p),t=r(p,"FORM",{id:!0,method:!0,class:!0});var d=P(t);n=r(d,"LABEL",{class:!0,"data-svelte-h":!0}),M(n)!=="svelte-onj7mi"&&(n.innerHTML=E),k=L(d),i=r(d,"LABEL",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-1umteht"&&(i.innerHTML=S),N=L(d),y=r(d,"LABEL",{class:!0});var F=P(y);B=J(F,`Password
			`),c=r(F,"INPUT",{name:!0,type:!0,minlength:!0,placeholder:!0,class:!0}),F.forEach(f),H=L(d),w=r(d,"LABEL",{class:!0});var O=P(w);I=J(O,`Confirm Password
			`),u=r(O,"INPUT",{name:!0,type:!0,minlength:!0,placeholder:!0,class:!0}),O.forEach(f),D=L(d),x=r(d,"DIV",{class:!0,"data-svelte-h":!0}),M(x)!=="svelte-1msvkw3"&&(x.innerHTML=G),d.forEach(f),p.forEach(f),A=L(q);const K=te("svelte-1s0zqhx",Z.head);b=r(K,"STYLE",{lang:!0,"data-svelte-h":!0}),M(b)!=="svelte-16pe6kz"&&(b.textContent=R),K.forEach(f),this.h()},h(){e(m,"class","svelte-157e9qb"),e(o,"class","svelte-157e9qb"),e(n,"class","svelte-157e9qb"),e(i,"class","svelte-157e9qb"),e(c,"name","password"),e(c,"type","password"),c.required=!0,e(c,"minlength","5"),e(c,"placeholder","Provides access to the server"),e(c,"class","svelte-157e9qb"),e(y,"class","svelte-157e9qb"),e(u,"name","confirm_password"),e(u,"type","password"),u.required=!0,e(u,"minlength","5"),e(u,"placeholder","Confirm your password"),e(u,"class","svelte-157e9qb"),e(w,"class","svelte-157e9qb"),e(x,"class","svelte-157e9qb"),e(t,"id","signup"),e(t,"method","POST"),e(t,"class","svelte-157e9qb"),e(a,"class","svelte-157e9qb"),e(b,"lang","scss")},m(q,p){Q(q,a,p),s(a,m),s(a,v),s(a,o),s(a,g),s(a,t),s(t,n),s(t,k),s(t,i),s(t,N),s(t,y),s(y,B),s(y,c),s(t,H),s(t,w),s(w,I),s(w,u),s(t,D),s(t,x),Q(q,A,p),s(Z.head,b),$||(W=[U(c,"change",V(z)),U(u,"change",V(z)),U(t,"submit",V(h[0]))],$=!0)},p:j,i:j,o:j,d(q){q&&(f(a),f(A)),f(b),$=!1,se(W)}}}function z(){const h=document.getElementsByName("password")[0],a=document.getElementsByName("confirm_password")[0];return h.value==a.value}function me(h,a,m){let _,v;ae(h,ce,g=>m(1,v=g));let o=ne(ue).username;le(()=>{o&&X(`/@${o}`)});async function T(g){const t=document.getElementsByTagName("button")[0];if(t.disabled=!0,g.target.checkValidity&&z()){let n=new FormData(g.target);console.log(n);let E=_?.create_olm_account();if(E){let k=_?.get_identity_public_key(E),i=_?.get_one_time_keys(E);n.get("username")&&n.get("display_name")&&n.get("password")&&k&&i&&_?.create_user(String(n.get("username")),String(n.get("display_name")),String(n.get("password")),String(k),String(i.pickled_account)).then(S=>{X("/login")})}}else console.error("FORM INVALID")}return h.$$.update=()=>{h.$$.dirty&2&&(_=v)},[T,v]}class fe extends oe{constructor(a){super(),ie(this,a,me,de,ee,{})}}export{fe as component};
