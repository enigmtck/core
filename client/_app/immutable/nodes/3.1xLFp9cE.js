import{_ as Sl}from"../chunks/preload-helper.0HuHagjb.js";import{s as Al,H as Ze,a as M,f as k,c as F,g as y,h as A,d,j as c,i as S,w as Se,o as Il,e as pe,I as Ol,v as g,D as W,E as se,p as Le,J as zl,G as E,l as ae,m as fe,F as Me,C as Ne,n as Je,k as Ll,K as je,L as Ke,u as ue,M as Ge,N as Bl}from"../chunks/scheduler.tnyNm5U0.js";import{S as Ml,i as Fl,a as O,g as be,t as P,c as ve,b as Ce,d as De,m as Be,e as Pe}from"../chunks/index.R_ElRwcJ.js";import{p as Pl}from"../chunks/stores.pW2nSyfW.js";import{C as Rl,s as Vl,a as Jl}from"../chunks/Compose.wT4Gt7uh.js";import{a as Hl,e as Ul}from"../chunks/stores.bABpd-zC.js";import{c as Fe,i as Te,D as jl,g as $e}from"../chunks/common.wRqRBlgV.js";import{h as He,u as Cl,R as Kl,A as Gl}from"../chunks/Article.hxzUsjyw.js";import{e as Ue}from"../chunks/each.-oqiv04n.js";import"../chunks/paths.4Fk-lbdf.js";function xe(i,e,n){const s=i.slice();return s[30]=e[n],s}function el(i,e,n){const s=i.slice();return s[33]=e[n],s}function ll(i){let e,n,s={senderFunction:i[9]};return e=new Rl({props:s}),i[16](e),{c(){Ce(e.$$.fragment)},l(l){De(e.$$.fragment,l)},m(l,t){Be(e,l,t),n=!0},p(l,t){const o={};e.$set(o)},i(l){n||(O(e.$$.fragment,l),n=!0)},o(l){P(e.$$.fragment,l),n=!1},d(l){i[16](null),Pe(e,l)}}}function tl(i){let e,n,s,l=Ue(Array.from(i[3].values()).sort(Fe).reverse()),t=[];for(let a=0;a<l.length;a+=1)t[a]=ol(xe(i,l,a));const o=a=>P(t[a],1,1,()=>{t[a]=null});let r=i[1]&&rl(i);return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=M(),r&&r.c(),n=pe()},l(a){for(let m=0;m<t.length;m+=1)t[m].l(a);e=F(a),r&&r.l(a),n=pe()},m(a,m){for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(a,m);S(a,e,m),r&&r.m(a,m),S(a,n,m),s=!0},p(a,m){if(m[0]&7593){l=Ue(Array.from(a[3].values()).sort(Fe).reverse());let f;for(f=0;f<l.length;f+=1){const _=xe(a,l,f);t[f]?(t[f].p(_,m),O(t[f],1)):(t[f]=ol(_),t[f].c(),O(t[f],1),t[f].m(e.parentNode,e))}for(be(),f=l.length;f<t.length;f+=1)o(f);ve()}a[1]?r?r.p(a,m):(r=rl(a),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},i(a){if(!s){for(let m=0;m<l.length;m+=1)O(t[m]);s=!0}},o(a){t=t.filter(Boolean);for(let m=0;m<t.length;m+=1)P(t[m]);s=!1},d(a){a&&(d(e),d(n)),Ol(t,a),r&&r.d(a)}}}function nl(i){let e,n,s,l,t={ctx:i,current:null,token:null,hasCatch:!1,pending:Zl,then:ql,catch:Wl,value:36,blocks:[,,,]};He(e=i[10](i[30].note),t);let o=i[30].note.id==al&&i[30].replies?.size&&sl(i);return{c(){t.block.c(),n=M(),o&&o.c(),s=pe()},l(r){t.block.l(r),n=F(r),o&&o.l(r),s=pe()},m(r,a){t.block.m(r,t.anchor=a),t.mount=()=>n.parentNode,t.anchor=n,S(r,n,a),o&&o.m(r,a),S(r,s,a),l=!0},p(r,a){i=r,t.ctx=i,a[0]&8&&e!==(e=i[10](i[30].note))&&He(e,t)||Cl(t,i,a),i[30].note.id==al&&i[30].replies?.size?o?(o.p(i,a),a[0]&8&&O(o,1)):(o=sl(i),o.c(),O(o,1),o.m(s.parentNode,s)):o&&(be(),P(o,1,1,()=>{o=null}),ve())},i(r){l||(O(t.block),O(o),l=!0)},o(r){for(let a=0;a<3;a+=1){const m=t.blocks[a];P(m)}P(o),l=!1},d(r){r&&(d(n),d(s)),t.block.d(r),t.token=null,t=null,o&&o.d(r)}}}function Wl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function ql(i){let e,n,s,l={ctx:i,current:null,token:null,hasCatch:!1,pending:Xl,then:Ql,catch:Yl,value:37,blocks:[,,,]};return He(n=i[11](i[30].note),l),{c(){e=pe(),l.block.c()},l(t){e=pe(),l.block.l(t)},m(t,o){S(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e,s=!0},p(t,o){i=t,l.ctx=i,o[0]&8&&n!==(n=i[11](i[30].note))&&He(n,l)||Cl(l,i,o)},i(t){s||(O(l.block),s=!0)},o(t){for(let o=0;o<3;o+=1){const r=l.blocks[o];P(r)}s=!1},d(t){t&&d(e),l.block.d(t),l.token=null,l=null}}}function Yl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function Ql(i){let e,n;return e=new Gl({props:{remove:i[8],refresh:i[7],note:i[30],username:i[12],replyToHeader:i[36],announceHeader:i[37],renderAction:i[5]}}),e.$on("replyTo",function(){zl(i[0].handleReplyToMessage)&&i[0].handleReplyToMessage.apply(this,arguments)}),e.$on("noteSelect",Dl),{c(){Ce(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,l){Be(e,s,l),n=!0},p(s,l){i=s;const t={};l[0]&8&&(t.note=i[30]),l[0]&8&&(t.replyToHeader=i[36]),l[0]&8&&(t.announceHeader=i[37]),e.$set(t)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Pe(e,s)}}}function Xl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function Zl(i){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function sl(i){let e,n,s=Ue(Array.from(i[30].replies.values()).sort(Fe)),l=[];for(let o=0;o<s.length;o+=1)l[o]=il(el(i,s,o));const t=o=>P(l[o],1,1,()=>{l[o]=null});return{c(){e=k("div");for(let o=0;o<l.length;o+=1)l[o].c();this.h()},l(o){e=y(o,"DIV",{class:!0});var r=A(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(d),this.h()},h(){c(e,"class","replies")},m(o,r){S(o,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null);n=!0},p(o,r){if(r[0]&4105){s=Ue(Array.from(o[30].replies.values()).sort(Fe));let a;for(a=0;a<s.length;a+=1){const m=el(o,s,a);l[a]?(l[a].p(m,r),O(l[a],1)):(l[a]=il(m),l[a].c(),O(l[a],1),l[a].m(e,null))}for(be(),a=s.length;a<l.length;a+=1)t(a);ve()}},i(o){if(!n){for(let r=0;r<s.length;r+=1)O(l[r]);n=!0}},o(o){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)P(l[r]);n=!1},d(o){o&&d(e),Ol(l,o)}}}function il(i){let e,n;return e=new Kl({props:{note:i[33],username:i[12]}}),e.$on("replyTo",function(){zl(i[0].handleReplyToMessage)&&i[0].handleReplyToMessage.apply(this,arguments)}),e.$on("noteSelect",Dl),{c(){Ce(e.$$.fragment)},l(s){De(e.$$.fragment,s)},m(s,l){Be(e,s,l),n=!0},p(s,l){i=s;const t={};l[0]&8&&(t.note=i[33]),e.$set(t)},i(s){n||(O(e.$$.fragment,s),n=!0)},o(s){P(e.$$.fragment,s),n=!1},d(s){Pe(e,s)}}}function ol(i){let e,n,s=i[30].note&&nl(i);return{c(){s&&s.c(),e=pe()},l(l){s&&s.l(l),e=pe()},m(l,t){s&&s.m(l,t),S(l,e,t),n=!0},p(l,t){l[30].note?s?(s.p(l,t),t[0]&8&&O(s,1)):(s=nl(l),s.c(),O(s,1),s.m(e.parentNode,e)):s&&(be(),P(s,1,1,()=>{s=null}),ve())},i(l){n||(O(s),n=!0)},o(l){P(s),n=!1},d(l){l&&d(e),s&&s.d(l)}}}function rl(i){let e,n,s,l;return{c(){e=k("button"),n=k("i"),this.h()},l(t){e=y(t,"BUTTON",{class:!0});var o=A(e);n=y(o,"I",{class:!0}),A(n).forEach(d),o.forEach(d),this.h()},h(){c(n,"class","fa-solid fa-ellipsis"),e.disabled=i[2],c(e,"class","svelte-eycy8b")},m(t,o){S(t,e,o),g(e,n),s||(l=W(e,"click",se(i[17])),s=!0)},p(t,o){o[0]&4&&(e.disabled=t[2])},d(t){t&&d(e),s=!1,l()}}}function $l(i){let e,n,s,l=i[4]&&ll(i),t=i[4]&&tl(i);return{c(){l&&l.c(),e=M(),n=k("main"),t&&t.c(),this.h()},l(o){l&&l.l(o),e=F(o),n=y(o,"MAIN",{class:!0});var r=A(n);t&&t.l(r),r.forEach(d),this.h()},h(){c(n,"class","svelte-eycy8b")},m(o,r){l&&l.m(o,r),S(o,e,r),S(o,n,r),t&&t.m(n,null),s=!0},p(o,r){o[4]?l?(l.p(o,r),r[0]&16&&O(l,1)):(l=ll(o),l.c(),O(l,1),l.m(e.parentNode,e)):l&&(be(),P(l,1,1,()=>{l=null}),ve()),o[4]?t?(t.p(o,r),r[0]&16&&O(t,1)):(t=tl(o),t.c(),O(t,1),t.m(n,null)):t&&(be(),P(t,1,1,()=>{t=null}),ve())},i(o){s||(O(l),O(t),s=!0)},o(o){P(l),P(t),s=!1},d(o){o&&(d(e),d(n)),l&&l.d(o),t&&t.d()}}}let al=null;function xl(i){for(let e of i)if(e.isIntersecting&&e.target){let n=e.target;if(n.dataset){let s=n.dataset;console.log(s.conversation)}}}function fl(i){if(i)try{return JSON.parse(i)}catch{return console.error("UNABLE TO PARSE PROFILE"),console.debug(i),null}else return console.error("UNABLE TO PARSE NULL OR UNDEFINED"),null}function Dl(){console.debug("NOT IMPLEMENTED")}function et(i,e,n){let s,l,t,o;Se(i,Hl,u=>n(20,t=u)),Se(i,Ul,u=>n(15,o=u));let r,{local:a}=e,{handle:m}=e,f=null;function _(u){f&&f.observe(u)}Il(async()=>{const{Buffer:u}=await Sl(()=>import("../chunks/index.aMiLl7Je.js").then(h=>h.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=u,f=new IntersectionObserver(xl,{root:null,threshold:.3})}),console.debug(`HANDLE ${m}`);async function N(u){const h=u.orderedItems;if(console.debug(h),h){for(const v of h)if(v.type==="Create")ce(v.object);else if(v.type==="Announce"){let L=await s?.get_note(String(v.object));if(L){const H=JSON.parse(L);console.debug(v),v.actor&&(H.ephemeralAnnounces=[v.actor]),ce(H)}}}n(1,Z=u.next||null),q=u.prev||null}async function Q(u,h){n(3,l=new Map);let v=s?.get_state();if(v){let L=v.get_server_url();if(h&&u){const H=await s?.get_outbox(`${L}/user/${u}/outbox?page=true`);if(H){const C=JSON.parse(H);console.debug(C),N(C).then(()=>{n(2,Y=!1)})}}else s?.get_remote_outbox(`@${u}`).then(H=>{if(H){const C=JSON.parse(H);s?.get_remote_outbox(`@${u}`,C.first).then(de=>{if(de){const ee=JSON.parse(de);N(ee).then(()=>{n(2,Y=!1)})}})}})}}async function te(u){let h=null;!u&&Z?h=Z:q&&(h=q),h&&(n(2,Y=!0),a?s?.get_outbox(h).then(v=>{if(v){const L=JSON.parse(v);N(L).then(()=>{n(2,Y=!1)})}}):s?.get_remote_outbox(`@${m}`,h).then(v=>{if(v){const L=JSON.parse(v);N(L).then(()=>{n(2,Y=!1)})}}))}function ie(){console.debug("REFRESH"),l.clear(),Q(m,a).then(u=>{console.log("LOADED")})}function oe(u){l.delete(u),n(3,l)}async function ce(u){u.ephemeralActors&&u.ephemeralActors.forEach(v=>{v.id&&R.set(v.id,JSON.stringify(v))}),u.ephemeralLikes&&(console.debug("EPHEMERAL LIKES"),console.debug(u.ephemeralLikes));const h=await X(u.attributedTo);if(h){let v=JSON.parse(h);const L=new jl(v,u);l.get(String(u.id))||(l.set(String(u.id),L),B.set(String(u.id),[String(u.id)]))}n(3,l)}async function me(u,h,v,L,H){if(s){let C=(await s.SendParams.new()).set_content(L).set_public();return C=C.set_attachments(JSON.stringify(H)),h&&(C=await C.add_recipient_id(String(u),!0),C=C.set_in_reply_to(String(h)),C=C.set_conversation(String(v))),await s.send_note(C)}else return!1}async function J(u){if(u.inReplyTo){const h=await $(u.inReplyTo);if(h){const v=JSON.parse(String(h)),L=await X(v.attributedTo),H=fl(L);return H?Te(s,H.name||H.preferredUsername,H):null}else return null}else return null}async function re(u){if(u.ephemeralAnnounces){const h=await X(u.ephemeralAnnounces[0]);let v="";if(u.ephemeralAnnounces.length==2?v=` and ${u.ephemeralAnnounces.length-1} other`:u.ephemeralAnnounces.length>2&&(v=` and ${u.ephemeralAnnounces.length-1} others`),h){const L=fl(h);if(L){const H=Te(s,L.name||L.preferredUsername,L);return{url:L.url,name:H,others:v}}else return null}else return null}else return null}async function X(u){return s&&!R.has(u)&&R.set(u,await s.get_actor(u)),R.get(u)}async function $(u){return s&&!R.has(u)&&R.set(u,await s.get_note(u)),R.get(u)}let B=new Map,R=new Map,_e=t.username,Z=null,q=null,Y=!0;function he(u){Le[u?"unshift":"push"](()=>{r=u,n(0,r)})}const x=()=>te(!1);return i.$$set=u=>{"local"in u&&n(13,a=u.local),"handle"in u&&n(14,m=u.handle)},i.$$.update=()=>{i.$$.dirty[0]&32768&&n(4,s=o),i.$$.dirty[0]&24576&&Q(m,a).then(()=>{console.debug("RELOADED")})},n(3,l=new Map),[r,Z,Y,l,s,_,te,ie,oe,me,J,re,_e,a,m,o,he,x]}class lt extends Ml{constructor(e){super(),Fl(this,e,et,$l,Al,{local:13,handle:14},null,[-1,-1])}get local(){return this.$$.ctx[13]}set local(e){this.$$set({local:e}),Ze()}get handle(){return this.$$.ctx[14]}set handle(e){this.$$set({handle:e}),Ze()}}function ul(i){let e,n,s,l,t,o,r,a,m,f,_,N,Q,te=$e(i[10])+"",ie,oe,ce,me,J,re,X,$,B,R,_e,Z,q,Y,he,x,u,h,v,L,H=(i[10].ephemeralLeaders?.length||i[8])+"",C,de,ee,Ee,ge=(i[10].ephemeralFollowers?.length||i[7])+"",ke,ye,p,w,T=i[13]&&cl(i),z=i[10].image&&ml(i),D=i[13]&&hl(i),U=i[10].name&&dl(i),V=i[13]&&pl(i),j=i[5]&&Tl(i),K=i[13]&&!i[5]&&El(i),G=!i[13]&&Nl(i),le=i[24]===i[23].Posts&&st(i);return{c(){e=k("div"),n=k("div"),T&&T.c(),s=M(),z&&z.c(),l=M(),t=k("div"),o=k("div"),D&&D.c(),r=M(),a=k("img"),f=M(),_=k("div"),U&&U.c(),N=M(),Q=k("a"),ie=ae(te),ce=M(),V&&V.c(),me=M(),J=k("div"),j&&j.c(),re=M(),K&&K.c(),X=M(),G&&G.c(),$=M(),B=k("div"),R=k("button"),_e=ae("Articles"),Z=M(),q=k("button"),Y=ae("Posts"),he=M(),x=k("button"),u=ae("Gallery"),h=M(),v=k("button"),L=ae("Following • "),C=ae(H),de=M(),ee=k("button"),Ee=ae("Followers • "),ke=ae(ge),ye=M(),p=k("section"),le&&le.c(),this.h()},l(b){e=y(b,"DIV",{class:!0});var I=A(e);n=y(I,"DIV",{class:!0});var Ae=A(n);T&&T.l(Ae),s=F(Ae),z&&z.l(Ae),Ae.forEach(d),l=F(I),t=y(I,"DIV",{class:!0});var Ie=A(t);o=y(Ie,"DIV",{class:!0});var Oe=A(o);D&&D.l(Oe),r=F(Oe),a=y(Oe,"IMG",{src:!0,alt:!0,class:!0}),Oe.forEach(d),f=F(Ie),_=y(Ie,"DIV",{class:!0});var ze=A(_);U&&U.l(ze),N=F(ze),Q=y(ze,"A",{href:!0,class:!0});var We=A(Q);ie=fe(We,te),We.forEach(d),ze.forEach(d),Ie.forEach(d),ce=F(I),V&&V.l(I),me=F(I),J=y(I,"DIV",{class:!0});var we=A(J);j&&j.l(we),re=F(we),K&&K.l(we),X=F(we),G&&G.l(we),we.forEach(d),$=F(I),B=y(I,"DIV",{class:!0});var ne=A(B);R=y(ne,"BUTTON",{class:!0});var qe=A(R);_e=fe(qe,"Articles"),qe.forEach(d),Z=F(ne),q=y(ne,"BUTTON",{class:!0});var Ye=A(q);Y=fe(Ye,"Posts"),Ye.forEach(d),he=F(ne),x=y(ne,"BUTTON",{class:!0});var Qe=A(x);u=fe(Qe,"Gallery"),Qe.forEach(d),h=F(ne),v=y(ne,"BUTTON",{class:!0});var Re=A(v);L=fe(Re,"Following • "),C=fe(Re,H),Re.forEach(d),de=F(ne),ee=y(ne,"BUTTON",{class:!0});var Ve=A(ee);Ee=fe(Ve,"Followers • "),ke=fe(Ve,ge),Ve.forEach(d),ne.forEach(d),I.forEach(d),ye=F(b),p=y(b,"SECTION",{class:!0});var Xe=A(p);le&&le.l(Xe),Xe.forEach(d),this.h()},h(){c(n,"class","banner svelte-1af8zng"),Me(a.src,m=i[10].icon?.url)||c(a,"src",m),c(a,"alt","Avatar"),c(a,"class","svelte-1af8zng"),c(o,"class","avatar svelte-1af8zng"),c(Q,"href",oe=i[10].url),c(Q,"class","svelte-1af8zng"),c(_,"class","details svelte-1af8zng"),c(t,"class","identity svelte-1af8zng"),c(J,"class","summary svelte-1af8zng"),c(R,"class",Ne(i[24]===i[23].Articles?"selected":"")+" svelte-1af8zng"),c(q,"class",Ne(i[24]===i[23].Posts?"selected":"")+" svelte-1af8zng"),c(x,"class",Ne(i[24]===i[23].Gallery?"selected":"")+" svelte-1af8zng"),c(v,"class",Ne(i[24]===i[23].Following?"selected":"")+" svelte-1af8zng"),c(ee,"class",Ne(i[24]===i[23].Followers?"selected":"")+" svelte-1af8zng"),c(B,"class","tabs svelte-1af8zng"),c(e,"class","profile svelte-1af8zng"),c(p,"class","svelte-1af8zng")},m(b,I){S(b,e,I),g(e,n),T&&T.m(n,null),g(n,s),z&&z.m(n,null),g(e,l),g(e,t),g(t,o),D&&D.m(o,null),g(o,r),g(o,a),g(t,f),g(t,_),U&&U.m(_,null),g(_,N),g(_,Q),g(Q,ie),g(e,ce),V&&V.m(e,null),g(e,me),g(e,J),j&&j.m(J,null),g(J,re),K&&K.m(J,null),g(J,X),G&&G.m(J,null),g(e,$),g(e,B),g(B,R),g(R,_e),g(B,Z),g(B,q),g(q,Y),g(B,he),g(B,x),g(x,u),g(B,h),g(B,v),g(v,L),g(v,C),g(B,de),g(B,ee),g(ee,Ee),g(ee,ke),S(b,ye,I),S(b,p,I),le&&le.m(p,null),w=!0},p(b,I){b[13]?T?T.p(b,I):(T=cl(b),T.c(),T.m(n,s)):T&&(T.d(1),T=null),b[10].image?z?z.p(b,I):(z=ml(b),z.c(),z.m(n,null)):z&&(z.d(1),z=null),b[13]?D?D.p(b,I):(D=hl(b),D.c(),D.m(o,r)):D&&(D.d(1),D=null),(!w||I[0]&1024&&!Me(a.src,m=b[10].icon?.url))&&c(a,"src",m),b[10].name?U?U.p(b,I):(U=dl(b),U.c(),U.m(_,N)):U&&(U.d(1),U=null),(!w||I[0]&1024)&&te!==(te=$e(b[10])+"")&&Je(ie,te),(!w||I[0]&1024&&oe!==(oe=b[10].url))&&c(Q,"href",oe),b[13]?V?V.p(b,I):(V=pl(b),V.c(),V.m(e,me)):V&&(V.d(1),V=null),b[5]?j?j.p(b,I):(j=Tl(b),j.c(),j.m(J,re)):j&&(j.d(1),j=null),b[13]&&!b[5]?K?K.p(b,I):(K=El(b),K.c(),K.m(J,X)):K&&(K.d(1),K=null),b[13]?G&&(G.d(1),G=null):G?G.p(b,I):(G=Nl(b),G.c(),G.m(J,null)),(!w||I[0]&1280)&&H!==(H=(b[10].ephemeralLeaders?.length||b[8])+"")&&Je(C,H),(!w||I[0]&1152)&&ge!==(ge=(b[10].ephemeralFollowers?.length||b[7])+"")&&Je(ke,ge),b[24]===b[23].Posts&&le.p(b,I)},i(b){w||(O(le),w=!0)},o(b){P(le),w=!1},d(b){b&&(d(e),d(ye),d(p)),T&&T.d(),z&&z.d(),D&&D.d(),U&&U.d(),V&&V.d(),j&&j.d(),K&&K.d(),G&&G.d(),le&&le.d()}}}function cl(i){let e,n,s;return{c(){e=k("input"),this.h()},l(l){e=y(l,"INPUT",{style:!0,type:!0,accept:!0}),this.h()},h(){Ll(e,"display","none"),c(e,"type","file"),c(e,"accept",".jpg, .jpeg, .png")},m(l,t){S(l,e,t),i[27](e),n||(s=W(e,"change",i[26]),n=!0)},p:E,d(l){l&&d(e),i[27](null),n=!1,s()}}}function ml(i){let e,n;return{c(){e=k("img"),this.h()},l(s){e=y(s,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Me(e.src,n=i[10].image.url)||c(e,"src",n),c(e,"alt","Banner"),c(e,"class","svelte-1af8zng")},m(s,l){S(s,e,l)},p(s,l){l[0]&1024&&!Me(e.src,n=s[10].image.url)&&c(e,"src",n)},d(s){s&&d(e)}}}function hl(i){let e,n,s;return{c(){e=k("input"),this.h()},l(l){e=y(l,"INPUT",{style:!0,type:!0,accept:!0}),this.h()},h(){Ll(e,"display","none"),c(e,"type","file"),c(e,"accept",".jpg, .jpeg, .png")},m(l,t){S(l,e,t),i[29](e),n||(s=W(e,"change",i[28]),n=!0)},p:E,d(l){l&&d(e),i[29](null),n=!1,s()}}}function dl(i){let e,n,s=Te(i[12],i[10].name,i[10])+"";return{c(){e=k("h1"),n=new je(!1),this.h()},l(l){e=y(l,"H1",{class:!0});var t=A(e);n=Ke(t,!1),t.forEach(d),this.h()},h(){n.a=null,c(e,"class","svelte-1af8zng")},m(l,t){S(l,e,t),n.m(s,e)},p(l,t){t[0]&5120&&s!==(s=Te(l[12],l[10].name,l[10])+"")&&n.p(s)},d(l){l&&d(e)}}}function pl(i){let e,n=i[1].domain&&(!i[10].id?.includes(i[1].domain)||i[10].preferredUsername!==i[13]),s,l,t=n&&_l(i),o=i[11]&&i[10].preferredUsername===i[13]&&kl(i);function r(f,_){if(f[5])return nt;if(f[4])return tt}let a=r(i),m=a&&a(i);return{c(){e=k("div"),t&&t.c(),s=M(),o&&o.c(),l=M(),m&&m.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var _=A(e);t&&t.l(_),s=F(_),o&&o.l(_),l=F(_),m&&m.l(_),_.forEach(d),this.h()},h(){c(e,"class","controls svelte-1af8zng")},m(f,_){S(f,e,_),t&&t.m(e,null),g(e,s),o&&o.m(e,null),g(e,l),m&&m.m(e,null)},p(f,_){_[0]&9218&&(n=f[1].domain&&(!f[10].id?.includes(f[1].domain)||f[10].preferredUsername!==f[13])),n?t?t.p(f,_):(t=_l(f),t.c(),t.m(e,s)):t&&(t.d(1),t=null),f[11]&&f[10].preferredUsername===f[13]?o?o.p(f,_):(o=kl(f),o.c(),o.m(e,l)):o&&(o.d(1),o=null),a===(a=r(f))&&m?m.p(f,_):(m&&m.d(1),m=a&&a(f),m&&(m.c(),m.m(e,null)))},d(f){f&&d(e),t&&t.d(),o&&o.d(),m&&m.d()}}}function _l(i){let e,n,s,l=!i[10].ephemeralFollowing&&gl(i),t=i[10].ephemeralFollowing!==void 0&&i[10].ephemeralFollowing&&bl(i),o=i[10].capabilities&&i[10].capabilities.enigmatickEncryption&&vl(i);return{c(){e=k("div"),l&&l.c(),n=M(),t&&t.c(),s=M(),o&&o.c(),this.h()},l(r){e=y(r,"DIV",{class:!0});var a=A(e);l&&l.l(a),n=F(a),t&&t.l(a),s=F(a),o&&o.l(a),a.forEach(d),this.h()},h(){c(e,"class","svelte-1af8zng")},m(r,a){S(r,e,a),l&&l.m(e,null),g(e,n),t&&t.m(e,null),g(e,s),o&&o.m(e,null)},p(r,a){r[10].ephemeralFollowing?l&&(l.d(1),l=null):l?l.p(r,a):(l=gl(r),l.c(),l.m(e,n)),r[10].ephemeralFollowing!==void 0&&r[10].ephemeralFollowing?t?t.p(r,a):(t=bl(r),t.c(),t.m(e,s)):t&&(t.d(1),t=null),r[10].capabilities&&r[10].capabilities.enigmatickEncryption?o?o.p(r,a):(o=vl(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(r){r&&d(e),l&&l.d(),t&&t.d(),o&&o.d()}}}function gl(i){let e,n='<i class="fa-solid fa-user-plus svelte-1af8zng"></i>',s,l;return{c(){e=k("button"),e.innerHTML=n,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-mbdjen"&&(e.innerHTML=n),this.h()},h(){c(e,"title","Follow"),c(e,"class","svelte-1af8zng")},m(t,o){S(t,e,o),s||(l=W(e,"click",se(i[20])),s=!0)},p:E,d(t){t&&d(e),s=!1,l()}}}function bl(i){let e,n,s,l,t;return{c(){e=k("button"),n=k("i"),this.h()},l(o){e=y(o,"BUTTON",{title:!0,"data-activity":!0,class:!0});var r=A(e);n=y(r,"I",{class:!0}),A(n).forEach(d),r.forEach(d),this.h()},h(){c(n,"class","fa-solid fa-user-minus svelte-1af8zng"),c(e,"title","Unfollow"),c(e,"data-activity",s=i[10].ephemeralFollowActivityApId),c(e,"class","svelte-1af8zng")},m(o,r){S(o,e,r),g(e,n),l||(t=W(e,"click",se(i[21])),l=!0)},p(o,r){r[0]&1024&&s!==(s=o[10].ephemeralFollowActivityApId)&&c(e,"data-activity",s)},d(o){o&&d(e),l=!1,t()}}}function vl(i){let e,n='<i class="fa-solid fa-key svelte-1af8zng"></i>',s,l;return{c(){e=k("button"),e.innerHTML=n,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-18id3tr"&&(e.innerHTML=n),this.h()},h(){c(e,"title","Exchange Keys"),c(e,"class","svelte-1af8zng")},m(t,o){S(t,e,o),s||(l=W(e,"click",se(i[22])),s=!0)},p:E,d(t){t&&d(e),s=!1,l()}}}function kl(i){let e,n,s='<i class="fa-solid fa-image-portrait svelte-1af8zng"></i>',l,t,o='<i class="fa-solid fa-panorama svelte-1af8zng"></i>',r,a,m,f=!i[5]&&yl(i);return{c(){e=k("div"),n=k("button"),n.innerHTML=s,l=M(),t=k("button"),t.innerHTML=o,r=M(),f&&f.c(),this.h()},l(_){e=y(_,"DIV",{class:!0});var N=A(e);n=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-1hu9osd"&&(n.innerHTML=s),l=F(N),t=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-1q2bt0g"&&(t.innerHTML=o),r=F(N),f&&f.l(N),N.forEach(d),this.h()},h(){c(n,"title","Change Avatar"),c(n,"class","svelte-1af8zng"),c(t,"title","Change Banner"),c(t,"class","svelte-1af8zng"),c(e,"class","svelte-1af8zng")},m(_,N){S(_,e,N),g(e,n),g(e,l),g(e,t),g(e,r),f&&f.m(e,null),a||(m=[W(n,"keypress",i[30]),W(n,"click",i[31]),W(t,"keypress",i[32]),W(t,"click",i[33])],a=!0)},p(_,N){_[5]?f&&(f.d(1),f=null):f?f.p(_,N):(f=yl(_),f.c(),f.m(e,null))},d(_){_&&d(e),f&&f.d(),a=!1,Ge(m)}}}function yl(i){let e,n='<i class="fa-solid fa-pencil svelte-1af8zng"></i>',s,l;return{c(){e=k("button"),e.innerHTML=n,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-1jsx8l0"&&(e.innerHTML=n),this.h()},h(){c(e,"title","Update Biography"),c(e,"class","svelte-1af8zng")},m(t,o){S(t,e,o),s||(l=[W(e,"click",se(i[14])),W(e,"keypress",se(i[14]))],s=!0)},p:E,d(t){t&&d(e),s=!1,Ge(l)}}}function tt(i){let e,n,s='<i class="fa-solid fa-floppy-disk svelte-1af8zng"></i>',l,t;return{c(){e=k("div"),n=k("button"),n.innerHTML=s,this.h()},l(o){e=y(o,"DIV",{class:!0});var r=A(e);n=y(r,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-rd8bib"&&(n.innerHTML=s),r.forEach(d),this.h()},h(){c(n,"title","Save"),c(n,"class","svelte-1af8zng"),c(e,"class","svelte-1af8zng")},m(o,r){S(o,e,r),g(e,n),l||(t=W(n,"click",se(i[17])),l=!0)},p:E,d(o){o&&d(e),l=!1,t()}}}function nt(i){let e,n,s='<i class="fa-solid fa-ban svelte-1af8zng"></i>',l,t,o='<i class="fa-solid fa-eye svelte-1af8zng"></i>',r,a,m,f=i[4]&&wl(i);return{c(){e=k("div"),n=k("button"),n.innerHTML=s,l=M(),t=k("button"),t.innerHTML=o,r=M(),f&&f.c(),this.h()},l(_){e=y(_,"DIV",{class:!0});var N=A(e);n=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(n)!=="svelte-kv8hcs"&&(n.innerHTML=s),l=F(N),t=y(N,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(t)!=="svelte-1epd74s"&&(t.innerHTML=o),r=F(N),f&&f.l(N),N.forEach(d),this.h()},h(){c(n,"title","Cancel"),c(n,"class","svelte-1af8zng"),c(t,"title","Preview"),c(t,"class","svelte-1af8zng"),c(e,"class","svelte-1af8zng")},m(_,N){S(_,e,N),g(e,n),g(e,l),g(e,t),g(e,r),f&&f.m(e,null),a||(m=[W(n,"click",se(i[16])),W(t,"click",se(i[15]))],a=!0)},p(_,N){_[4]?f?f.p(_,N):(f=wl(_),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(_){_&&d(e),f&&f.d(),a=!1,Ge(m)}}}function wl(i){let e,n='<i class="fa-solid fa-floppy-disk svelte-1af8zng"></i>',s,l;return{c(){e=k("button"),e.innerHTML=n,this.h()},l(t){e=y(t,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),ue(e)!=="svelte-166g12d"&&(e.innerHTML=n),this.h()},h(){c(e,"title","Save"),c(e,"class","svelte-1af8zng")},m(t,o){S(t,e,o),s||(l=W(e,"click",se(i[17])),s=!0)},p:E,d(t){t&&d(e),s=!1,l()}}}function Tl(i){let e,n;return{c(){e=k("pre"),n=ae(i[6]),this.h()},l(s){e=y(s,"PRE",{id:!0,contenteditable:!0,class:!0});var l=A(e);n=fe(l,i[6]),l.forEach(d),this.h()},h(){c(e,"id","summary_edit"),c(e,"contenteditable","true"),c(e,"class","svelte-1af8zng")},m(s,l){S(s,e,l),g(e,n)},p(s,l){l[0]&64&&Bl(n,s[6])},d(s){s&&d(e)}}}function El(i){let e,n,s=Te(i[12],i[10].summary||"",i[10])+"";return{c(){e=k("div"),n=new je(!1),this.h()},l(l){e=y(l,"DIV",{class:!0});var t=A(e);n=Ke(t,!1),t.forEach(d),this.h()},h(){n.a=null,c(e,"class","svelte-1af8zng")},m(l,t){S(l,e,t),n.m(s,e)},p(l,t){t[0]&5120&&s!==(s=Te(l[12],l[10].summary||"",l[10])+"")&&n.p(s)},d(l){l&&d(e)}}}function Nl(i){let e,n,s=(i[10].summary||"")+"";return{c(){e=k("span"),n=new je(!1),this.h()},l(l){e=y(l,"SPAN",{class:!0});var t=A(e);n=Ke(t,!1),t.forEach(d),this.h()},h(){n.a=null,c(e,"class","svelte-1af8zng")},m(l,t){S(l,e,t),n.m(s,e)},p(l,t){t[0]&1024&&s!==(s=(l[10].summary||"")+"")&&n.p(s)},d(l){l&&d(e)}}}function st(i){let e,n,s={handle:i[0].params.handle,local:i[11]};return e=new lt({props:s}),i[34](e),{c(){Ce(e.$$.fragment)},l(l){De(e.$$.fragment,l)},m(l,t){Be(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.handle=l[0].params.handle),t[0]&2048&&(o.local=l[11]),e.$set(o)},i(l){n||(O(e.$$.fragment,l),n=!0)},o(l){P(e.$$.fragment,l),n=!1},d(l){i[34](null),Pe(e,l)}}}function it(i){let e,n,s=i[10]&&ul(i);return{c(){e=k("main"),s&&s.c(),this.h()},l(l){e=y(l,"MAIN",{class:!0});var t=A(e);s&&s.l(t),t.forEach(d),this.h()},h(){c(e,"class","svelte-1af8zng")},m(l,t){S(l,e,t),s&&s.m(e,null),n=!0},p(l,t){l[10]?s?(s.p(l,t),t[0]&1024&&O(s,1)):(s=ul(l),s.c(),O(s,1),s.m(e,null)):s&&(be(),P(s,1,1,()=>{s=null}),ve())},i(l){n||(O(s),n=!0)},o(l){P(s),n=!1},d(l){l&&d(e),s&&s.d()}}}function ot(i,e,n){let s,l,t,o,r;Se(i,Pl,p=>n(0,t=p)),Se(i,Ul,p=>n(25,o=p)),Se(i,Hl,p=>n(1,r=p));const{Converter:a}=Jl;Il(async()=>{const{Buffer:p}=await Sl(()=>import("../chunks/index.aMiLl7Je.js").then(w=>w.i),__vite__mapDeps([0,1]),import.meta.url);window.Buffer=p});function m(p){console.debug(`INSTANCE DOMAIN: ${r.domain}`),p.includes("@")?(console.debug("REQUEST FOR REMOTE PROFILE"),n(11,v=!1),s?.get_actor_from_webfinger(`@${p}`).then(w=>{w&&(n(10,h=JSON.parse(w)),console.debug(h),u&&h&&(n(9,u.local=v,u),n(9,u.handle=p,u),n(9,u.profile=h,u)),s?.get_remote_followers(`@${p}`).then(T=>{if(T){let z=JSON.parse(T);n(7,he=z.totalItems)}}),s?.get_remote_following(`@${p}`).then(T=>{if(T){let z=JSON.parse(T);n(8,x=z.totalItems)}}))})):(n(11,v=!0),s?.get_profile_by_username(p).then(w=>{w&&(n(10,h=JSON.parse(w)),console.debug(h),u&&h&&(n(9,u.local=v,u),n(9,u.handle=p,u),n(9,u.profile=h,u)),n(6,Y=h?.ephemeralSummaryMarkdown||""))}))}function f(p){let w=new a({extensions:[Vl({pre:!0,auto_detection:!0})]});return w.setFlavor("github"),w.setOption("tables",!0),w.setOption("requireSpaceBeforeHeadingText",!0),w.makeHtml(p)}function _(p){(p instanceof KeyboardEvent&&(p.key==="Enter"||p.key===" ")||p instanceof MouseEvent&&p.type==="click")&&n(5,q=!0)}function N(p){let w=document.getElementById("summary_edit");if(w){let T=w.innerText;h&&(n(6,Y=T),n(5,q=!1),n(10,h.summary=f(T),h),n(4,Z=!0))}}function Q(p){n(5,q=!1)}function te(){h&&h.summary&&s?.update_summary(h.summary,Y).then(p=>{console.log(p),n(4,Z=!1)})}const ie=p=>{let w=p.target;if(w.files!==null){let T=w.files[0],z=String(T.name.match(/\.[0-9a-z]+$/i)).slice(1),D=new FileReader;D.readAsArrayBuffer(T),D.onload=U=>{if(U.target!==null){X=U.target.result!==null?U.target.result:null,console.log(X);let V=new Uint8Array(X);s?.upload_avatar(V,X.byteLength,z).then(()=>{m(t.params.handle)})}}}},oe=p=>{let w=p.target;if(w.files!==null){let T=w.files[0],z=String(T.name.match(/\.[0-9a-z]+$/i)).slice(1),D=new FileReader;D.readAsArrayBuffer(T),D.onload=U=>{if(U.target!==null){B=U.target.result!==null?U.target.result:null,console.log(B);let V=new Uint8Array(B);s?.upload_banner(V,B.byteLength,z).then(()=>{m(t.params.handle)})}}}};function ce(p){h&&h.id?(console.log("following: "+h.id),s?.send_follow(h.id).then(w=>{console.debug(`FOLLOW ${w}`),w&&h&&n(10,h.ephemeralFollowing=!0,h)})):console.log("no profile loaded")}function me(p){const w=String(p.target.dataset.activity);console.debug(`ACTIVITY ${w}`),console.debug(h),h&&h.id?(console.log("unfollowing: "+h.id),s?.send_unfollow(h.id,w).then(T=>{T&&h&&n(10,h.ephemeralFollowing=!1,h)})):console.log("no profile loaded")}async function J(p){console.log(p);let w=s?.KexInitParams.new();if(s&&h&&h.id&&w){let T=(await s.get_state()).get_olm_pickled_account();console.debug("PICKLED ACCOUNT"),console.debug(T);let z=s?.get_identity_public_key(String(T));console.debug("IDENTITY KEY"),console.debug(z),w.set_recipient_id(h.id),w.set_identity_key(String(z))}}const re={Articles:Symbol("articles"),Posts:Symbol("posts"),Gallery:Symbol("gallery"),Followers:Symbol("followers"),Following:Symbol("following")};let X,$,B,R,_e=re.Posts,Z=!1,q=!1,Y="",he=0,x=0,u,h=null,v=!0;const L=p=>oe(p);function H(p){Le[p?"unshift":"push"](()=>{R=p,n(3,R)})}const C=p=>ie(p);function de(p){Le[p?"unshift":"push"](()=>{$=p,n(2,$)})}const ee=()=>{$.click()},Ee=()=>{$.click()},ge=()=>{R.click()},ke=()=>{R.click()};function ye(p){Le[p?"unshift":"push"](()=>{u=p,n(9,u)})}return i.$$.update=()=>{i.$$.dirty[0]&33554432&&n(12,s=o),i.$$.dirty[0]&2&&n(13,l=r.username),i.$$.dirty[0]&33554433&&o&&m(t.params.handle)},[t,r,$,R,Z,q,Y,he,x,u,h,v,s,l,_,N,Q,te,ie,oe,ce,me,J,re,_e,o,L,H,C,de,ee,Ee,ge,ke,ye]}class gt extends Ml{constructor(e){super(),Fl(this,e,ot,it,Al,{},null,[-1,-1])}}export{gt as component};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["../chunks/index.aMiLl7Je.js","../chunks/_commonjsHelpers.5-cIlDoe.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}