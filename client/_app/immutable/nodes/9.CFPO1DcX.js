import"../chunks/CWj6FrbW.js";import{p as Y,o as aa,w as g,aE as I,E as a,x as ea,y as v,a as sa,aI as r,z as t,A as l,aC as f,aJ as x,D as o,aG as M}from"../chunks/CPBLXjHw.js";import{i as U}from"../chunks/DQNDscH3.js";import{h as ra}from"../chunks/BjeqDZl8.js";import{r as W}from"../chunks/BjYZIULF.js";import{s as ta}from"../chunks/DSGZP5v2.js";import{b as z}from"../chunks/Cv8Dbkhj.js";import{p as oa}from"../chunks/CWmzcjye.js";import{s as la,a as F}from"../chunks/DmKqPpxj.js";import{a as na,e as ia}from"../chunks/CS4B0N_g.js";import{g as G}from"../chunks/BALzUkBY.js";var da=g(`<style lang="scss">body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  display: block;
  background: var(--container-background);
}

:global(body.dark) {
  background: #000;
}</style>`),ma=g('<div class="message error svelte-kmqcod"><span> </span></div>'),ca=g('<span class="field-error svelte-kmqcod">Passwords do not match</span>'),pa=g('<main class="svelte-kmqcod"><div class="signup-container svelte-kmqcod"><h1 class="svelte-kmqcod">ENIGMATICK</h1> <!> <form id="signup" method="POST" class="svelte-kmqcod"><label class="svelte-kmqcod">Username <input name="username" type="text" placeholder="bob" required pattern="[a-zA-Z0-9_-]+" title="Username can only contain letters, numbers, underscores, and hyphens" class="svelte-kmqcod"/></label> <label class="svelte-kmqcod">Display Name <input name="display_name" type="text" placeholder="Bob Anderson" required class="svelte-kmqcod"/></label> <label class="svelte-kmqcod">Password <input name="password" type="password" required minlength="5" placeholder="Use a password manager" class="svelte-kmqcod"/></label> <label class="svelte-kmqcod">Confirm Password <input name="confirm_password" type="password" required minlength="5" placeholder="Confirm your password"/> <!></label> <button type="submit" class="svelte-kmqcod"> </button></form></div></main>');function Pa(N,T){Y(T,!0);const B=()=>F(ia,"$enigmatickWasm",A),J=()=>F(na,"$appData",A),[A,K]=la();let O=x(B),D=x(()=>J().username),d=f(""),m=f(""),b=x(()=>a(d)&&a(m)&&a(d)!==a(m)),n=f(!1),i=f(null);aa(()=>{a(D)&&G(`/@${a(D)}`)});function V(){return a(d)===a(m)}async function Z(e){var p;if(l(i,null),!V()){l(i,"Passwords do not match");return}if(!e.target.checkValidity()){l(i,"Please fill in all required fields");return}l(n,!0);let s=new FormData(e.target);if(s.get("username")&&s.get("display_name")&&s.get("password"))try{await((p=a(O))==null?void 0:p.create_user(String(s.get("username")),String(s.get("display_name")),String(s.get("password"))))?G("/login"):l(i,"Failed to create account. Please try again.")}catch(u){l(i,"An error occurred while creating your account."),console.error("Signup error:",u)}finally{l(n,!1)}}var _=pa();ra("kmqcod",e=>{var s=da();v(e,s)});var C=t(_),S=r(t(C),2);{var j=e=>{var s=ma(),p=t(s),u=t(p,!0);o(p),o(s),I(()=>M(u,a(i))),v(e,s)};U(S,e=>{a(i)&&e(j)})}var h=r(S,2),k=t(h),H=r(t(k));o(k);var y=r(k,2),L=r(t(y));o(y);var w=r(y,2),q=r(t(w));W(q),o(w);var P=r(w,2),c=r(t(P));W(c);let E;var Q=r(c,2);{var R=e=>{var s=ca();v(e,s)};U(Q,e=>{a(b)&&e(R)})}o(P);var $=r(P,2),X=t($,!0);o($),o(h),o(C),o(_),I(()=>{H.disabled=a(n),L.disabled=a(n),q.disabled=a(n),c.disabled=a(n),E=ta(c,1,"svelte-kmqcod",null,E,{error:a(b)}),$.disabled=a(n)||a(b)||!1,M(X,a(n)?"Creating Account...":"Create Account")}),z(q,()=>a(d),e=>l(d,e)),z(c,()=>a(m),e=>l(m,e)),ea("submit",h,oa(Z)),v(N,_),sa(),K()}export{Pa as component};
