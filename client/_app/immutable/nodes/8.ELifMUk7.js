import"../chunks/CWj6FrbW.js";import{p as C,o as y,k,aB as $,m as S,n as D,a as M,aC as p,q as U,v as w,aD as W,u as F}from"../chunks/C-PNKZ_s.js";import{b as H}from"../chunks/C6Vr0pnO.js";import{s as N,a as O}from"../chunks/ChSDbmkr.js";import{e as q}from"../chunks/n0qzx-_D.js";import{g as x}from"../chunks/CjNKWMH0.js";import{H as B}from"../chunks/B4CkcLag.js";var T=k('<!> <main class="svelte-1i19ct2"><dialog class="svelte-1i19ct2"><form method="dialog" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2">Password Update Failed</h3> <p class="svelte-1i19ct2">Something went wrong. Check your current password and try again.</p> <button class="svelte-1i19ct2">Okay</button></form></dialog> <form id="change_password" method="POST" class="svelte-1i19ct2"><h3 class="svelte-1i19ct2">Change Password</h3> <label class="svelte-1i19ct2">Current Password <input name="current_password" type="password" placeholder="Current Password" class="svelte-1i19ct2"/></label> <label class="svelte-1i19ct2">New Password <input name="new_password" type="password" placeholder="Use a Password Manager" class="svelte-1i19ct2"/></label> <label class="svelte-1i19ct2">Confirm New Password <input name="confirm_password" type="password" placeholder="Confirm Password" class="svelte-1i19ct2"/></label> <button class="svelte-1i19ct2">Update</button></form></main>',1);function K(g,u){C(u,!0);const f=()=>O(q,"$enigmatickWasm",v),[v,h]=N();let l=W(f);y(async()=>{w(l)||x("/")});function _(s){var m;let t=new FormData(s.target),r=t.get("current_password"),a=t.get("new_password"),o=t.get("confirm_password");r&&a&&o&&a===o&&(console.log(r+" "+a+" "+o),(m=w(l))==null||m.update_password(String(r),String(a)).then(P=>{P?s.target.reset():e.showModal()}))}let e;var i=T(),n=$(i);B(n,{});var c=p(n,2),d=U(c);H(d,s=>e=s,()=>e);var b=p(d,2);F(c),S("submit",b,s=>{s.preventDefault(),_(s)}),D(g,i),M(),h()}export{K as component};
