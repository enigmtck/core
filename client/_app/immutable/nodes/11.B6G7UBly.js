import{s as lt,f as C,a as V,g as k,h as Z,d as E,c as z,u as $,j as b,i as B,v as M,C as Q,F as Se,H as Ce,l as Be,m as Fe,n as dt,p as pe,k as je,L as st,w as Re,o as mt,I as He,e as ke,D as gt,t as ne}from"../chunks/scheduler.vJi1FF2t.js";import{S as nt,i as ot,b as _e,d as ve,m as be,a as N,c as Te,t as R,e as we,g as ye}from"../chunks/index.NkgvvCTc.js";import{e as te,s as Pe,d as pt,b as _t,D as Ze,c as Ue}from"../chunks/common.iVHbJUVt.js";import{A as at,R as vt}from"../chunks/Article.F1uC_LI8.js";import{C as bt}from"../chunks/Compose.Fv6IHVy0.js";import{b as Tt,g as wt}from"../chunks/navigation.9JcVx6SN.js";import{a as yt,e as Et}from"../chunks/stores.Q3fukup_.js";import{r as We}from"../chunks/index.hLOox8a-.js";import"../chunks/paths.s9Ljdrp4.js";const Mt=t=>typeof window>"u"||!t?We(!1):We(!1,a=>{const l=window.matchMedia(t);a(l.matches);const s=n=>a(n.matches);return l.addEventListener("change",s),()=>{l.removeEventListener("change",s)}});function Ge(t,e,a){const l=t.slice();return l[6]=e[a],l}function Je(t){let e,a,l=t[6]+"",s,n,u,c;return{c(){e=C("a"),a=Be("#"),s=Be(l),this.h()},l(f){e=k(f,"A",{href:!0,title:!0,"data-tag":!0,class:!0});var r=Z(e);a=Fe(r,"#"),s=Fe(r,l),r.forEach(E),this.h()},h(){b(e,"href","#filters"),b(e,"title","Delete"),b(e,"data-tag",n=t[6]),b(e,"class","svelte-1g70ie2")},m(f,r){B(f,e,r),M(e,a),M(e,s),u||(c=Q(e,"click",t[3]),u=!0)},p(f,r){r&1&&l!==(l=f[6]+"")&&dt(s,l),r&1&&n!==(n=f[6])&&b(e,"data-tag",n)},d(f){f&&E(e),u=!1,c()}}}function It(t){let e,a,l,s,n='<input type="text" name="statement" placeholder="Filter Statement (e.g., #Enigmatick)" class="svelte-1g70ie2"/>',u,c,f=te(t[0]),r=[];for(let p=0;p<f.length;p+=1)r[p]=Je(Ge(t,f,p));return{c(){e=C("div"),a=C("div");for(let p=0;p<r.length;p+=1)r[p].c();l=V(),s=C("form"),s.innerHTML=n,this.h()},l(p){e=k(p,"DIV",{class:!0});var d=Z(e);a=k(d,"DIV",{class:!0});var _=Z(a);for(let H=0;H<r.length;H+=1)r[H].l(_);_.forEach(E),l=z(d),s=k(d,"FORM",{class:!0,"data-svelte-h":!0}),$(s)!=="svelte-ghbe8s"&&(s.innerHTML=n),d.forEach(E),this.h()},h(){b(a,"class","svelte-1g70ie2"),b(s,"class","svelte-1g70ie2"),b(e,"class","filters svelte-1g70ie2")},m(p,d){B(p,e,d),M(e,a);for(let _=0;_<r.length;_+=1)r[_]&&r[_].m(a,null);M(e,l),M(e,s),t[5](s),u||(c=Q(s,"submit",t[2]),u=!0)},p(p,[d]){if(d&9){f=te(p[0]);let _;for(_=0;_<f.length;_+=1){const H=Ge(p,f,_);r[_]?r[_].p(H,d):(r[_]=Je(H),r[_].c(),r[_].m(a,null))}for(;_<r.length;_+=1)r[_].d(1);r.length=f.length}},i:Se,o:Se,d(p){p&&E(e),Ce(r,p),t[5](null),u=!1,c()}}}function St(t,e,a){let{resetData:l}=e,{hashtags:s}=e,n;const u=r=>{r.preventDefault();const p=new FormData(n);let d;(d=p.get("statement")?.toString().trim())&&(d=d.startsWith("#")?d.slice(1):d,s.add(d.toString().toLowerCase()),a(0,s),l()),n.reset()},c=r=>{r.preventDefault();let d=r.target.dataset.tag;d&&(s.delete(d),a(0,s),l())};function f(r){pe[r?"unshift":"push"](()=>{n=r,a(1,n)})}return t.$$set=r=>{"resetData"in r&&a(4,l=r.resetData),"hashtags"in r&&a(0,s=r.hashtags)},[s,n,u,c,l,f]}class Ct extends nt{constructor(e){super(),ot(this,e,St,It,lt,{resetData:4,hashtags:0})}}function qe(t,e,a){const l=t.slice();return l[59]=e[a],l}function Qe(t,e,a){const l=t.slice();return l[62]=e[a],l}function Ye(t,e,a){const l=t.slice();return l[59]=e[a],l}function kt(t){let e,a='<i class="fa-solid fa-house svelte-d25ehx"></i>',l,s,n='<i class="fa-solid fa-hotel svelte-d25ehx"></i>',u,c,f='<i class="fa-solid fa-at svelte-d25ehx"></i>',r,p;return{c(){e=C("button"),e.innerHTML=a,l=V(),s=C("button"),s.innerHTML=n,u=V(),c=C("button"),c.innerHTML=f,this.h()},l(d){e=k(d,"BUTTON",{class:!0,"data-view":!0,"data-svelte-h":!0}),$(e)!=="svelte-1agtoqw"&&(e.innerHTML=a),l=z(d),s=k(d,"BUTTON",{"data-view":!0,class:!0,"data-svelte-h":!0}),$(s)!=="svelte-173hbjd"&&(s.innerHTML=n),u=z(d),c=k(d,"BUTTON",{"data-view":!0,class:!0,"data-svelte-h":!0}),$(c)!=="svelte-1jv3lro"&&(c.innerHTML=f),this.h()},h(){b(e,"class","selected svelte-d25ehx"),b(e,"data-view","home"),b(s,"data-view","local"),b(s,"class","svelte-d25ehx"),b(c,"data-view","direct"),b(c,"class","svelte-d25ehx")},m(d,_){B(d,e,_),B(d,l,_),B(d,s,_),B(d,u,_),B(d,c,_),r||(p=[Q(e,"click",t[13]),Q(s,"click",t[13]),Q(c,"click",t[13])],r=!0)},p:Se,d(d){d&&(E(e),E(l),E(s),E(u),E(c)),r=!1,st(p)}}}function Xe(t){let e,a;return e=new at({props:{remove:t[20],refresh:t[19],note:t[59],username:t[24],renderAction:t[12],cachedNote:t[17]}}),e.$on("replyTo",function(){He(t[0].handleReplyToMessage)&&t[0].handleReplyToMessage.apply(this,arguments)}),e.$on("noteSelect",t[14]),{c(){_e(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,s){be(e,l,s),a=!0},p(l,s){t=l;const n={};s[0]&128&&(n.note=t[59]),e.$set(n)},i(l){a||(N(e.$$.fragment,l),a=!0)},o(l){R(e.$$.fragment,l),a=!1},d(l){we(e,l)}}}function Ke(t){let e,a,l,s;e=new at({props:{remove:t[20],refresh:t[19],note:t[59],username:t[24],renderAction:t[12],cachedNote:t[17]}}),e.$on("replyTo",function(){He(t[0].handleReplyToMessage)&&t[0].handleReplyToMessage.apply(this,arguments)}),e.$on("noteSelect",t[14]);let n=t[59].note.id==t[3]&&t[59].replies?.size&&$e(t);return{c(){_e(e.$$.fragment),a=V(),n&&n.c(),l=ke()},l(u){ve(e.$$.fragment,u),a=z(u),n&&n.l(u),l=ke()},m(u,c){be(e,u,c),B(u,a,c),n&&n.m(u,c),B(u,l,c),s=!0},p(u,c){t=u;const f={};c[0]&256&&(f.note=t[59]),e.$set(f),t[59].note.id==t[3]&&t[59].replies?.size?n?(n.p(t,c),c[0]&264&&N(n,1)):(n=$e(t),n.c(),N(n,1),n.m(l.parentNode,l)):n&&(ye(),R(n,1,1,()=>{n=null}),Te())},i(u){s||(N(e.$$.fragment,u),N(n),s=!0)},o(u){R(e.$$.fragment,u),R(n),s=!1},d(u){u&&(E(a),E(l)),we(e,u),n&&n.d(u)}}}function $e(t){let e,a,l,s=te(Array.from(t[59].replies.values()).sort(Ue).reverse()),n=[];for(let c=0;c<s.length;c+=1)n[c]=xe(Qe(t,s,c));const u=c=>R(n[c],1,1,()=>{n[c]=null});return{c(){e=C("div");for(let c=0;c<n.length;c+=1)n[c].c();a=V(),this.h()},l(c){e=k(c,"DIV",{class:!0});var f=Z(e);for(let r=0;r<n.length;r+=1)n[r].l(f);a=z(f),f.forEach(E),this.h()},h(){b(e,"class","replies svelte-d25ehx")},m(c,f){B(c,e,f);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);M(e,a),l=!0},p(c,f){if(f[0]&17842433){s=te(Array.from(c[59].replies.values()).sort(Ue).reverse());let r;for(r=0;r<s.length;r+=1){const p=Qe(c,s,r);n[r]?(n[r].p(p,f),N(n[r],1)):(n[r]=xe(p),n[r].c(),N(n[r],1),n[r].m(e,a))}for(ye(),r=s.length;r<n.length;r+=1)u(r);Te()}},i(c){if(!l){for(let f=0;f<s.length;f+=1)N(n[f]);l=!0}},o(c){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)R(n[f]);l=!1},d(c){c&&E(e),Ce(n,c)}}}function xe(t){let e,a;return e=new vt({props:{remove:t[20],note:t[62],username:t[24]}}),e.$on("replyTo",function(){He(t[0].handleReplyToMessage)&&t[0].handleReplyToMessage.apply(this,arguments)}),e.$on("noteSelect",t[14]),{c(){_e(e.$$.fragment)},l(l){ve(e.$$.fragment,l)},m(l,s){be(e,l,s),a=!0},p(l,s){t=l;const n={};s[0]&256&&(n.note=t[62]),e.$set(n)},i(l){a||(N(e.$$.fragment,l),a=!0)},o(l){R(e.$$.fragment,l),a=!1},d(l){we(e,l)}}}function et(t){let e,a,l=t[59].note&&(!t[3]&&(!t[59].note.inReplyTo||t[59].note.ephemeral?.announces?.length)||t[59].note.id==t[3])&&Ke(t);return{c(){l&&l.c(),e=ke()},l(s){l&&l.l(s),e=ke()},m(s,n){l&&l.m(s,n),B(s,e,n),a=!0},p(s,n){s[59].note&&(!s[3]&&(!s[59].note.inReplyTo||s[59].note.ephemeral?.announces?.length)||s[59].note.id==s[3])?l?(l.p(s,n),n[0]&264&&N(l,1)):(l=Ke(s),l.c(),N(l,1),l.m(e.parentNode,e)):l&&(ye(),R(l,1,1,()=>{l=null}),Te())},i(s){a||(N(l),a=!0)},o(s){R(l),a=!1},d(s){s&&E(e),l&&l.d(s)}}}function tt(t){let e,a='<i class="fa-solid fa-angles-left svelte-d25ehx"></i>',l,s;return{c(){e=C("div"),e.innerHTML=a,this.h()},l(n){e=k(n,"DIV",{class:!0,"data-svelte-h":!0}),$(e)!=="svelte-1x9brsn"&&(e.innerHTML=a),this.h()},h(){b(e,"class","back svelte-d25ehx")},m(n,u){B(n,e,u),l||(s=Q(e,"click",gt(t[15])),l=!0)},p:Se,d(n){n&&E(e),l=!1,s()}}}function Nt(t){let e,a,l,s,n,u,c,f,r='<i class="fa-solid fa-globe svelte-d25ehx"></i>',p,d,_='<i class="fa-solid fa-chevron-up svelte-d25ehx"></i>',H,S,le,ce,fe,J,F,Y,Ee="Filters",ue,j,oe,U,O,Me="Â ",se,ae,Ie,he={senderFunction:t[18],direct:t[9]==="direct"};e=new bt({props:he}),t[27](e),e.$on("publish",t[23]);let W=t[24]&&kt(t),X=te(t[7]),w=[];for(let i=0;i<X.length;i+=1)w[i]=Xe(Ye(t,X,i));const Ne=i=>R(w[i],1,1,()=>{w[i]=null});let K=te(Array.from(t[8].values())),T=[];for(let i=0;i<K.length;i+=1)T[i]=et(qe(t,K,i));const Ae=i=>R(T[i],1,1,()=>{T[i]=null});let A=(t[3]||t[4])&&tt(t);return j=new Ct({props:{hashtags:t[2],resetData:t[21]}}),{c(){_e(e.$$.fragment),a=V(),l=C("main"),s=C("div"),n=C("header"),u=C("nav"),W&&W.c(),c=V(),f=C("button"),f.innerHTML=r,p=V(),d=C("div"),d.innerHTML=_,H=V(),S=C("div");for(let i=0;i<w.length;i+=1)w[i].c();le=V();for(let i=0;i<T.length;i+=1)T[i].c();ce=V(),A&&A.c(),fe=V(),J=C("div"),F=C("div"),Y=C("h1"),Y.textContent=Ee,ue=V(),_e(j.$$.fragment),oe=V(),U=C("div"),O=C("a"),O.textContent=Me,this.h()},l(i){ve(e.$$.fragment,i),a=z(i),l=k(i,"MAIN",{class:!0});var m=Z(l);s=k(m,"DIV",{class:!0});var I=Z(s);n=k(I,"HEADER",{class:!0});var P=Z(n);u=k(P,"NAV",{class:!0});var g=Z(u);W&&W.l(g),c=z(g),f=k(g,"BUTTON",{"data-view":!0,class:!0,"data-svelte-h":!0}),$(f)!=="svelte-1446o8e"&&(f.innerHTML=r),g.forEach(E),p=z(P),d=k(P,"DIV",{class:!0,"data-svelte-h":!0}),$(d)!=="svelte-iaaual"&&(d.innerHTML=_),P.forEach(E),H=z(I),S=k(I,"DIV",{class:!0});var D=Z(S);for(let q=0;q<w.length;q+=1)w[q].l(D);le=z(D);for(let q=0;q<T.length;q+=1)T[q].l(D);D.forEach(E),ce=z(I),A&&A.l(I),I.forEach(E),fe=z(m),J=k(m,"DIV",{class:!0});var x=Z(J);F=k(x,"DIV",{style:!0,class:!0});var re=Z(F);Y=k(re,"H1",{class:!0,"data-svelte-h":!0}),$(Y)!=="svelte-lvj8b"&&(Y.textContent=Ee),ue=z(re),ve(j.$$.fragment,re),re.forEach(E),oe=z(x),U=k(x,"DIV",{class:!0});var ie=Z(U);O=k(ie,"A",{href:!0,class:!0,"data-svelte-h":!0}),$(O)!=="svelte-o9t9r9"&&(O.textContent=Me),ie.forEach(E),x.forEach(E),m.forEach(E),this.h()},h(){b(f,"data-view","global"),b(f,"class","svelte-d25ehx"),b(u,"class","svelte-d25ehx"),b(d,"class","scroll svelte-d25ehx"),b(n,"class","svelte-d25ehx"),b(S,"class","scrollable svelte-d25ehx"),b(s,"class","content svelte-d25ehx"),b(Y,"class","svelte-d25ehx"),je(F,"display",t[10]?"none":"flex"),b(F,"class","svelte-d25ehx"),b(O,"href","#filters"),b(O,"class","svelte-d25ehx"),b(U,"class","handle svelte-d25ehx"),b(J,"class","context svelte-d25ehx"),b(l,"class","svelte-d25ehx")},m(i,m){be(e,i,m),B(i,a,m),B(i,l,m),M(l,s),M(s,n),M(n,u),W&&W.m(u,null),M(u,c),M(u,f),M(n,p),M(n,d),M(s,H),M(s,S);for(let I=0;I<w.length;I+=1)w[I]&&w[I].m(S,null);M(S,le);for(let I=0;I<T.length;I+=1)T[I]&&T[I].m(S,null);t[28](S),M(s,ce),A&&A.m(s,null),M(l,fe),M(l,J),M(J,F),M(F,Y),M(F,ue),be(j,F,null),t[29](F),M(J,oe),M(J,U),M(U,O),t[30](U),se=!0,ae||(Ie=[Q(f,"click",t[13]),Q(d,"click",t[16]),Q(S,"scroll",t[25]),Q(O,"click",t[22])],ae=!0)},p(i,m){const I={};if(m[0]&512&&(I.direct=i[9]==="direct"),e.$set(I),i[24]&&W.p(i,m),m[0]&18501761){X=te(i[7]);let g;for(g=0;g<X.length;g+=1){const D=Ye(i,X,g);w[g]?(w[g].p(D,m),N(w[g],1)):(w[g]=Xe(D),w[g].c(),N(w[g],1),w[g].m(S,le))}for(ye(),g=X.length;g<w.length;g+=1)Ne(g);Te()}if(m[0]&18501897){K=te(Array.from(i[8].values()));let g;for(g=0;g<K.length;g+=1){const D=qe(i,K,g);T[g]?(T[g].p(D,m),N(T[g],1)):(T[g]=et(D),T[g].c(),N(T[g],1),T[g].m(S,null))}for(ye(),g=K.length;g<T.length;g+=1)Ae(g);Te()}i[3]||i[4]?A?A.p(i,m):(A=tt(i),A.c(),A.m(s,null)):A&&(A.d(1),A=null);const P={};m[0]&4&&(P.hashtags=i[2]),j.$set(P),(!se||m[0]&1024)&&je(F,"display",i[10]?"none":"flex")},i(i){if(!se){N(e.$$.fragment,i);for(let m=0;m<X.length;m+=1)N(w[m]);for(let m=0;m<K.length;m+=1)N(T[m]);N(j.$$.fragment,i),se=!0}},o(i){R(e.$$.fragment,i),w=w.filter(Boolean);for(let m=0;m<w.length;m+=1)R(w[m]);T=T.filter(Boolean);for(let m=0;m<T.length;m+=1)R(T[m]);R(j.$$.fragment,i),se=!1},d(i){i&&(E(a),E(l)),t[27](null),we(e,i),W&&W.d(),Ce(w,i),Ce(T,i),t[28](null),A&&A.d(),we(j),t[29](null),t[30](null),ae=!1,st(Ie)}}}function At(t,e,a){let l,s,n,u,c,f,r;Re(t,yt,o=>a(43,c=o)),Re(t,Et,o=>a(26,f=o));let p,d=null,_=new Set,H=new Array,S;const le=Mt("(max-width: 1000px)");Re(t,le,o=>a(10,r=o));const ce=async(o,h,v)=>{if(H.push(o.id),!o.dataset?.conversation)return;const y=o.dataset.conversation;v.has(y)||(v.add(y),await fe(h,y))},fe=async(o,h)=>{const v=await o.get_conversation(encodeURIComponent(h),50);if(!v)return;const y=JSON.parse(v);await J(y)},J=async o=>{if(o.orderedItems)for(const h of o.orderedItems)console.debug(h),h.object.inReplyTo&&await oe(h)},F=o=>{const h=H.indexOf(o.id);h!==-1&&H.splice(h,1)},Y=async o=>{for(const h of o){const v=h.target;v&&(h.isIntersecting?await ce(v,s,_):F(v))}},Ee=o=>{d&&d.observe(o)};mt(async()=>{d=new IntersectionObserver(Y,{root:null,threshold:.3}),L&&L.addEventListener("scroll",W),q?a(9,l="home"):a(9,l="global"),await U()});const ue=async o=>{if(!o.note.inReplyTo&&o.note.id){n.has(o.note.id)||n.set(o.note.id,o),await j(!0,0);return}const h=v=>{for(const[,y]of v.entries()){if(y.note.id===o.note.inReplyTo&&o.note.id)return y.replies.has(o.note.id)||y.replies.set(o.note.id,o),!0;if(h(y.replies))return!0}return!1};if(o.note.inReplyTo&&h(n)){await j(!1);return}await j(!1)},j=async(o,h)=>{try{let v=Ve;if(console.log(`SCROLL TOP ${v}`),a(8,n),o&&h){for(let y=0;y<h;y++)await ne();console.log(`SCROLLING TO ${v}`),L.scrollTo({top:v,left:0,behavior:"instant"})}}catch(v){console.debug("Error updating notes"),console.error(v)}},oe=async o=>{if(o.object.attributedTo){const h=o.object.ephemeral?.attributedTo?.at(0);if(h){const v=new Ze(h,o.object,o);await ue(v)}}},U=async()=>{let o=0;if(n.forEach(h=>{h.note.inReplyTo||(o+=1)}),o<10)try{let h=await O();console.debug("TIMELINE LENGTH: "+h),h&&h>0&&await U()}catch(h){console.error(h)}},O=async()=>{let h=0;if(s&&l&&L){i||(console.debug("INSTANTIATING CACHE"),i=new s.EnigmatickCache,console.debug("Cache instantiated"));let v=await s.get_timeline(x,void 0,20,l,m);console.debug("X!"),console.debug(v);try{let y=JSON.parse(String(v));if(console.debug("RETRIEVED TIMELINE DATA"),console.debug(y),y.next){const G=_t(y.next);G.type==="max"&&G.value&&(x=G.value)}try{y.orderedItems?.forEach(G=>{oe(G)})}catch(G){console.error(G)}return length}catch(y){for(console.error(y),console.debug(v);h++<10;)await Pe(1e3),await O(),console.debug("RETRYING TIMELINE")}}else console.error("NO WASM OR VIEW YET"),await Pe(500),await O()};Tt(async o=>{if(console.log(o),o.to&&o.to.route.id===null){let h=o.to.url.href;const v=/^https:\/\/(?:[a-zA-Z0-9\-]+)(?:\.[a-zA-Z0-9\-]+)+?\/@[a-zA-Z0-9_]+$/,y=/^https:\/\/(?:[a-zA-Z0-9\-]+)(?:\.[a-zA-Z0-9\-]+)+?\/tags\/([a-zA-Z0-9\-_]+)$/,G=/^https:\/\/(?:[a-zA-Z0-9\-]+)(?:\.[a-zA-Z0-9\-]+)+?\/search\?tag=([a-zA-Z0-9\-_]+)$/;let me;if(h.match(v)){let ge=pt(h);ge&&(console.log(`WEBFINGER: ${ge}`),o.cancel(),wt(`/${ge}`))}else((me=h.match(y))||(me=h.match(G)))&&(m.add(me[1].toLowerCase()),o.cancel(),a(2,m),T())}console.log(m)});const Me=async o=>{if(console.log(o),o.target){let h=o.target.dataset.view;h&&(Array.from(document.getElementsByTagName("header")[0].getElementsByTagName("nav")[0].getElementsByTagName("button")).forEach(v=>v.classList.remove("selected")),o.target.classList.add("selected"),a(9,l=h),await T())}},se=async o=>{console.debug("NOTE SELECT"),console.debug(o),a(4,De=o.detail.replyToNote.note.conversation||null),a(3,de=o.detail.replyToNote.note.id||null),console.debug(`setting focusNote to ${o.detail.replyToNote}`),Oe=await he(),P=!0},ae=async()=>{a(4,De=null),a(3,de=null),p.resetCompose(),await Ie(),P=!1},Ie=async()=>{await ne(),await ne(),await ne(),L.scrollTo({top:Oe,left:0,behavior:"instant"})},he=async()=>{let o=L.scrollTop;return console.debug(`CURRENT: ${o}`),await ne(),await ne(),await ne(),L.scrollTo({top:0,left:0,behavior:"instant"}),console.debug("SCROLLED TO TOP"),o},W=async()=>{if(!D&&!P&&!de){D=!0;let h=1;for(;!P&&L.scrollTop+L.offsetHeight>=L.scrollHeight*.8&&h>0;)h=await O()||0;D=!1}const o=document.getElementsByClassName("scroll")[0];L.scrollTop<50?(I=!0,o.style.display="none"):(I=!1,o.style.display="revert")},X=async o=>(s&&!ie.has(o)&&ie.set(o,await s.get_note(o)),ie.get(o)),w=async(o,h,v,y,G,me,ge)=>{if(s){let ee=(await s.SendParams.new()).set_content(v);ge||ee.set_public(),ee.set_attachments(JSON.stringify(y)),ee.set_hashtags(me);for(const[ht,ze]of G)ee.add_mention(ht,ze.id||"",ze.capabilities?.enigmatickEncryption||!1);return h&&(ee.set_in_reply_to(String(h.note.id)),ee.set_conversation(String(h.note.conversation))),console.log(ee),await s.send_note(ee)}else return null},Ne=()=>{console.debug("REFRESH")},K=()=>{console.debug("REMOVE")},T=async()=>{ae(),g=[],a(8,n=new Map),a(7,u=new Array),_=new Set,await he(),x=void 0,re=void 0;const o=document.getElementsByClassName("scroll")[0];o.style.display="none",await U()},Ae=o=>{o&&o.preventDefault(),console.debug("Toggling Filters"),S.style.display==="none"?a(1,S.style.display="flex",S):a(1,S.style.display="none",S)},A=async o=>{console.debug("Handling dispatched Publish in Timeline"),console.debug(o);const h=o.detail.activity;if(h.object.attributedTo){const v=h.object.ephemeral?.attributedTo?.at(0);if(v){const y=new Ze(v,h.object,h);u.unshift(y),a(7,u)}}};let i=null,m=new Set,I=!0,P=!1,g=[],D=!1,x,re,ie=new Map,q=c.username,de=null,De=null,Oe=0,Le,L,Ve=0;const rt=o=>{!D&&!de&&(Ve=L.scrollTop)};function it(o){pe[o?"unshift":"push"](()=>{p=o,a(0,p)})}function ct(o){pe[o?"unshift":"push"](()=>{L=o,a(6,L)})}function ft(o){pe[o?"unshift":"push"](()=>{S=o,a(1,S)})}function ut(o){pe[o?"unshift":"push"](()=>{Le=o,a(5,Le)})}return t.$$.update=()=>{t.$$.dirty[0]&67108864&&(s=f)},a(9,l=""),a(8,n=new Map),a(7,u=new Array),[p,S,m,de,De,Le,L,u,n,l,r,le,Ee,Me,se,ae,he,X,w,Ne,K,T,Ae,A,q,rt,f,it,ct,ft,ut]}class jt extends nt{constructor(e){super(),ot(this,e,At,Nt,lt,{},null,[-1,-1,-1])}}export{jt as component};
