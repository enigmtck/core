import{S as He,i as Re,s as Ce,Y as Ke,d,I as Z,J as B,M as me,K as pe,b as S,o as h,h as z,e as y,f as M,k as W,j as E,l as ve,L as Se,N as Ae,O as Oe,P as Ie,v as jl,r as Ee,D as ge,c as w,m as Y,y as oe,X as Il,n as ie,a as Fe,g as ce,t as ue,E as Te,F as Ve,H as Je,q as Nl,A as Sl,Z as Ml,x as _e,w as ze,B as he}from"../chunks/DR2rOELM.js";import"../chunks/IHki7fMi.js";import{p as Fl}from"../chunks/DX1v6C1c.js";import{A as Cl,s as Ll,a as Dl}from"../chunks/B-rSUPNY.js";import{a as Al,e as We}from"../chunks/B4kYsGbE.js";import{e as Be,h as Ul,j as Pl,k as Bl,D as Hl,d as Rl,f as qe,l as ye,c as je,i as Ne,g as Ze,m as Pe}from"../chunks/CV3kTBDU.js";import{C as Vl}from"../chunks/DXHvQewm.js";import{b as Jl,g as zl}from"../chunks/eEFvHPNh.js";import{g as Wl}from"../chunks/D0QH3NT1.js";import"../chunks/DwxQ6Sg5.js";function Qe(i,e,n){const t=i.slice();return t[26]=e[n],t[27]=e,t[28]=n,t}function Xe(i){let e,n,t={senderFunction:i[8],direct:!1};return e=new Vl({props:t}),i[13](e),{c(){Ie(e.$$.fragment)},l(s){Oe(e.$$.fragment,s)},m(s,l){Ae(e,s,l),n=!0},p(s,l){const o={};e.$set(o)},i(s){n||(B(e.$$.fragment,s),n=!0)},o(s){Z(e.$$.fragment,s),n=!1},d(s){i[13](null),Se(e,s)}}}function Ye(i){let e,n,t,s=Be(Array.from(i[1].values())),l=[];for(let f=0;f<s.length;f+=1)l[f]=xe(Qe(i,s,f));const o=f=>Z(l[f],1,1,()=>{l[f]=null});let a=i[2]&&el(i);return{c(){for(let f=0;f<l.length;f+=1)l[f].c();e=W(),a&&a.c(),n=Ee()},l(f){for(let u=0;u<l.length;u+=1)l[u].l(f);e=z(f),a&&a.l(f),n=Ee()},m(f,u){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(f,u);S(f,e,u),a&&a.m(f,u),S(f,n,u),t=!0},p(f,u){if(u&659){s=Be(Array.from(f[1].values()));let r;for(r=0;r<s.length;r+=1){const c=Qe(f,s,r);l[r]?(l[r].p(c,u),B(l[r],1)):(l[r]=xe(c),l[r].c(),B(l[r],1),l[r].m(e.parentNode,e))}for(me(),r=s.length;r<l.length;r+=1)o(r);pe()}f[2]?a?a.p(f,u):(a=el(f),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(f){if(!t){for(let u=0;u<s.length;u+=1)B(l[u]);t=!0}},o(f){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)Z(l[u]);t=!1},d(f){f&&(d(e),d(n)),jl(l,f),a&&a.d(f)}}}function $e(i){let e,n=i[28],t;const s=()=>i[14](e,n),l=()=>i[14](null,n);let o={parentArticle:i[4][i[28]],remove:i[7],note:i[26],cachedNote:i[9]};return e=new Cl({props:o}),s(),e.$on("replyTo",function(){Il(i[0].handleReplyToMessage)&&i[0].handleReplyToMessage.apply(this,arguments)}),e.$on("noteSelect",ql),{c(){Ie(e.$$.fragment)},l(a){Oe(e.$$.fragment,a)},m(a,f){Ae(e,a,f),t=!0},p(a,f){i=a,n!==i[28]&&(l(),n=i[28],s());const u={};f&16&&(u.parentArticle=i[4][i[28]]),f&2&&(u.note=i[26]),e.$set(u)},i(a){t||(B(e.$$.fragment,a),t=!0)},o(a){Z(e.$$.fragment,a),t=!1},d(a){l(),Se(e,a)}}}function xe(i){let e,n,t=i[26].note&&$e(i);return{c(){t&&t.c(),e=Ee()},l(s){t&&t.l(s),e=Ee()},m(s,l){t&&t.m(s,l),S(s,e,l),n=!0},p(s,l){s[26].note?t?(t.p(s,l),l&2&&B(t,1)):(t=$e(s),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(me(),Z(t,1,1,()=>{t=null}),pe())},i(s){n||(B(t),n=!0)},o(s){Z(t),n=!1},d(s){s&&d(e),t&&t.d(s)}}}function el(i){let e,n,t,s;return{c(){e=E("button"),n=E("i"),this.h()},l(l){e=y(l,"BUTTON",{class:!0});var o=M(e);n=y(o,"I",{class:!0}),M(n).forEach(d),o.forEach(d),this.h()},h(){h(n,"class","fa-solid fa-ellipsis"),e.disabled=i[3],h(e,"class","svelte-1mf9zm9")},m(l,o){S(l,e,o),w(e,n),t||(s=Y(e,"click",oe(i[15])),t=!0)},p(l,o){o&8&&(e.disabled=l[3])},d(l){l&&d(e),t=!1,s()}}}function Gl(i){let e,n,t,s=i[5]&&Xe(i),l=i[5]&&Ye(i);return{c(){s&&s.c(),e=W(),n=E("div"),l&&l.c(),this.h()},l(o){s&&s.l(o),e=z(o),n=y(o,"DIV",{class:!0});var a=M(n);l&&l.l(a),a.forEach(d),this.h()},h(){h(n,"class","svelte-1mf9zm9")},m(o,a){s&&s.m(o,a),S(o,e,a),S(o,n,a),l&&l.m(n,null),t=!0},p(o,[a]){o[5]?s?(s.p(o,a),a&32&&B(s,1)):(s=Xe(o),s.c(),B(s,1),s.m(e.parentNode,e)):s&&(me(),Z(s,1,1,()=>{s=null}),pe()),o[5]?l?(l.p(o,a),a&32&&B(l,1)):(l=Ye(o),l.c(),B(l,1),l.m(n,null)):l&&(me(),Z(l,1,1,()=>{l=null}),pe())},i(o){t||(B(s),B(l),t=!0)},o(o){Z(s),Z(l),t=!1},d(o){o&&(d(e),d(n)),s&&s.d(o),l&&l.d()}}}function ql(){console.debug("NOT IMPLEMENTED")}function Kl(i,e,n){let t,s,l;ve(i,Al,p=>n(18,s=p)),ve(i,We,p=>n(12,l=p));let o,{local:a}=e,{handle:f}=e;console.debug(`HANDLE ${f}`);async function u(p){const k=p.orderedItems;if(console.debug(k),k){for(const T of k)if(T.type==="Create"||T.type==="Announce"){let R="";(Ul(T.object)||Pl(T.object)||Bl(T.object))&&T.object.id?R=T.object.id:R=String(T.object);let C=await(t==null?void 0:t.get_note(R));if(C){const V=JSON.parse(C);T.object=V}L(T)}}n(2,H=p.next||null),q=p.prev||null}async function r(p,k){console.debug("RESETTING NOTES MAP"),console.debug(`Loading posts for ${p}`),n(1,g=new Map),!N&&t&&(N=new t.EnigmatickCache);let T=t==null?void 0:t.get_state();if(T)if(T.get_server_url(),k&&p){const R=await(t==null?void 0:t.get_outbox(p));if(R){const C=JSON.parse(R);console.debug(C),u(C).then(()=>{n(3,X=!1)})}}else t==null||t.get_remote_outbox(`@${p}`).then(R=>{if(R){const C=JSON.parse(R);t==null||t.get_remote_outbox(`@${p}`,C.first).then(V=>{if(V){const A=JSON.parse(V);u(A).then(()=>{n(3,X=!1)})}})}})}async function c(){let p=null;if(H?p=H:q&&(p=q),console.debug(`loadMore URL: ${p}`),p)if(n(3,X=!0),a&&f){let k=Rl(p);console.debug(`maxMin: ${k}`),k&&k.type&&k.value&&(t==null||t.get_outbox(f,k.type,k.value).then(T=>{if(T){const R=JSON.parse(T);u(R).then(()=>{n(3,X=!1)})}}))}else t==null||t.get_remote_outbox(`@${f}`,p).then(k=>{if(k){const T=JSON.parse(k);u(T).then(()=>{n(3,X=!1)})}})}function b(p){g.delete(p),n(1,g)}async function P(p){const k=p.note;g.get(String(k.id))||(g.set(String(k.id),p),D.set(String(k.id),JSON.stringify(k))),n(1,g)}const L=async p=>{var k,T;if(p.object.attributedTo){const R=(T=(k=p.object.ephemeral)==null?void 0:k.attributedTo)==null?void 0:T.at(0);if(R){const C=new Hl(R,p.object,p);await P(C)}}};async function I(p,k,T,R,C,V,A){var v;if(t){let U=(await t.SendParams.new()).set_content(T).set_public();A||U.set_public(),U.set_attachments(JSON.stringify(R)),U.set_hashtags(V);for(const[K,Q]of C)U.add_mention(K,Q.id||"",((v=Q.capabilities)==null?void 0:v.enigmatickEncryption)||!1);return k&&(U.set_in_reply_to(String(k.note.id)),U.set_conversation(String(k.note.conversation))),await t.send_note(U)}else return null}async function j(p){if(t&&!D.has(p)){let k=await t.get_note(p);D.set(p,k)}return D.get(p)}let g=new Map,D=new Map,N=null;s.username;let H=null,q=null,X=!0,G=[];function te(p){ge[p?"unshift":"push"](()=>{o=p,n(0,o)})}function ne(p,k){ge[p?"unshift":"push"](()=>{G[k]=p,n(4,G)})}const re=()=>c();return i.$$set=p=>{"local"in p&&n(10,a=p.local),"handle"in p&&n(11,f=p.handle)},i.$$.update=()=>{i.$$.dirty&4096&&n(5,t=l),i.$$.dirty&3072&&r(f,a).then(()=>{console.debug("RELOADED POSTS")})},[o,g,H,X,G,t,c,b,I,j,a,f,l,te,ne,re]}class Zl extends He{constructor(e){super(),Re(this,e,Kl,Gl,Ce,{local:10,handle:11})}get local(){return this.$$.ctx[10]}set local(e){this.$$set({local:e}),Ke()}get handle(){return this.$$.ctx[11]}set handle(e){this.$$set({handle:e}),Ke()}}function ll(i){let e,n;return{c(){e=E("img"),this.h()},l(t){e=y(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Te(e.src,n=je(i[1],i[0].icon.url))||h(e,"src",n),h(e,"alt","Avatar"),h(e,"class","svelte-1hzuv10")},m(t,s){S(t,e,s)},p(t,s){s&3&&!Te(e.src,n=je(t[1],t[0].icon.url))&&h(e,"src",n)},d(t){t&&d(e)}}}function Ql(i){let e,n=i[0].name+"",t;return{c(){e=E("span"),t=ue(n),this.h()},l(s){e=y(s,"SPAN",{class:!0});var l=M(e);t=ce(l,n),l.forEach(d),this.h()},h(){h(e,"class","svelte-1hzuv10")},m(s,l){S(s,e,l),w(e,t)},p(s,l){l&1&&n!==(n=s[0].name+"")&&Fe(t,n)},d(s){s&&d(e)}}}function Xl(i){let e,n,t=Ne(i[1],i[0].name,i[0])+"";return{c(){e=E("span"),n=new Je(!1),this.h()},l(s){e=y(s,"SPAN",{class:!0});var l=M(e);n=Ve(l,!1),l.forEach(d),this.h()},h(){n.a=null,h(e,"class","svelte-1hzuv10")},m(s,l){S(s,e,l),n.m(t,e)},p(s,l){l&3&&t!==(t=Ne(s[1],s[0].name,s[0])+"")&&n.p(t)},d(s){s&&d(e)}}}function Yl(i){let e,n,t,s,l,o,a,f=(i[0].webfinger||qe(ye(i[0].url)||"",!0)||ye(i[0].url))+"",u,r,c=i[0].icon&&ll(i);function b(I,j){return I[0]&&I[0].name?Xl:Ql}let P=b(i),L=P(i);return{c(){e=E("div"),n=E("a"),t=E("div"),c&&c.c(),s=W(),l=E("div"),L.c(),o=W(),a=E("span"),u=ue(f),this.h()},l(I){e=y(I,"DIV",{class:!0});var j=M(e);n=y(j,"A",{href:!0,class:!0});var g=M(n);t=y(g,"DIV",{class:!0});var D=M(t);c&&c.l(D),D.forEach(d),s=z(g),l=y(g,"DIV",{class:!0});var N=M(l);L.l(N),o=z(N),a=y(N,"SPAN",{class:!0});var H=M(a);u=ce(H,f),H.forEach(d),N.forEach(d),g.forEach(d),j.forEach(d),this.h()},h(){h(t,"class","image svelte-1hzuv10"),h(a,"class","handle svelte-1hzuv10"),h(l,"class","text svelte-1hzuv10"),h(n,"href",r="/"+i[0].webfinger),h(n,"class","svelte-1hzuv10"),h(e,"class","svelte-1hzuv10")},m(I,j){S(I,e,j),w(e,n),w(n,t),c&&c.m(t,null),w(n,s),w(n,l),L.m(l,null),w(l,o),w(l,a),w(a,u)},p(I,[j]){I[0].icon?c?c.p(I,j):(c=ll(I),c.c(),c.m(t,null)):c&&(c.d(1),c=null),P===(P=b(I))&&L?L.p(I,j):(L.d(1),L=P(I),L&&(L.c(),L.m(l,o))),j&1&&f!==(f=(I[0].webfinger||qe(ye(I[0].url)||"",!0)||ye(I[0].url))+"")&&Fe(u,f),j&1&&r!==(r="/"+I[0].webfinger)&&h(n,"href",r)},i:ie,o:ie,d(I){I&&d(e),c&&c.d(),L.d()}}}function $l(i,e,n){let t,s;ve(i,We,o=>n(2,s=o));let{profile:l}=e;return i.$$set=o=>{"profile"in o&&n(0,l=o.profile)},i.$$.update=()=>{i.$$.dirty&4&&n(1,t=s)},[l,t,s]}class xl extends He{constructor(e){super(),Re(this,e,$l,Yl,Ce,{profile:0})}}const{Boolean:et}=Wl;function tl(i,e,n){const t=i.slice();return t[14]=e[n],t}function sl(i){let e,n;return e=new xl({props:{profile:i[14]}}),{c(){Ie(e.$$.fragment)},l(t){Oe(e.$$.fragment,t)},m(t,s){Ae(e,t,s),n=!0},p(t,s){const l={};s&2&&(l.profile=t[14]),e.$set(l)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){Z(e.$$.fragment,t),n=!1},d(t){Se(e,t)}}}function nl(i){let e,n,t,s;return{c(){e=E("button"),n=E("i"),this.h()},l(l){e=y(l,"BUTTON",{class:!0});var o=M(e);n=y(o,"I",{class:!0}),M(n).forEach(d),o.forEach(d),this.h()},h(){h(n,"class","fa-solid fa-ellipsis"),e.disabled=tt,h(e,"class","svelte-17ipyhu")},m(l,o){S(l,e,o),w(e,n),t||(s=Y(e,"click",oe(i[9])),t=!0)},p:ie,d(l){l&&d(e),t=!1,s()}}}function lt(i){let e,n,t,s=Be(i[1]),l=[];for(let f=0;f<s.length;f+=1)l[f]=sl(tl(i,s,f));const o=f=>Z(l[f],1,1,()=>{l[f]=null});let a=i[0]!==void 0&&nl(i);return{c(){e=E("div");for(let f=0;f<l.length;f+=1)l[f].c();n=W(),a&&a.c(),this.h()},l(f){e=y(f,"DIV",{class:!0});var u=M(e);for(let r=0;r<l.length;r+=1)l[r].l(u);n=z(u),a&&a.l(u),u.forEach(d),this.h()},h(){h(e,"class","svelte-17ipyhu")},m(f,u){S(f,e,u);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(e,null);w(e,n),a&&a.m(e,null),t=!0},p(f,[u]){if(u&2){s=Be(f[1]);let r;for(r=0;r<s.length;r+=1){const c=tl(f,s,r);l[r]?(l[r].p(c,u),B(l[r],1)):(l[r]=sl(c),l[r].c(),B(l[r],1),l[r].m(e,n))}for(me(),r=s.length;r<l.length;r+=1)o(r);pe()}f[0]!==void 0?a?a.p(f,u):(a=nl(f),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(f){if(!t){for(let u=0;u<s.length;u+=1)B(l[u]);t=!0}},o(f){l=l.filter(et);for(let u=0;u<l.length;u+=1)Z(l[u]);t=!1},d(f){f&&d(e),jl(l,f),a&&a.d()}}}let tt=!1;function st(i,e,n){let t,s;ve(i,We,g=>n(8,s=g));let{handle:l}=e,{local:o}=e,{view:a}=e,{cache:f}=e,{cachedActor:u}=e,r;const c=async(g,D)=>{if(a=="Followers"){let N=await(t==null?void 0:t.get_remote_followers(g));if(console.debug(N),N)return JSON.parse(N).first}else if(a=="Following"){let N=await(t==null?void 0:t.get_remote_following(g));if(N)return JSON.parse(N).first}},b=async(g,D)=>{var G;const N=a==="Followers"?"get_remote_followers":"get_remote_following",H=await(t==null?void 0:t[N](g,D));if(!H)return null;const q=JSON.parse(H);let X=[];return(G=q.ephemeral)!=null&&G.actors?X=q.ephemeral.actors:q.orderedItems&&(X=await Promise.all(q.orderedItems.map(async te=>{try{const ne=await u(te,f);return JSON.parse(ne)}catch{return console.error(`Failed to retrieve ${te}`),null}})).then(te=>te.filter(Boolean))),{profiles:X,next:q.next}},P=async(g,D)=>{const N=D?await(t==null?void 0:t.get_webfinger_from_handle(g))||g:`@${g}`,H=await c(N);if(!H)return;const q=await b(N,H);q&&(n(1,I=q.profiles),n(0,r=q.next))},L=async()=>{const g=o?await(t==null?void 0:t.get_webfinger_from_handle(l))||l:`@${l}`;if(!g||!r)return;const D=await b(g,r);D&&(n(1,I=[...I,...D.profiles]),n(0,r=D.next))};let I=[];Nl(async()=>{});const j=()=>L();return i.$$set=g=>{"handle"in g&&n(3,l=g.handle),"local"in g&&n(4,o=g.local),"view"in g&&n(5,a=g.view),"cache"in g&&n(6,f=g.cache),"cachedActor"in g&&n(7,u=g.cachedActor)},i.$$.update=()=>{i.$$.dirty&256&&(t=s),i.$$.dirty&24&&P(l,o).then(()=>{console.debug("RELOADED FOLLOWS")})},[r,I,L,l,o,a,f,u,s,j]}class Ol extends He{constructor(e){super(),Re(this,e,st,lt,Ce,{handle:3,local:4,view:5,cache:6,cachedActor:7})}}function il(i){let e,n,t,s,l,o,a,f,u,r,c,b,P,L=Ze(i[13])+"",I,j,g,D,N,H,q,X,G,te,ne,re,p,k,T,R,C=i[17]&&ol(i),V=i[13].image&&rl(i),A=i[17]&&al(i),v=i[13].name&&fl(i),U=i[17]&&cl(i),K=i[6]&&gl(i),Q=i[17]&&!i[6]&&vl(i),$=!i[17]&&kl(i),x=i[14]&&wl(i),ee=(i[14]||i[17])&&yl(i),le=i[17]&&El(i);const Le=[at,rt,ot],ae=[];function De(m,F){return m[4]===m[27].Posts?0:m[4]==m[27].Followers?1:m[4]==m[27].Following?2:-1}return~(k=De(i))&&(T=ae[k]=Le[k](i)),{c(){e=E("div"),n=E("div"),C&&C.c(),t=W(),V&&V.c(),s=W(),l=E("div"),o=E("div"),A&&A.c(),a=W(),f=E("img"),r=W(),c=E("div"),v&&v.c(),b=W(),P=E("a"),I=ue(L),g=W(),U&&U.c(),D=W(),N=E("div"),K&&K.c(),H=W(),Q&&Q.c(),q=W(),$&&$.c(),X=W(),G=E("div"),x&&x.c(),te=W(),ee&&ee.c(),ne=W(),le&&le.c(),re=W(),p=E("section"),T&&T.c(),this.h()},l(m){e=y(m,"DIV",{class:!0});var F=M(e);n=y(F,"DIV",{class:!0});var fe=M(n);C&&C.l(fe),t=z(fe),V&&V.l(fe),fe.forEach(d),s=z(F),l=y(F,"DIV",{class:!0});var de=M(l);o=y(de,"DIV",{class:!0});var ke=M(o);A&&A.l(ke),a=z(ke),f=y(ke,"IMG",{src:!0,alt:!0,class:!0}),ke.forEach(d),r=z(de),c=y(de,"DIV",{class:!0});var we=M(c);v&&v.l(we),b=z(we),P=y(we,"A",{href:!0,class:!0});var Ue=M(P);I=ce(Ue,L),Ue.forEach(d),we.forEach(d),de.forEach(d),g=z(F),U&&U.l(F),D=z(F),N=y(F,"DIV",{class:!0});var _=M(N);K&&K.l(_),H=z(_),Q&&Q.l(_),q=z(_),$&&$.l(_),_.forEach(d),X=z(F),G=y(F,"DIV",{class:!0});var O=M(G);x&&x.l(O),te=z(O),ee&&ee.l(O),ne=z(O),le&&le.l(O),O.forEach(d),F.forEach(d),re=z(m),p=y(m,"SECTION",{class:!0});var J=M(p);T&&T.l(J),J.forEach(d),this.h()},h(){var m;h(n,"class","banner svelte-14ajx5b"),Te(f.src,u=je(i[16],String((m=i[13].icon)==null?void 0:m.url)))||h(f,"src",u),h(f,"alt","Avatar"),h(f,"class","svelte-14ajx5b"),h(o,"class","avatar svelte-14ajx5b"),h(P,"href",j=ye(i[13].url)),h(P,"class","svelte-14ajx5b"),h(c,"class","details svelte-14ajx5b"),h(l,"class","identity svelte-14ajx5b"),h(N,"class","summary svelte-14ajx5b"),h(G,"class","tabs svelte-14ajx5b"),h(e,"class","profile svelte-14ajx5b"),h(p,"class","svelte-14ajx5b")},m(m,F){S(m,e,F),w(e,n),C&&C.m(n,null),w(n,t),V&&V.m(n,null),w(e,s),w(e,l),w(l,o),A&&A.m(o,null),w(o,a),w(o,f),w(l,r),w(l,c),v&&v.m(c,null),w(c,b),w(c,P),w(P,I),w(e,g),U&&U.m(e,null),w(e,D),w(e,N),K&&K.m(N,null),w(N,H),Q&&Q.m(N,null),w(N,q),$&&$.m(N,null),w(e,X),w(e,G),x&&x.m(G,null),w(G,te),ee&&ee.m(G,null),w(G,ne),le&&le.m(G,null),S(m,re,F),S(m,p,F),~k&&ae[k].m(p,null),R=!0},p(m,F){var de;m[17]?C?C.p(m,F):(C=ol(m),C.c(),C.m(n,t)):C&&(C.d(1),C=null),m[13].image?V?V.p(m,F):(V=rl(m),V.c(),V.m(n,null)):V&&(V.d(1),V=null),m[17]?A?A.p(m,F):(A=al(m),A.c(),A.m(o,a)):A&&(A.d(1),A=null),(!R||F[0]&73728&&!Te(f.src,u=je(m[16],String((de=m[13].icon)==null?void 0:de.url))))&&h(f,"src",u),m[13].name?v?v.p(m,F):(v=fl(m),v.c(),v.m(c,b)):v&&(v.d(1),v=null),(!R||F[0]&8192)&&L!==(L=Ze(m[13])+"")&&Fe(I,L),(!R||F[0]&8192&&j!==(j=ye(m[13].url)))&&h(P,"href",j),m[17]?U?U.p(m,F):(U=cl(m),U.c(),U.m(e,D)):U&&(U.d(1),U=null),m[6]?K?K.p(m,F):(K=gl(m),K.c(),K.m(N,H)):K&&(K.d(1),K=null),m[17]&&!m[6]?Q?Q.p(m,F):(Q=vl(m),Q.c(),Q.m(N,q)):Q&&(Q.d(1),Q=null),m[17]?$&&($.d(1),$=null):$?$.p(m,F):($=kl(m),$.c(),$.m(N,null)),m[14]?x?x.p(m,F):(x=wl(m),x.c(),x.m(G,te)):x&&(x.d(1),x=null),m[14]||m[17]?ee?ee.p(m,F):(ee=yl(m),ee.c(),ee.m(G,ne)):ee&&(ee.d(1),ee=null),m[17]?le?le.p(m,F):(le=El(m),le.c(),le.m(G,null)):le&&(le.d(1),le=null);let fe=k;k=De(m),k===fe?~k&&ae[k].p(m,F):(T&&(me(),Z(ae[fe],1,1,()=>{ae[fe]=null}),pe()),~k?(T=ae[k],T?T.p(m,F):(T=ae[k]=Le[k](m),T.c()),B(T,1),T.m(p,null)):T=null)},i(m){R||(B(T),R=!0)},o(m){Z(T),R=!1},d(m){m&&(d(e),d(re),d(p)),C&&C.d(),V&&V.d(),A&&A.d(),v&&v.d(),U&&U.d(),K&&K.d(),Q&&Q.d(),$&&$.d(),x&&x.d(),ee&&ee.d(),le&&le.d(),~k&&ae[k].d()}}}function ol(i){let e,n,t;return{c(){e=E("input"),this.h()},l(s){e=y(s,"INPUT",{style:!0,type:!0,accept:!0}),this.h()},h(){Sl(e,"display","none"),h(e,"type","file"),h(e,"accept",".jpg, .jpeg, .png")},m(s,l){S(s,e,l),i[30](e),n||(t=Y(e,"change",i[29]),n=!0)},p:ie,d(s){s&&d(e),i[30](null),n=!1,t()}}}function rl(i){let e,n;return{c(){e=E("img"),this.h()},l(t){e=y(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Te(e.src,n=je(i[16],String(i[13].image.url)))||h(e,"src",n),h(e,"alt","Banner"),h(e,"class","svelte-14ajx5b")},m(t,s){S(t,e,s)},p(t,s){s[0]&73728&&!Te(e.src,n=je(t[16],String(t[13].image.url)))&&h(e,"src",n)},d(t){t&&d(e)}}}function al(i){let e,n,t;return{c(){e=E("input"),this.h()},l(s){e=y(s,"INPUT",{style:!0,type:!0,accept:!0}),this.h()},h(){Sl(e,"display","none"),h(e,"type","file"),h(e,"accept",".jpg, .jpeg, .png")},m(s,l){S(s,e,l),i[32](e),n||(t=Y(e,"change",i[31]),n=!0)},p:ie,d(s){s&&d(e),i[32](null),n=!1,t()}}}function fl(i){let e,n,t=Ne(i[16],i[13].name,i[13])+"";return{c(){e=E("h1"),n=new Je(!1),this.h()},l(s){e=y(s,"H1",{class:!0});var l=M(e);n=Ve(l,!1),l.forEach(d),this.h()},h(){n.a=null,h(e,"class","svelte-14ajx5b")},m(s,l){S(s,e,l),n.m(t,e)},p(s,l){l[0]&73728&&t!==(t=Ne(s[16],s[13].name,s[13])+"")&&n.p(t)},d(s){s&&d(e)}}}function cl(i){var r;let e,n=i[1].domain&&(!((r=i[13].id)!=null&&r.includes(i[1].domain))||i[13].preferredUsername!==i[17]),t,s,l=n&&ul(i),o=i[14]&&i[13].preferredUsername===i[17]&&ml(i);function a(c,b){if(c[6])return it;if(c[5])return nt}let f=a(i),u=f&&f(i);return{c(){e=E("div"),l&&l.c(),t=W(),o&&o.c(),s=W(),u&&u.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var b=M(e);l&&l.l(b),t=z(b),o&&o.l(b),s=z(b),u&&u.l(b),b.forEach(d),this.h()},h(){h(e,"class","controls svelte-14ajx5b")},m(c,b){S(c,e,b),l&&l.m(e,null),w(e,t),o&&o.m(e,null),w(e,s),u&&u.m(e,null)},p(c,b){var P;b[0]&139266&&(n=c[1].domain&&(!((P=c[13].id)!=null&&P.includes(c[1].domain))||c[13].preferredUsername!==c[17])),n?l?l.p(c,b):(l=ul(c),l.c(),l.m(e,t)):l&&(l.d(1),l=null),c[14]&&c[13].preferredUsername===c[17]?o?o.p(c,b):(o=ml(c),o.c(),o.m(e,s)):o&&(o.d(1),o=null),f===(f=a(c))&&u?u.p(c,b):(u&&u.d(1),u=f&&f(c),u&&(u.c(),u.m(e,null)))},d(c){c&&d(e),l&&l.d(),o&&o.d(),u&&u.d()}}}function ul(i){var a,f,u;let e,n,t,s=!((a=i[13].ephemeral)!=null&&a.following)&&hl(i),l=((f=i[13].ephemeral)==null?void 0:f.following)!==void 0&&((u=i[13].ephemeral)==null?void 0:u.following)&&dl(i),o=i[13].capabilities&&i[13].capabilities.enigmatickEncryption&&_l();return{c(){e=E("div"),s&&s.c(),n=W(),l&&l.c(),t=W(),o&&o.c(),this.h()},l(r){e=y(r,"DIV",{class:!0});var c=M(e);s&&s.l(c),n=z(c),l&&l.l(c),t=z(c),o&&o.l(c),c.forEach(d),this.h()},h(){h(e,"class","svelte-14ajx5b")},m(r,c){S(r,e,c),s&&s.m(e,null),w(e,n),l&&l.m(e,null),w(e,t),o&&o.m(e,null)},p(r,c){var b,P,L;(b=r[13].ephemeral)!=null&&b.following?s&&(s.d(1),s=null):s?s.p(r,c):(s=hl(r),s.c(),s.m(e,n)),((P=r[13].ephemeral)==null?void 0:P.following)!==void 0&&((L=r[13].ephemeral)!=null&&L.following)?l?l.p(r,c):(l=dl(r),l.c(),l.m(e,t)):l&&(l.d(1),l=null),r[13].capabilities&&r[13].capabilities.enigmatickEncryption?o?o.p(r,c):(o=_l(),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(r){r&&d(e),s&&s.d(),l&&l.d(),o&&o.d()}}}function hl(i){let e,n='<i class="fa-solid fa-user-plus svelte-14ajx5b"></i>',t,s;return{c(){e=E("button"),e.innerHTML=n,this.h()},l(l){e=y(l,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(e)!=="svelte-1fpfhx1"&&(e.innerHTML=n),this.h()},h(){h(e,"title","Follow"),h(e,"class","svelte-14ajx5b")},m(l,o){S(l,e,o),t||(s=Y(e,"click",oe(i[25])),t=!0)},p:ie,d(l){l&&d(e),t=!1,s()}}}function dl(i){let e,n='<i class="fa-solid fa-user-minus svelte-14ajx5b"></i>',t,s;return{c(){e=E("button"),e.innerHTML=n,this.h()},l(l){e=y(l,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(e)!=="svelte-18omo1r"&&(e.innerHTML=n),this.h()},h(){h(e,"title","Unfollow"),h(e,"class","svelte-14ajx5b")},m(l,o){S(l,e,o),t||(s=Y(e,"click",oe(i[33])),t=!0)},p:ie,d(l){l&&d(e),t=!1,s()}}}function _l(i){let e,n='<i class="fa-solid fa-key svelte-14ajx5b"></i>',t,s;return{c(){e=E("button"),e.innerHTML=n,this.h()},l(l){e=y(l,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(e)!=="svelte-1vnpazn"&&(e.innerHTML=n),this.h()},h(){h(e,"title","Exchange Keys"),h(e,"class","svelte-14ajx5b")},m(l,o){S(l,e,o),t||(s=Y(e,"click",oe(ct)),t=!0)},p:ie,d(l){l&&d(e),t=!1,s()}}}function ml(i){let e,n,t='<i class="fa-solid fa-image-portrait svelte-14ajx5b"></i>',s,l,o='<i class="fa-solid fa-panorama svelte-14ajx5b"></i>',a,f,u,r=!i[6]&&pl(i);return{c(){e=E("div"),n=E("button"),n.innerHTML=t,s=W(),l=E("button"),l.innerHTML=o,a=W(),r&&r.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var b=M(e);n=y(b,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(n)!=="svelte-lg8yq1"&&(n.innerHTML=t),s=z(b),l=y(b,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(l)!=="svelte-d6jqg4"&&(l.innerHTML=o),a=z(b),r&&r.l(b),b.forEach(d),this.h()},h(){h(n,"title","Change Avatar"),h(n,"class","svelte-14ajx5b"),h(l,"title","Change Banner"),h(l,"class","svelte-14ajx5b"),h(e,"class","svelte-14ajx5b")},m(c,b){S(c,e,b),w(e,n),w(e,s),w(e,l),w(e,a),r&&r.m(e,null),f||(u=[Y(n,"keypress",i[34]),Y(n,"click",i[35]),Y(l,"keypress",i[36]),Y(l,"click",i[37])],f=!0)},p(c,b){c[6]?r&&(r.d(1),r=null):r?r.p(c,b):(r=pl(c),r.c(),r.m(e,null))},d(c){c&&d(e),r&&r.d(),f=!1,ze(u)}}}function pl(i){let e,n='<i class="fa-solid fa-pencil svelte-14ajx5b"></i>',t,s;return{c(){e=E("button"),e.innerHTML=n,this.h()},l(l){e=y(l,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(e)!=="svelte-14msdjk"&&(e.innerHTML=n),this.h()},h(){h(e,"title","Update Biography"),h(e,"class","svelte-14ajx5b")},m(l,o){S(l,e,o),t||(s=[Y(e,"click",oe(i[19])),Y(e,"keypress",oe(i[19]))],t=!0)},p:ie,d(l){l&&d(e),t=!1,ze(s)}}}function nt(i){let e,n,t='<i class="fa-solid fa-floppy-disk svelte-14ajx5b"></i>',s,l;return{c(){e=E("div"),n=E("button"),n.innerHTML=t,this.h()},l(o){e=y(o,"DIV",{class:!0});var a=M(e);n=y(a,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(n)!=="svelte-166g12d"&&(n.innerHTML=t),a.forEach(d),this.h()},h(){h(n,"title","Save"),h(n,"class","svelte-14ajx5b"),h(e,"class","svelte-14ajx5b")},m(o,a){S(o,e,a),w(e,n),s||(l=Y(n,"click",oe(i[22])),s=!0)},p:ie,d(o){o&&d(e),s=!1,l()}}}function it(i){let e,n,t='<i class="fa-solid fa-ban svelte-14ajx5b"></i>',s,l,o='<i class="fa-solid fa-eye svelte-14ajx5b"></i>',a,f,u,r=i[5]&&bl(i);return{c(){e=E("div"),n=E("button"),n.innerHTML=t,s=W(),l=E("button"),l.innerHTML=o,a=W(),r&&r.c(),this.h()},l(c){e=y(c,"DIV",{class:!0});var b=M(e);n=y(b,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(n)!=="svelte-ccvfm4"&&(n.innerHTML=t),s=z(b),l=y(b,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(l)!=="svelte-1l4zhbg"&&(l.innerHTML=o),a=z(b),r&&r.l(b),b.forEach(d),this.h()},h(){h(n,"title","Cancel"),h(n,"class","svelte-14ajx5b"),h(l,"title","Preview"),h(l,"class","svelte-14ajx5b"),h(e,"class","svelte-14ajx5b")},m(c,b){S(c,e,b),w(e,n),w(e,s),w(e,l),w(e,a),r&&r.m(e,null),f||(u=[Y(n,"click",oe(i[21])),Y(l,"click",oe(i[20]))],f=!0)},p(c,b){c[5]?r?r.p(c,b):(r=bl(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(c){c&&d(e),r&&r.d(),f=!1,ze(u)}}}function bl(i){let e,n='<i class="fa-solid fa-floppy-disk svelte-14ajx5b"></i>',t,s;return{c(){e=E("button"),e.innerHTML=n,this.h()},l(l){e=y(l,"BUTTON",{title:!0,class:!0,"data-svelte-h":!0}),he(e)!=="svelte-d0kmnn"&&(e.innerHTML=n),this.h()},h(){h(e,"title","Save"),h(e,"class","svelte-14ajx5b")},m(l,o){S(l,e,o),t||(s=Y(e,"click",oe(i[22])),t=!0)},p:ie,d(l){l&&d(e),t=!1,s()}}}function gl(i){let e,n;return{c(){e=E("pre"),n=ue(i[7]),this.h()},l(t){e=y(t,"PRE",{id:!0,contenteditable:!0,class:!0});var s=M(e);n=ce(s,i[7]),s.forEach(d),this.h()},h(){h(e,"id","summary_edit"),h(e,"contenteditable","true"),h(e,"class","svelte-14ajx5b")},m(t,s){S(t,e,s),w(e,n)},p(t,s){s[0]&128&&Ml(n,t[7])},d(t){t&&d(e)}}}function vl(i){let e,n,t=Ne(i[16],i[13].summary||"",i[13])+"";return{c(){e=E("div"),n=new Je(!1),this.h()},l(s){e=y(s,"DIV",{class:!0});var l=M(e);n=Ve(l,!1),l.forEach(d),this.h()},h(){n.a=null,h(e,"class","svelte-14ajx5b")},m(s,l){S(s,e,l),n.m(t,e)},p(s,l){l[0]&73728&&t!==(t=Ne(s[16],s[13].summary||"",s[13])+"")&&n.p(t)},d(s){s&&d(e)}}}function kl(i){let e,n,t=(i[13].summary||"")+"";return{c(){e=E("span"),n=new Je(!1),this.h()},l(s){e=y(s,"SPAN",{class:!0});var l=M(e);n=Ve(l,!1),l.forEach(d),this.h()},h(){n.a=null,h(e,"class","svelte-14ajx5b")},m(s,l){S(s,e,l),n.m(t,e)},p(s,l){l[0]&8192&&t!==(t=(s[13].summary||"")+"")&&n.p(t)},d(s){s&&d(e)}}}function wl(i){let e,n,t;return{c(){e=E("button"),n=ue("Articles"),this.h()},l(s){e=y(s,"BUTTON",{class:!0});var l=M(e);n=ce(l,"Articles"),l.forEach(d),this.h()},h(){h(e,"class",t=_e(i[4]===i[27].Articles?"selected":"")+" svelte-14ajx5b")},m(s,l){S(s,e,l),w(e,n)},p(s,l){l[0]&16&&t!==(t=_e(s[4]===s[27].Articles?"selected":"")+" svelte-14ajx5b")&&h(e,"class",t)},d(s){s&&d(e)}}}function yl(i){let e,n,t,s,l;return{c(){e=E("button"),n=ue("Posts"),this.h()},l(o){e=y(o,"BUTTON",{class:!0});var a=M(e);n=ce(a,"Posts"),a.forEach(d),this.h()},h(){h(e,"class",t=_e(i[4]===i[27].Posts?"selected":"")+" svelte-14ajx5b")},m(o,a){S(o,e,a),w(e,n),s||(l=Y(e,"click",i[38]),s=!0)},p(o,a){a[0]&16&&t!==(t=_e(o[4]===o[27].Posts?"selected":"")+" svelte-14ajx5b")&&h(e,"class",t)},d(o){o&&d(e),s=!1,l()}}}function El(i){var L,I;let e,n,t=Pe(((L=i[13].ephemeral)==null?void 0:L.leaders)||i[9])+"",s,l,o,a,f,u=Pe(((I=i[13].ephemeral)==null?void 0:I.followers)||i[8])+"",r,c,b,P;return{c(){e=E("button"),n=ue("Following • "),s=ue(t),o=W(),a=E("button"),f=ue("Followers • "),r=ue(u),this.h()},l(j){e=y(j,"BUTTON",{class:!0});var g=M(e);n=ce(g,"Following • "),s=ce(g,t),g.forEach(d),o=z(j),a=y(j,"BUTTON",{class:!0});var D=M(a);f=ce(D,"Followers • "),r=ce(D,u),D.forEach(d),this.h()},h(){h(e,"class",l=_e(i[4]===i[27].Following?"selected":"")+" svelte-14ajx5b"),h(a,"class",c=_e(i[4]===i[27].Followers?"selected":"")+" svelte-14ajx5b")},m(j,g){S(j,e,g),w(e,n),w(e,s),S(j,o,g),S(j,a,g),w(a,f),w(a,r),b||(P=[Y(e,"click",i[39]),Y(a,"click",i[40])],b=!0)},p(j,g){var D,N;g[0]&8704&&t!==(t=Pe(((D=j[13].ephemeral)==null?void 0:D.leaders)||j[9])+"")&&Fe(s,t),g[0]&16&&l!==(l=_e(j[4]===j[27].Following?"selected":"")+" svelte-14ajx5b")&&h(e,"class",l),g[0]&8448&&u!==(u=Pe(((N=j[13].ephemeral)==null?void 0:N.followers)||j[8])+"")&&Fe(r,u),g[0]&16&&c!==(c=_e(j[4]===j[27].Followers?"selected":"")+" svelte-14ajx5b")&&h(a,"class",c)},d(j){j&&(d(e),d(o),d(a)),b=!1,ze(P)}}}function ot(i){let e,n,t={handle:i[0].params.handle,local:i[14],view:"Following",cache:i[15],cachedActor:i[18]};return e=new Ol({props:t}),i[43](e),{c(){Ie(e.$$.fragment)},l(s){Oe(e.$$.fragment,s)},m(s,l){Ae(e,s,l),n=!0},p(s,l){const o={};l[0]&1&&(o.handle=s[0].params.handle),l[0]&16384&&(o.local=s[14]),l[0]&32768&&(o.cache=s[15]),e.$set(o)},i(s){n||(B(e.$$.fragment,s),n=!0)},o(s){Z(e.$$.fragment,s),n=!1},d(s){i[43](null),Se(e,s)}}}function rt(i){let e,n,t={handle:i[0].params.handle,local:i[14],view:"Followers",cache:i[15],cachedActor:i[18]};return e=new Ol({props:t}),i[42](e),{c(){Ie(e.$$.fragment)},l(s){Oe(e.$$.fragment,s)},m(s,l){Ae(e,s,l),n=!0},p(s,l){const o={};l[0]&1&&(o.handle=s[0].params.handle),l[0]&16384&&(o.local=s[14]),l[0]&32768&&(o.cache=s[15]),e.$set(o)},i(s){n||(B(e.$$.fragment,s),n=!0)},o(s){Z(e.$$.fragment,s),n=!1},d(s){i[42](null),Se(e,s)}}}function at(i){let e,n,t={handle:i[0].params.handle,local:i[14]};return e=new Zl({props:t}),i[41](e),{c(){Ie(e.$$.fragment)},l(s){Oe(e.$$.fragment,s)},m(s,l){Ae(e,s,l),n=!0},p(s,l){const o={};l[0]&1&&(o.handle=s[0].params.handle),l[0]&16384&&(o.local=s[14]),e.$set(o)},i(s){n||(B(e.$$.fragment,s),n=!0)},o(s){Z(e.$$.fragment,s),n=!1},d(s){i[41](null),Se(e,s)}}}function Tl(i){let e,n,t=i[13]&&il(i);return{c(){e=E("main"),t&&t.c(),this.h()},l(s){e=y(s,"MAIN",{class:!0});var l=M(e);t&&t.l(l),l.forEach(d),this.h()},h(){h(e,"class","svelte-14ajx5b")},m(s,l){S(s,e,l),t&&t.m(e,null),n=!0},p(s,l){s[13]?t?(t.p(s,l),l[0]&8192&&B(t,1)):(t=il(s),t.c(),B(t,1),t.m(e,null)):t&&(me(),Z(t,1,1,()=>{t=null}),pe())},i(s){n||(B(t),n=!0)},o(s){Z(t),n=!1},d(s){s&&d(e),t&&t.d()}}}function ft(i){let e=i[13],n,t,s=Tl(i);return{c(){s.c(),n=Ee()},l(l){s.l(l),n=Ee()},m(l,o){s.m(l,o),S(l,n,o),t=!0},p(l,o){o[0]&8192&&Ce(e,e=l[13])?(me(),Z(s,1,1,ie),pe(),s=Tl(l),s.c(),B(s,1),s.m(n.parentNode,n)):s.p(l,o)},i(l){t||(B(s),t=!0)},o(l){Z(s),t=!1},d(l){l&&d(n),s.d(l)}}}async function ct(i){console.log(i)}function ut(i,e,n){let t,s,l,o,a;ve(i,Fl,_=>n(0,l=_)),ve(i,We,_=>n(28,o=_)),ve(i,Al,_=>n(1,a=_));const{Converter:f}=Ll;Nl(async()=>{});async function u(_){if(console.debug(`INSTANCE DOMAIN: ${a.domain}`),console.log(`GETTING ${_}`),_.includes("@")){console.debug("REQUEST FOR REMOTE PROFILE"),n(14,U=!1);let O=await r(`@${_}`,K);n(13,v=JSON.parse(O)),console.debug(v),A&&v&&(n(12,A.local=U,A),n(12,A.handle=_,A),n(12,A.profile=v,A)),t==null||t.get_remote_followers(`@${_}`).then(J=>{if(J){let se=JSON.parse(J);n(8,T=se.totalItems||0)}}),t==null||t.get_remote_following(`@${_}`).then(J=>{if(J){let se=JSON.parse(J);n(9,R=se.totalItems||0)}})}else console.debug("REQUEST FOR LOCAL PROFILE"),n(14,U=!0),t==null||t.get_profile_by_username(_).then(O=>{var J;console.log("IN get_profile_by_username"),O&&(console.log(O),n(13,v=JSON.parse(O)),console.debug(v),A&&v&&(n(12,A.local=U,A),n(12,A.handle=_,A),n(12,A.profile=v,A)),n(7,k=((J=v==null?void 0:v.ephemeral)==null?void 0:J.summaryMarkdown)||""))})}async function r(_,O){if(O)try{return console.debug(`RETRIEVING ${_} FROM CACHE`),await(t==null?void 0:t.get_actor_cached(O,_))}catch{return console.error(`FAILED TO RETRIEVE: ${_}`),null}return null}function c(_){let O=new f({extensions:[Dl({pre:!0,auto_detection:!0})]});return O.setFlavor("github"),O.setOption("tables",!0),O.setOption("requireSpaceBeforeHeadingText",!0),O.makeHtml(_)}function b(_){(_ instanceof KeyboardEvent&&(_.key==="Enter"||_.key===" ")||_ instanceof MouseEvent&&_.type==="click")&&n(6,p=!0)}function P(_){let O=document.getElementById("summary_edit");if(O){let J=O.innerText;v&&(n(7,k=J),n(6,p=!1),n(13,v.summary=c(J),v),n(5,re=!0))}}function L(_){n(6,p=!1)}function I(){v&&v.summary&&(t==null||t.update_summary(v.summary,k).then(_=>{console.log(_),n(5,re=!1)}))}const j=_=>{let O=_.target;if(O.files!==null){let J=O.files[0],se=String(J.name.match(/\.[0-9a-z]+$/i)).slice(1),Me=new FileReader;Me.readAsArrayBuffer(J),Me.onload=be=>{if(be.target!==null){q=be.target.result!==null?be.target.result:null,console.log(q);let Ge=new Uint8Array(q);t==null||t.upload_avatar(Ge,q.byteLength,se).then(()=>{u(l.params.handle)})}}}},g=_=>{let O=_.target;if(O.files!==null){let J=O.files[0],se=String(J.name.match(/\.[0-9a-z]+$/i)).slice(1),Me=new FileReader;Me.readAsArrayBuffer(J),Me.onload=be=>{if(be.target!==null){G=be.target.result!==null?be.target.result:null,console.log(G);let Ge=new Uint8Array(G);t==null||t.upload_banner(Ge,G.byteLength,se).then(()=>{u(l.params.handle)})}}}};function D(_){v&&v.id?(console.log("Following: "+v.id),t==null||t.send_follow(v.id).then(O=>{if(O&&v){let J=JSON.parse(O);console.debug(`Follow sent: ${J.id}`);let se=v.ephemeral||{};se.following=!0,n(13,v.ephemeral=se,v)}})):console.log("no profile loaded")}function N(_){_&&v&&v.id?(console.log("Unfollowing: "+v.id),t==null||t.send_unfollow(v.id,_).then(O=>{if(O&&v){let J=JSON.parse(O);console.debug(`Unfollow sent: ${J.id}`);let se=v.ephemeral||{};se.following=!1,n(13,v.ephemeral=se,v)}})):console.log("no profile loaded")}const H={Articles:Symbol("articles"),Posts:Symbol("posts"),Followers:Symbol("followers"),Following:Symbol("following")};let q,X,G,te,ne=H.Posts,re=!1,p=!1,k="",T=0,R=0,C,V,A,v=null,U=!0,K=null;Jl(async _=>{if(n(4,ne=H.Posts),console.debug(_),_.to&&_.to.route.id===null){let O=_.to.url.href;const J=/^https:\/\/(:?[a-zA-Z0-9\-]+)(:?\.[a-zA-Z0-9\-]+)+?\/@[a-zA-Z0-9_]+\/?$/;if(O.match(J)){let se=qe(O);se&&(console.log(`WEBFINGER: ${se}`),_.cancel(),await zl(`/${se}`))}}});const Q=_=>g(_);function $(_){ge[_?"unshift":"push"](()=>{te=_,n(3,te)})}const x=_=>j(_);function ee(_){ge[_?"unshift":"push"](()=>{X=_,n(2,X)})}const le=()=>{var _;return N((_=v==null?void 0:v.ephemeral)==null?void 0:_.followActivityAsId)},Le=()=>{X.click()},ae=()=>{X.click()},De=()=>{te.click()},m=()=>{te.click()},F=()=>{n(4,ne=H.Posts)},fe=()=>{n(4,ne=H.Following)},de=()=>{n(4,ne=H.Followers)};function ke(_){ge[_?"unshift":"push"](()=>{A=_,n(12,A)})}function we(_){ge[_?"unshift":"push"](()=>{C=_,n(10,C)})}function Ue(_){ge[_?"unshift":"push"](()=>{V=_,n(11,V)})}return i.$$.update=()=>{i.$$.dirty[0]&268435456&&n(16,t=o),i.$$.dirty[0]&2&&n(17,s=a.username),i.$$.dirty[0]&268435457&&o&&(n(15,K=new o.EnigmatickCache),u(l.params.handle))},[l,a,X,te,ne,re,p,k,T,R,C,V,A,v,U,K,t,s,r,b,P,L,I,j,g,D,N,H,o,Q,$,x,ee,le,Le,ae,De,m,F,fe,de,ke,we,Ue]}class yt extends He{constructor(e){super(),Re(this,e,ut,ft,Ce,{},null,[-1,-1])}}export{yt as component};
