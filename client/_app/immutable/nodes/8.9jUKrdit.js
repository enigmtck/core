import{s as q,f as h,a as z,g as f,h as C,u as v,c as P,d as _,j as d,i as y,v as w,C as M,D as S,F as g,w as k,o as L,p as T}from"../chunks/scheduler.vJi1FF2t.js";import{S as F,i as H}from"../chunks/index.NkgvvCTc.js";import{e as O}from"../chunks/stores.Q3fukup_.js";import{g as x}from"../chunks/navigation.9JcVx6SN.js";function D(l){let e,a,i='<form method="dialog" class="svelte-2qpcaz"><h3 class="svelte-2qpcaz">Password Update Failed</h3> <p class="svelte-2qpcaz">Something went wrong. Check your current password and try again.</p> <button class="svelte-2qpcaz">Okay</button></form>',o,s,c=`<h3 class="svelte-2qpcaz">Change Password</h3> <label class="svelte-2qpcaz">Current Password
			<input name="current_password" type="password" placeholder="Current Password" class="svelte-2qpcaz"/></label> <label class="svelte-2qpcaz">New Password
			<input name="new_password" type="password" placeholder="Use a Password Manager" class="svelte-2qpcaz"/></label> <label class="svelte-2qpcaz">Confirm New Password
			<input name="confirm_password" type="password" placeholder="Confirm Password" class="svelte-2qpcaz"/></label> <button class="svelte-2qpcaz">Update</button>`,p,t;return{c(){e=h("main"),a=h("dialog"),a.innerHTML=i,o=z(),s=h("form"),s.innerHTML=c,this.h()},l(n){e=f(n,"MAIN",{class:!0});var r=C(e);a=f(r,"DIALOG",{class:!0,"data-svelte-h":!0}),v(a)!=="svelte-1rabwvv"&&(a.innerHTML=i),o=P(r),s=f(r,"FORM",{id:!0,method:!0,class:!0,"data-svelte-h":!0}),v(s)!=="svelte-185f70x"&&(s.innerHTML=c),r.forEach(_),this.h()},h(){d(a,"class","svelte-2qpcaz"),d(s,"id","change_password"),d(s,"method","POST"),d(s,"class","svelte-2qpcaz"),d(e,"class","svelte-2qpcaz")},m(n,r){y(n,e,r),w(e,a),l[3](a),w(e,o),w(e,s),p||(t=M(s,"submit",S(l[1])),p=!0)},p:g,i:g,o:g,d(n){n&&_(e),l[3](null),p=!1,t()}}}function N(l,e,a){let i,o;k(l,O,t=>a(2,o=t)),L(async()=>{i||x("/")});function s(t){let n=new FormData(t.target),r=n.get("current_password"),m=n.get("new_password"),u=n.get("confirm_password");r&&m&&u&&m===u&&(console.log(r+" "+m+" "+u),i?.update_password(String(r),String(m)).then(b=>{b?t.target.reset():c.showModal()}))}let c;function p(t){T[t?"unshift":"push"](()=>{c=t,a(0,c)})}return l.$$.update=()=>{l.$$.dirty&4&&(i=o)},[c,s,o,p]}class j extends F{constructor(e){super(),H(this,e,N,D,q,{})}}export{j as component};
