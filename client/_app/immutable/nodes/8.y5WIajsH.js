import"../chunks/CWj6FrbW.js";import{w as g,aE as W,x as le,E as e,y as _,aI as d,z as v,A as t,aC as b,D as c,aJ as B,aG as D,aL as oe,p as Z,S as ce,o as ee,a as te,aM as ve,aH as ne}from"../chunks/CPBLXjHw.js";import{s as se,a as ae}from"../chunks/DmKqPpxj.js";import{e as re}from"../chunks/CS4B0N_g.js";import{g as me}from"../chunks/2w9f54dl.js";import{H as ue}from"../chunks/CKBTCsS-.js";import{i as A}from"../chunks/DQNDscH3.js";import{r as z,s as pe}from"../chunks/BjYZIULF.js";import{s as fe}from"../chunks/DSGZP5v2.js";import{b as G}from"../chunks/Cv8Dbkhj.js";import{e as _e,i as be}from"../chunks/J1mst6rE.js";import{i as ge,s as ye}from"../chunks/C9hyjXPS.js";var he=g('<div class="message error svelte-1nl1bqb"><span> </span></div>'),we=g('<div class="message success svelte-1nl1bqb"><span>Password updated successfully!</span></div>'),ke=g('<span class="field-error svelte-1nl1bqb">Passwords do not match</span>'),qe=g('<div class="password-change svelte-1nl1bqb"><h3 class="svelte-1nl1bqb">Change Password</h3> <p class="description svelte-1nl1bqb">Update your account password. Make sure to use a strong, unique password.</p> <!> <!> <form class="svelte-1nl1bqb"><label class="svelte-1nl1bqb">Current Password <input type="password" placeholder="Enter your current password" required class="svelte-1nl1bqb"/></label> <label class="svelte-1nl1bqb">New Password <input type="password" placeholder="Enter your new password" required minlength="5" class="svelte-1nl1bqb"/></label> <label class="svelte-1nl1bqb">Confirm New Password <input type="password" placeholder="Confirm your new password" required minlength="5"/> <!></label> <button type="submit" class="svelte-1nl1bqb"> </button></form></div>');function Te(E){const L=()=>ae(re,"$enigmatickWasm",y),[y,C]=se();let $=B(L),f=b(""),r=b(""),m=b(""),l=b(!1),o=b(null),n=b(!1),u=B(()=>e(r)&&e(m)&&e(r)!==e(m)),p=B(()=>e(f)&&e(r)&&e(m)&&!e(u));async function k(a){if(a.preventDefault(),!(!e($)||!e(p))){if(e(u)){t(o,"New passwords do not match");return}t(l,!0),t(o,null),t(n,!1);try{await e($).update_password(e(f),e(r))?(t(n,!0),t(f,""),t(r,""),t(m,""),setTimeout(()=>{t(n,!1)},5e3)):t(o,"Password update failed. Please check your current password and try again.")}catch(h){t(o,"An error occurred while updating your password."),console.error("Error updating password:",h)}finally{t(l,!1)}}}var P=qe(),J=d(v(P),4);{var F=a=>{var h=he(),T=v(h),S=v(T,!0);c(T),c(h),W(()=>D(S,e(o))),_(a,h)};A(J,a=>{e(o)&&a(F)})}var I=d(J,2);{var K=a=>{var h=we();_(a,h)};A(I,a=>{e(n)&&a(K)})}var j=d(I,2),H=v(j),M=d(v(H));z(M),c(H);var q=d(H,2),x=d(v(q));z(x),c(q);var U=d(q,2),N=d(v(U));z(N);let R;var O=d(N,2);{var s=a=>{var h=ke();_(a,h)};A(O,a=>{e(u)&&a(s)})}c(U);var i=d(U,2),w=v(i,!0);c(i),c(j),c(P),W(()=>{M.disabled=e(l),x.disabled=e(l),N.disabled=e(l),R=fe(N,1,"svelte-1nl1bqb",null,R,{error:e(u)}),i.disabled=e(l)||!e(p),D(w,e(l)?"Updating...":"Update Password")}),le("submit",j,k),G(M,()=>e(f),a=>t(f,a)),G(x,()=>e(r),a=>t(r,a)),G(N,()=>e(m),a=>t(m,a)),_(E,P),C()}var $e=g('<div class="message error svelte-1tqy8cs"><span> </span></div>'),Pe=g('<div class="message success svelte-1tqy8cs"><span> </span></div>'),xe=g('<div class="loading svelte-1tqy8cs">Loading muted terms...</div>'),Ee=g('<div class="empty svelte-1tqy8cs">No muted terms yet. Add terms above to filter content.</div>'),Le=g('<div class="term-tag svelte-1tqy8cs"><span class="term-text svelte-1tqy8cs"> </span> <button class="remove svelte-1tqy8cs" title="Remove this term"><i class="fa-solid fa-xmark svelte-1tqy8cs"></i></button></div>'),Ce=g('<div class="terms-cloud svelte-1tqy8cs"></div>'),Me=g('<div class="muted-terms svelte-1tqy8cs"><h3 class="svelte-1tqy8cs">Muted Terms</h3> <p class="description svelte-1tqy8cs">Add terms you want to filter out from your timeline. Posts containing these terms will be hidden.</p> <!> <!> <div class="add-term svelte-1tqy8cs"><input type="text" placeholder="Enter a term to mute" class="svelte-1tqy8cs"/> <button class="svelte-1tqy8cs"> </button></div> <!></div>');function Ne(E,L){Z(L,!0);const y=()=>ae(re,"$enigmatickWasm",C),[C,$]=se();let f=B(y),r=b(ce([])),m=b(""),l=b(!1),o=b(!1),n=b(null),u=b(null);ee(async()=>{await p()});async function p(){if(e(f)){t(l,!0),t(n,null);try{const s=await e(f).get_muted_terms();s?t(r,JSON.parse(s),!0):t(r,[],!0)}catch(s){t(n,"Failed to load muted terms"),console.error("Error loading muted terms:",s)}finally{t(l,!1)}}}async function k(){if(!e(f)||!e(m).trim())return;const s=e(m).trim().toLowerCase();if(e(r).includes(s)){t(n,"This term is already muted");return}t(o,!0),t(n,null),t(u,null);try{await e(f).add_muted_terms([s])?(t(r,[...e(r),s],!0),t(m,""),t(u,"Term added successfully"),setTimeout(()=>{t(u,null)},3e3)):t(n,"Failed to add term")}catch(i){t(n,"Failed to add term"),console.error("Error adding muted term:",i)}finally{t(o,!1)}}async function P(s){if(e(f)){t(o,!0),t(n,null),t(u,null);try{await e(f).remove_muted_terms([s])?(t(r,e(r).filter(w=>w!==s),!0),t(u,"Term removed successfully"),setTimeout(()=>{t(u,null)},3e3)):t(n,"Failed to remove term")}catch(i){t(n,"Failed to remove term"),console.error("Error removing muted term:",i)}finally{t(o,!1)}}}function J(s){s.key==="Enter"&&(s.preventDefault(),k())}var F=Me(),I=d(v(F),4);{var K=s=>{var i=$e(),w=v(i),a=v(w,!0);c(w),c(i),W(()=>D(a,e(n))),_(s,i)};A(I,s=>{e(n)&&s(K)})}var j=d(I,2);{var H=s=>{var i=Pe(),w=v(i),a=v(w,!0);c(w),c(i),W(()=>D(a,e(u))),_(s,i)};A(j,s=>{e(u)&&s(H)})}var M=d(j,2),q=v(M);z(q);var x=d(q,2);x.__click=k;var U=v(x,!0);c(x),c(M);var N=d(M,2);{var R=s=>{var i=xe();_(s,i)},O=s=>{var i=ve(),w=ne(i);{var a=T=>{var S=Ee();_(T,S)},h=T=>{var S=Ce();_e(S,21,()=>e(r),be,(ie,V)=>{var Q=Le(),X=v(Q),de=v(X,!0);c(X);var Y=d(X,2);Y.__click=()=>P(e(V)),c(Q),W(()=>{D(de,e(V)),Y.disabled=e(o),pe(Y,"aria-label",`Remove ${e(V)??""}`)}),_(ie,Q)}),c(S),_(T,S)};A(w,T=>{e(r).length===0?T(a):T(h,!1)},!0)}_(s,i)};A(N,s=>{e(l)?s(R):s(O,!1)})}c(F),W(s=>{q.disabled=e(o)||e(l),x.disabled=s,D(U,e(o)?"Adding...":"Add Term")},[()=>e(o)||e(l)||!e(m).trim()]),le("keypress",q,J),G(q,()=>e(m),s=>t(m,s)),_(E,F),te(),$()}oe(["click"]);var Se=g('<div class="theme-selector svelte-1cvjkna"><h3 class="svelte-1cvjkna">Theme</h3> <p class="description svelte-1cvjkna">Choose your preferred color theme</p> <label class="svelte-1cvjkna">Theme <select class="svelte-1cvjkna"><option>Dark</option><option>Light</option></select></label></div>');function We(E,L){Z(L,!0);let y=b("dark");ee(()=>{const p=localStorage.getItem("theme");p==="light"||p==="dark"?t(y,p,!0):t(y,"dark")});function C(){const p=document.getElementsByTagName("body")[0],k=document.documentElement;p&&!p.classList.contains("dark")&&(p.classList.add("dark"),k.classList.add("dark"),localStorage.setItem("theme","dark"))}function $(){const p=document.getElementsByTagName("body")[0],k=document.documentElement;p&&p.classList.contains("dark")&&(p.classList.remove("dark"),k.classList.remove("dark"),localStorage.setItem("theme","light"))}function f(p){const P=p.target.value;t(y,P,!0),P==="dark"?C():$()}var r=Se(),m=d(v(r),4),l=d(v(m));l.__change=f;var o=v(l);o.value=o.__value="dark";var n=d(o);n.value=n.__value="light",c(l);var u;ge(l),c(m),c(r),W(()=>{u!==(u=e(y))&&(l.value=(l.__value=e(y))??"",ye(l,e(y)))}),_(E,r),te()}oe(["change"]);var Ae=g('<!> <main class="svelte-1i19ct2"><!> <!> <!></main>',1);function Oe(E,L){Z(L,!0);const y=()=>ae(re,"$enigmatickWasm",C),[C,$]=se();let f=B(y);ee(async()=>{e(f)||me("/")});var r=Ae(),m=ne(r);ue(m,{});var l=d(m,2),o=v(l);We(o,{});var n=d(o,2);Te(n);var u=d(n,2);Ne(u,{}),c(l),_(E,r),te(),$()}export{Oe as component};
